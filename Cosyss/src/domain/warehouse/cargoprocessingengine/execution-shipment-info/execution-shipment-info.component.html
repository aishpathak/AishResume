<form [formGroup]="form">
  <ngc-titlebar title='warehouse.manage.shipmentactionlist' (clear)="onClear($event)" (cancel)="onCancel($event)">
  </ngc-titlebar>
  <ngc-container type="section">
    <ngc-row>
      <ngc-column column="2">
        <ngc-label label='g.awbNumber'>
        </ngc-label>
        <div>
          <ngc-awbinput accessEnableOn="r" formControlName="shipmentNumber" required>
          </ngc-awbinput>
        </div>
      </ngc-column>
      <ngc-column column="2">
        <ngc-label label='warehouse.processname'></ngc-label>
        <div>
          <ngc-dropdownlist accessEnableOn="r" formControlName="processAreaId" sourceType='query' (select)="onSelectProcess($event)"
            sourceId="CPE_PROCESS_AREA_TYPES_FOR_MESSAGE_PRECEDENTS"></ngc-dropdownlist>
        </div>
      </ngc-column>
      <ngc-column column="2">
        <ngc-label label='warehouse.actiontype'></ngc-label>
        <div>
          <ngc-dropdownlist accessEnableOn="r" formControlName="actionType" sourceId="CPE$ActionTypes"></ngc-dropdownlist>
        </div>
      </ngc-column>
      <ngc-column column="1">
        <ngc-label label=' '></ngc-label>
        <div>
          <ngc-button accessEnableOn="r" (click)="onSearch()" value="g.search" iconType="search"></ngc-button>
        </div>
      </ngc-column>
      <ngc-column align="right">
        <ngc-label label=' '></ngc-label>
        <div>
          <ngc-button (click)="onCloseFailureData()" value="warehouse.closefailure"></ngc-button>
        </div>
      </ngc-column>
    </ngc-row>
    <ngc-row>
      <ngc-column>
        <ngc-container title="warehouse.warning">
          <ngc-row>
            <ngc-column>
              <ngc-table>
                <thead align="left">
                  <tr>
                    <th>
                      <ngc-label label="g.sNo"></ngc-label>
                    </th>
                    <th>
                      <ngc-label label="g.flightKey"></ngc-label>
                    </th>
                    <th>
                      <ngc-label label="warehouse.modulecode"></ngc-label>
                    </th>
                    <th>
                      <ngc-label label="warehouse.process.areaname"></ngc-label>
                    </th>
                    <th>
                      <ngc-label label="warehouse.processorname"></ngc-label>
                    </th>
                    <th>
                      <ngc-label label="warehouse.actiontype"></ngc-label>
                    </th>
                    <th>
                      <ngc-label label="warehouse.failuremessage"></ngc-label>
                    </th>
                    <th>
                      <ngc-label label="g.status"></ngc-label>
                    </th>
                    <th>
                      <ngc-label label="warehouse.closeddate"></ngc-label>
                    </th>
                    <th>
                      <ngc-label label="warehouse.closedby"></ngc-label>
                    </th>
                    <th>
                      <ngc-label label="warehouse.acknowledge"></ngc-label>
                    </th>
                  </tr>
                </thead>
                <tbody align="center" formArrayName="shipmentWarnDetails">
                  <tr *ngFor="let item of form.controls.shipmentWarnDetails.controls; let index=index"
                    [formGroupName]="index">
                    <td>
                      <ngc-label label={{index+1}}></ngc-label>
                    </td>
                    <td>
                      <ngc-display formControlName="flightKey"></ngc-display>
                    </td>
                    <td>
                      <ngc-display formControlName="moduleCode"></ngc-display>
                    </td>
                    <td>
                      <ngc-display formControlName="processAreaName"></ngc-display>
                    </td>
                    <td>
                      <ngc-display formControlName="processorName"></ngc-display>
                    </td>
                    <td>
                      <ngc-display formControlName="actionType"></ngc-display>
                    </td>
                    <td>
                      <ngc-display formControlName="failureMessage"></ngc-display>
                    </td>
                    <td>
                      <ngc-display formControlName="issueClosed"></ngc-display>
                    </td>
                    <td>
                      <ngc-display formControlName="issueClosedOn"></ngc-display>
                    </td>
                    <td>
                      <ngc-display formControlName="issueClosedBy"></ngc-display>
                    </td>
                    <td>
                      <ng-container *ngIf="item.get('issueClosed').value != 'Success'">
                        <ng-container *ngIf="item.get('showIcon').value">
                          <ngc-icon align="center" type="yesno" formControlName="acknowledge" true-color="grey">
                          </ngc-icon>
                        </ng-container>
                        <ng-container *ngIf="!item.get('showIcon').value">
                          <ngc-checkbox formControlName="acknowledge">
                          </ngc-checkbox>
                        </ng-container>
                      </ng-container>
                    </td>
                  </tr>
                </tbody>
              </ngc-table>
            </ngc-column>
          </ngc-row>
        </ngc-container>

        <ngc-container title="g.info">
          <ngc-row>
            <ngc-column>
              <ngc-table>
                <thead align="left">
                  <tr>
                    <th>
                      <ngc-label label="g.sNo"></ngc-label>
                    </th>
                    <th>
                      <ngc-label label="g.flightKey"></ngc-label>
                    </th>
                    <th>
                      <ngc-label label="warehouse.modulecode"></ngc-label>
                    </th>
                    <th>
                      <ngc-label label="warehouse.process.areaname"></ngc-label>
                    </th>
                    <th>
                      <ngc-label label="warehouse.processorname"></ngc-label>
                    </th>
                    <th>
                      <ngc-label label="warehouse.actiontype"></ngc-label>
                    </th>
                    <th>
                      <ngc-label label="warehouse.failuremessage"></ngc-label>
                    </th>
                    <th>
                      <ngc-label label="g.status"></ngc-label>
                    </th>
                    <th>
                      <ngc-label label="warehouse.closeddate"></ngc-label>
                    </th>
                    <th>
                      <ngc-label label="warehouse.closedby"></ngc-label>
                    </th>
                    <th>
                      <ngc-label label="warehouse.acknowledge"></ngc-label>
                    </th>
                  </tr>
                </thead>
                <!--*ngIf="item.selectCheckbox"-->
                <tbody align="center" formArrayName="shipmentInfoDetails">
                  <tr *ngFor="let item of form.controls.shipmentInfoDetails.controls; let index=index"
                    [formGroupName]="index">
                    <td>
                      <ngc-label label={{index+1}}></ngc-label>
                    </td>
                    <td>
                      <ngc-display formControlName="flightKey"></ngc-display>
                    </td>
                    <td>
                      <ngc-display formControlName="moduleCode"></ngc-display>
                    </td>
                    <td>
                      <ngc-display formControlName="processAreaName"></ngc-display>
                    </td>
                    <td>
                      <ngc-display formControlName="processorName"></ngc-display>
                    </td>
                    <td>
                      <ngc-display formControlName="actionType"></ngc-display>
                    </td>
                    <td>
                      <ngc-display formControlName="failureMessage"></ngc-display>
                    </td>
                    <td>
                      <ngc-display formControlName="issueClosed"></ngc-display>
                    </td>
                    <td>
                      <ngc-display formControlName="issueClosedOn"></ngc-display>
                    </td>
                    <td>
                      <ngc-display formControlName="issueClosedBy"></ngc-display>
                    </td>
                    <td>
                      <ng-container *ngIf="item.get('issueClosed').value != 'Success'">
                        <ng-container *ngIf="item.get('showIcon').value">
                          <ngc-icon align="center" type="yesno" formControlName="acknowledge" true-color="grey">
                          </ngc-icon>
                        </ng-container>
                        <ng-container *ngIf="!item.get('showIcon').value">
                          <ngc-checkbox formControlName="acknowledge">
                          </ngc-checkbox>
                        </ng-container>
                      </ng-container>
                    </td>
                  </tr>
                </tbody>
              </ngc-table>
            </ngc-column>
          </ngc-row>
        </ngc-container>
        <ngc-container title="warehouse.error">
          <ngc-row>
            <ngc-column>
              <ngc-table>
                <thead align="left">
                  <tr>
                    <th>
                      <ngc-label label="g.sNo"></ngc-label>
                    </th>
                    <th>
                      <ngc-label label="g.flightKey"></ngc-label>
                    </th>
                    <th>
                      <ngc-label label="warehouse.modulecode"></ngc-label>
                    </th>
                    <th>
                      <ngc-label label="warehouse.process.areaname"></ngc-label>
                    </th>
                    <th>
                      <ngc-label label="warehouse.processorname"></ngc-label>
                    </th>
                    <th>
                      <ngc-label label="warehouse.actiontype"></ngc-label>
                    </th>
                    <th>
                      <ngc-label label="warehouse.failuremessage"></ngc-label>
                    </th>
                    <th>
                      <ngc-label label="g.status"></ngc-label>
                    </th>
                    <th>
                      <ngc-label label="warehouse.closeddate"></ngc-label>
                    </th>
                    <th>
                      <ngc-label label="warehouse.closedby"></ngc-label>
                    </th>
                  </tr>
                </thead>
                <!--*ngIf="item.selectCheckbox"-->
                <tbody align="center" formArrayName="shipmentErrorDetails">
                  <tr *ngFor="let item of form.controls.shipmentErrorDetails.controls; let index=index"
                    [formGroupName]="index">
                    <td>
                      <ngc-label label={{index+1}}></ngc-label>
                    </td>
                    <td>
                      <ngc-display formControlName="flightKey"></ngc-display>
                    </td>
                    <td>
                      <ngc-display formControlName="moduleCode"></ngc-display>
                    </td>
                    <td>
                      <ngc-display formControlName="processAreaName"></ngc-display>
                    </td>
                    <td>
                      <ngc-display formControlName="processorName"></ngc-display>
                    </td>
                    <td>
                      <ngc-display formControlName="actionType"></ngc-display>
                    </td>
                    <td>
                      <ngc-display formControlName="failureMessage"></ngc-display>
                    </td>
                    <td>
                      <ngc-display formControlName="issueClosed"></ngc-display>
                    </td>
                    <td>
                      <ngc-display formControlName="issueClosedOn"></ngc-display>
                    </td>
                    <td>
                      <ngc-display formControlName="issueClosedBy"></ngc-display>
                    </td>
                  </tr>
                </tbody>
              </ngc-table>
            </ngc-column>
          </ngc-row>
        </ngc-container>
      </ngc-column>
    </ngc-row>
  </ngc-container>
</form>