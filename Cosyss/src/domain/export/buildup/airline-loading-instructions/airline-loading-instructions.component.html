<ngc-titlebar title="expbu.airlineloadinginstr" (save)="onSave($event)" (clear)="onClear($event)"
  (print)="onClickPrint()" (cancel)="onCancel()"></ngc-titlebar>
<form [formGroup]="flightAirlineLoadingInstructionsForm">
  <ngc-container type="section">
    <ngc-row formGroupName="searchFormGroup">
      <ngc-column [column]="1">
        <ngc-label label='expbu.flight'></ngc-label>
        <div>
          <ngc-flightkeyinput accessEnableOn="r" [width]="100" formControlName="flightKey" upperCase="true" required>
          </ngc-flightkeyinput>
        </div>
      </ngc-column>
      <ngc-column [column]="2">
        <ngc-label label='expbu.flightdate'></ngc-label>
        <div>
          <ngc-dateinput accessEnableOn="r" width='110px' formControlName="flightOriginDate"></ngc-dateinput>
        </div>
      </ngc-column>
      <ngc-column align='left'>
        <br>
        <ngc-button accessEnableOn="r" value='g.search' (click)="searchAirlineLoadingInstructions()"></ngc-button>
      </ngc-column>
    </ngc-row>
  </ngc-container>
  <ngc-container type="section" *ngIf="isTableFlag">
    <ngc-row>
      <ngc-column column="2">
        <ngc-label label="expbu.flight"></ngc-label>
        <div>
          <ngc-display formControlName="flightKey"></ngc-display>
        </div>
      </ngc-column>
      <ngc-column column="2">
        <ngc-label label="expbu.flightdate"></ngc-label>
        <div>
          <ngc-display formControlName="flightOriginDate" [onlyDate]="true"></ngc-display>
        </div>
      </ngc-column>
      <ngc-column column="2">
        <ngc-label label="expbu.std"></ngc-label>
        <div>
          <ngc-display formControlName="std" [onlyTime]="true"></ngc-display>
        </div>
      </ngc-column>
      <ngc-column column="2">
        <ngc-label label="expbu.day"></ngc-label>
        <div>
          <ngc-display formControlName="day"></ngc-display>
        </div>
      </ngc-column>
      <ngc-column column="2">
        <ngc-label label="expbu.flightype"></ngc-label>
        <div>
          <ngc-display formControlName="flightType"></ngc-display>
        </div>
      </ngc-column>
      <ngc-column column="2">
        <ngc-label label="expbu.routing"></ngc-label>
        <div>
          <ngc-display formControlName="routing"></ngc-display>
        </div>
      </ngc-column>
    </ngc-row>
  </ngc-container>
  <!-- START -->
  <ngc-container type="tab" *ngIf="isSectionFlag">
    <ngc-row>
      <ngc-column>
        <ngc-label label="ali.allocation.type"></ngc-label>
      </ngc-column>
    </ngc-row>
    <ngc-row>
      <ngc-column>
        <ngc-tabs [activeIndex]="activeByIndex">
          <ngc-tab-card title="ali.tab.title.byDefault">
            <!--old-->
            <ngc-container *ngIf="isSectionFlag" type="box" header="export.airline.loading.instructions">
              <ngc-row>
                <ngc-column [column]="2">
                  <ngc-label label="active"></ngc-label>
                  <div>
                    <ngc-checkbox accessEnableOn="r" formControlName="activeByDefault"
                      (modelChange)="clickActiveDefault($event)"></ngc-checkbox>
                  </div>
                </ngc-column>
                <ngc-column formGroupName="airlineLoadingInstructions">
                  <ngc-label label="expbu.flightuse"></ngc-label>
                  <div>
                    <ngc-numberinput formControlName="palletForFlightUse" digits="3" decimalDigits="0" [width]="50">
                    </ngc-numberinput>
                    <ngc-label label="expbu.p"></ngc-label>
                    &nbsp;
                    <ngc-numberinput formControlName="palletForFlightContainer" digits="3" decimalDigits="0"
                      [width]="50">
                    </ngc-numberinput>
                    <ngc-label label="expbu.a"></ngc-label>
                  </div>
                </ngc-column>
                <ngc-column formGroupName="airlineLoadingInstructions">
                  <ngc-label label="expbu.transituse"></ngc-label>
                  <div>
                    <ngc-numberinput formControlName="palletForTransitUse" digits="3" decimalDigits="0" [width]="50">
                    </ngc-numberinput>
                    <ngc-label label="expbu.p"></ngc-label>
                    &nbsp;
                    <ngc-numberinput formControlName="containerForTransitUse" digits="3" decimalDigits="0" [width]="50">
                    </ngc-numberinput>
                    <ngc-label label="expbu.a"></ngc-label>
                  </div>
                </ngc-column>
                <ngc-column formGroupName="airlineLoadingInstructions">
                  <ngc-label label="expbu.cargouse"></ngc-label>
                  <div>
                    <ngc-numberinput formControlName="palletForCargoUse" digits="3" decimalDigits="0" [width]="50">
                    </ngc-numberinput>
                    <ngc-label label="expbu.p"></ngc-label>
                    &nbsp;
                    <ngc-numberinput formControlName="containerForCargoUse" digits="3" decimalDigits="0" [width]="50">
                    </ngc-numberinput>
                    <ngc-label label="expbu.a"></ngc-label>
                  </div>
                </ngc-column>
                <ngc-column [column]="1" formGroupName="airlineLoadingInstructions">
                  <ngc-label label="expbu.bts"></ngc-label>
                  <div>
                    <ngc-numberinput formControlName="trolleys" digits="3" decimalDigits="0" [width]="50">
                    </ngc-numberinput>
                  </div>
                </ngc-column>
                <ngc-column [column]="1" formGroupName="airlineLoadingInstructions">
                  <ngc-label label="expbu.version"></ngc-label>
                  <div>
                    <ngc-display formControlName="instructionVersion"
                      *ngIf="flightAirlineLoadingInstructionsForm.get(['airlineLoadingInstructions','instructionVersion']).value>0">
                    </ngc-display>
                  </div>
                </ngc-column>
                <ngc-column formGroupName="airlineLoadingInstructions">
                  <ngc-label label="expbu.timestamp"></ngc-label>
                  <div>
                    <ngc-display formControlName="receivedDate"></ngc-display>
                  </div>
                </ngc-column>
              </ngc-row>
              <ngc-row>
                <ngc-column formGroupName="airlineLoadingInstructions">
                  <ngc-label label="expbu.loadinginstr"></ngc-label>
                  <div>
                    <ngc-textarea formControlName="loadingInstruction" height="350px" width="1200px"></ngc-textarea>
                  </div>
                </ngc-column>
              </ngc-row>
              <ngc-row>
              </ngc-row>
              <ngc-row>
                <ngc-column align="right">
                  <ngc-fileupload accept="*/*" entityType="Flight"
                    [entityKey]="flightAirlineLoadingInstructionsForm.get(['airlineLoadingInstructions','flightId']).value"
                    associatedTo="FLIGHTID" stage="Pre-Flight Planning">
                  </ngc-fileupload>
                </ngc-column>
              </ngc-row>
            </ngc-container>
            <!--OLD end-->
          </ngc-tab-card>
          <!--Uld-->
          <ngc-tab-card title="ali.tab.title.byUldType">
            <ngc-container type="box" *ngIf="isSectionFlag">
              <ngc-row>
                <ngc-column [column]="1">
                  <ngc-label label="active"></ngc-label>
                  <div>
                    <ngc-checkbox accessEnableOn="r" formControlName="activeByULD"
                      (modelChange)="clickActiveULD($event)">
                    </ngc-checkbox>
                  </div>
                </ngc-column>
                <ngc-column [column]="2" formGroupName="uldTypeAirlineLoadingInstr">
                  <ngc-table>
                    <thead>
                      <tr>
                        <th>
                          <ngc-label label="uld.uldtype"></ngc-label>
                        </th>
                        <th>
                          <ngc-label label="event.count"></ngc-label>
                        </th>
                        <th>
                          <ngc-label label="ad.delete"></ngc-label>
                        </th>
                      </tr>
                    </thead>
                    <ng-container
                      *ngFor="let item of flightAirlineLoadingInstructionsForm.get('uldTypeAirlineLoadingInstr').controls; let index=index"
                      [formGroupName]="index">
                      <tr>
                        <td>
                          <ngc-dropdownlist [width]="40" formControlName="uldType" sourceId='ULD_TYPE'
                            sourceType='query'>
                          </ngc-dropdownlist>
                        </td>
                        <td>
                          <ngc-numberinput formControlName="countUldType" digits="3" decimalDigits="0" [width]="40">
                          </ngc-numberinput>
                        </td>
                        <td>
                          <ngc-link (linkClick)="onDeleteULDType(index)" iconType="delete">
                          </ngc-link>
                        </td>
                      </tr>
                    </ng-container>
                  </ngc-table>
                </ngc-column>
                <ngc-column [column]="1">
                </ngc-column>
                <ngc-column>
                  <ngc-button (click)="onAddULDType()" label="g._add">
                  </ngc-button>
                </ngc-column>
              </ngc-row>
            </ngc-container>
          </ngc-tab-card>
          <!--  height -->
          <ngc-tab-card title="ali.tab.title.byHeightCode">
            <ngc-container type="box" *ngIf="isSectionFlag">
              <ngc-row>
                <ngc-column [column]="1">
                  <ngc-label label="active"></ngc-label>
                  <div>
                    <ngc-checkbox accessEnableOn="r" formControlName="activeByHeight"
                      (modelChange)="clickActiveHeight($event)"></ngc-checkbox>
                  </div>
                </ngc-column>
                <ngc-column [column]="2" formGroupName="heightCodeAirlineLoadingInstr">
                  <ngc-table>
                    <thead>
                      <tr>
                        <th>
                          <ngc-label label="uld.heightcode"></ngc-label>
                        </th>
                        <th>
                          <ngc-label label="event.count"></ngc-label>
                        </th>
                        <th>
                          <ngc-label label="ad.delete"></ngc-label>
                        </th>
                      </tr>
                    </thead>
                    <ng-container
                      *ngFor="let item of flightAirlineLoadingInstructionsForm.get('heightCodeAirlineLoadingInstr').controls; let index=index"
                      [formGroupName]="index">
                      <tr>
                        <td>
                          <ngc-dropdownlist [width]="40" formControlName="contourCode" sourceId='CONTOURCODE'
                            sourceType='query'>
                          </ngc-dropdownlist>
                        </td>
                        <td>
                          <ngc-numberinput formControlName="countContour" digits="3" decimalDigits="0" [width]="40">
                          </ngc-numberinput>
                        </td>
                        <td>
                          <ngc-link (linkClick)="onDeleteByheight(index)" iconType="delete">
                          </ngc-link>
                        </td>
                      </tr>
                    </ng-container>

                  </ngc-table>
                </ngc-column>
                <ngc-column [column]="1">
                </ngc-column>
                <ngc-column>
                  <ngc-button (click)="onAddByHeight()" label="g._add">
                  </ngc-button>
                </ngc-column>
              </ngc-row>
            </ngc-container>
          </ngc-tab-card>
          <!--Allotment-->
          <ngc-tab-card title="ali.tab.title.byAllotment">
            <ngc-container type="box" *ngIf="isSectionFlag">
              <ngc-row>
                <ngc-column [column]="1">
                  <ngc-label label="active"></ngc-label>
                  <div>
                    <ngc-checkbox accessEnableOn="r" formControlName="activeByAllotment"
                      (modelChange)="clickActiveAllotment($event)"></ngc-checkbox>
                  </div>
                </ngc-column>
                <ngc-column [column]="2" formGroupName="uldAllotmentInstr">
                  <ngc-table>
                    <thead>
                      <tr>
                        <th>
                          <ngc-label label="ali.allotment"></ngc-label>
                        </th>
                        <th>
                          <ngc-label label="event.count"></ngc-label>
                        </th>
                      </tr>
                    </thead>
                    <ng-container *ngFor="let item of flightAirlineLoadingInstructionsForm.get('uldAllotmentInstr').controls; let
                      index=index" [formGroupName]="index">
                      <tr>
                        <td>
                          <ngc-display formControlName="uldAllotment">
                          </ngc-display>
                        </td>
                        <td>
                          <ngc-numberinput formControlName="countAllotment" digits="3" decimalDigits="0" [width]="40">
                          </ngc-numberinput>
                        </td>
                      </tr>
                    </ng-container>
                  </ngc-table>
                </ngc-column>
                <ngc-column [column]="9">
                </ngc-column>
              </ngc-row>
            </ngc-container>
          </ngc-tab-card>
        </ngc-tabs>
      </ngc-column>
    </ngc-row>
  </ngc-container>
  <!-- END-->

  <ngc-report  #reportWindow title="g.report"  reportId='AirlineLoadingInstructions'
     [reportParameters]='reportParameters'></ngc-report>

  <ngc-report  #reportWindowUld title="g.report"  reportId='AirlineLoadingInstructionUldType'
     [reportParameters]='reportParameters'></ngc-report>

  <ngc-report  #reportWindowHeight title="g.report"  reportId='AirlineLoadingInstructionHeightType'
     [reportParameters]='reportParameters'></ngc-report>

  <ngc-report  #reportWindowAllotment title="g.report"  reportId='AirlineLoadingInstructionAllotmentType'
     [reportParameters]='reportParameters'></ngc-report>
</form>
<ngc-footer *ngIf="isTableFlag">
  <ngc-row>
    <ngc-column>
      <ngc-button label="ali.ecc" (click)='onClickFlightPlanner()'> </ngc-button>
    </ngc-column>
  </ngc-row>
</ngc-footer>