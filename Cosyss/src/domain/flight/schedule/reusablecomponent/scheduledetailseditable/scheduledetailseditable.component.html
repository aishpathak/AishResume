<form [formGroup]="form">
    <ngc-container type="header">
        <ngc-row>
            <ngc-column>
                <ngc-label emphasis="lg" label="flight.flightScheduleDetails"></ngc-label>
                <ngc-label emphasis="lg" label="{{(index+1)}}"></ngc-label>
            </ngc-column>
            <ngc-column align="right">
                <ngc-icon type="delete" value="true" true-color="grey" (click)="deleteSchedule()"></ngc-icon>
            </ngc-column>
        </ngc-row>
    </ngc-container>
    <ngc-container type="tab">
        <ngc-row>
            <ngc-column column="6">
                <ngc-container>
                    <ngc-row>
                        <ngc-column>
                            <ngc-label value="flight.flightFreq"></ngc-label>
                        </ngc-column>
                    </ngc-row>
                    <ngc-row>
                        <ngc-column>
                            <ngc-checkbox formControlName="isAll" [disabled]="isAllDisabled">
                                <ngc-label label="flight.all"></ngc-label>
                            </ngc-checkbox>
                        </ngc-column>
                        <ngc-column>
                            <ngc-checkbox formControlName="monFlg" [disabled]="monFlgDisabled">
                                <ngc-label label="flight.mon"></ngc-label>
                            </ngc-checkbox>
                        </ngc-column>
                        <ngc-column>
                            <ngc-checkbox formControlName="tueFlg" [disabled]="tueFlgDisabled">
                                <ngc-label label="flight.tue"></ngc-label>
                            </ngc-checkbox>
                        </ngc-column>
                        <ngc-column>
                            <ngc-checkbox formControlName="wedFlg" [disabled]="wedFlgDisabled">
                                <ngc-label label="flight.wed"></ngc-label>
                            </ngc-checkbox>
                        </ngc-column>
                        <ngc-column>
                            <ngc-checkbox formControlName="thurFlg" [disabled]="thurFlgDisabled">
                                <ngc-label label="flight.thu"></ngc-label>
                            </ngc-checkbox>
                        </ngc-column>
                        <ngc-column>
                            <ngc-checkbox formControlName="friFlg" [disabled]="friFlgDisabled">
                                <ngc-label label="flight.fri"></ngc-label>
                            </ngc-checkbox>
                        </ngc-column>
                        <ngc-column>
                            <ngc-checkbox formControlName="satFlg" [disabled]="satFlgDisabled">
                                <ngc-label label="flight.sat"></ngc-label>
                            </ngc-checkbox>
                        </ngc-column>
                        <ngc-column>
                            <ngc-checkbox formControlName="sunFlg" [disabled]="sunFlgDisabled">
                                <ngc-label label="flight.sun"></ngc-label>
                            </ngc-checkbox>
                        </ngc-column>
                        <!--</div>
       <div class="form-group d-flex flex-row"> -->
                    </ngc-row>
                </ngc-container>
            </ngc-column>
            <ngc-column column="1">

            </ngc-column>
            <ngc-column column="5">
                <ngc-container>
                    <ngc-row>
                        <ngc-column column="3">
                            <ngc-label label="flight.serviceType"></ngc-label>
                            <div>
                                <ngc-lov formControlName="flightServiceType" sourceId="SVC" [width]="45"
                                    title="flight.serviceType" dataField="code" displayMember="code"
                                    (select)="onSelectServiceType($event)" required>
                                    <ngc-data-column text="flight.service.code" dataField="code" [width]="100">
                                    </ngc-data-column>
                                    <ngc-data-column text="g.description" dataField="desc" [width]="150">
                                    </ngc-data-column>
                                    <ngc-data-column text="flight.paxCao" dataField="param1" [width]="150">
                                    </ngc-data-column>
                                </ngc-lov>
                            </div>
                        </ngc-column>
                        <ngc-column column="4">
                            <ngc-label label="g.description"></ngc-label>
                            <div>
                                <ngc-display formControlName="description"></ngc-display>
                            </div>
                        </ngc-column>

                        <ngc-column column="2">
                            <ngc-label label="flight.paxCao"></ngc-label>
                            <div>
                                <ngc-display formControlName="flightType"></ngc-display>
                            </div>
                        </ngc-column>

                        <ngc-column column="2">
                            <ngc-label label="flight.jointFlight"></ngc-label>
                            <div>
                                <ngc-checkbox formControlName="joint"></ngc-checkbox>
                            </div>
                        </ngc-column>
                        <ngc-column column="1" align="center">
                            <ngc-label label="flight.ssm"></ngc-label>
                            <div>
                                <ngc-display formControlName="ssmFlag"></ngc-display>
                            </div>
                        </ngc-column>
                    </ngc-row>
                </ngc-container>
            </ngc-column>
        </ngc-row>
        <ngc-row>
            <ngc-column>
                <hr />
            </ngc-column>
        </ngc-row>
        <ngc-row *ngIf="form.controls.schFlightLegs.length">
            <ngc-column>
                <ngc-container>
                    <ngc-row>
                        <ngc-column>
                            <ngc-label label="flight.flightLegsTitle"></ngc-label>
                        </ngc-column>
                    </ngc-row>
                    <!-- <ngc-container type="header" *ngIf="form.controls.schFlightLegs.length" title="flight.flightLegs"> -->
                    <ngc-row>
                        <ngc-column>
                            <ngc-table column="6">
                                <thead>
                                    <tr>
                                        <th>
                                            <ngc-label label="flight.aircraft"></ngc-label>
                                        </th>
                                        <th>
                                            <ngc-label label="flight.boardPoint"></ngc-label>
                                        </th>
                                        <th>
                                            <ngc-label label="flight.offPoint"></ngc-label>
                                        </th>
                                        <th>
                                            <ngc-label label="flight.departureTime"></ngc-label>
                                        </th>
                                        <th>
                                            <ngc-label label="flight.dayChange"></ngc-label>
                                        </th>
                                        <th>
                                            <ngc-label label="flight.arrivalTime"></ngc-label>
                                        </th>
                                        <th>
                                            <ngc-label label="flight.dayChange"></ngc-label>
                                        </th>
                                        <th>
                                            <ngc-label label="flight.domesticLeg"></ngc-label>
                                        </th>
                                        <th entityAttribute="Flight.BuBdOffice">
                                            <ngc-label label="flight.bu/bdOffice" entityAttribute="Flight.BuBdOffice">
                                            </ngc-label>
                                        </th>
                                        <th entityAttribute="Flight.WarehouseLevel">
                                            <ngc-label label=" flight.whLevel" entityAttribute="Flight.WarehouseLevel">
                                            </ngc-label>
                                        </th>
                                        <th entityAttribute="Flight.RHO">
                                            <ngc-label label="flight.rho" entityAttribute="Flight.RHO">
                                            </ngc-label>
                                        </th>
                                        <th>
                                            <ngc-label label=""></ngc-label>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody ngc-form-array formArrayName="schFlightLegs">
                                    <tr ngc-form-group
                                        *ngFor="let item of form.controls.schFlightLegs.controls; let index=index"
                                        [formGroupName]="index">
                                        <td>
                                            <ngc-lov formControlName="aircraftType" [width]="60" upperCase="true"
                                                [dropDownWidth]="60" sourceId="AIR" dataField="code"
                                                displayMember="code" title="flight.aircraft"
                                                (select)="onSelectAircraftType($event,item,index)" required>
                                                <ngc-data-column text="flight.aircraftCode" dataField="code"
                                                    [width]="100">
                                                </ngc-data-column>
                                                <ngc-data-column text="flight.aircraftName" dataField="desc"
                                                    [width]="150">
                                                </ngc-data-column>
                                            </ngc-lov>
                                        </td>
                                        <td>
                                            <ngc-lov formControlName="brdPt" [width]="60" upperCase="true"
                                                [dropDownWidth]="60" sourceId="FLIGHT_AIRPORT" title="flight.airport"
                                                displayMember="code" dataField="code"
                                                (select)="onSelectCarrier($event,item,index)" required>
                                                <ngc-data-column text="flight.airportCode" dataField="code"
                                                    [width]="100">
                                                </ngc-data-column>
                                                <ngc-data-column text="flight.airportName" dataField="desc"
                                                    [width]="150">
                                                </ngc-data-column>
                                            </ngc-lov>
                                        </td>
                                        <td>
                                            <ngc-lov formControlName="offPt" sourceId="FLIGHT_AIRPORT" [width]="60"
                                                upperCase="true" [dropDownWidth]="60" title="flight.airport"
                                                displayMember="code" dataField="code"
                                                (select)="onSelectCarrierOffPnt($event,item,index)" required>
                                                <ngc-data-column text="flight.airportCode" dataField="code"
                                                    [width]="100">
                                                </ngc-data-column>
                                                <ngc-data-column text="flight.airportName" dataField="desc"
                                                    [width]="150">
                                                </ngc-data-column>
                                            </ngc-lov>
                                        </td>
                                        <td>
                                            <ngc-timeinput [width]="70" formControlName="depTime" dataType="string"
                                                (ngModelChange)="getRHO(index)" required></ngc-timeinput>

                                            <!-- <ngc-input [width]="60" formControlName="depTime" required></ngc-input> -->
                                        </td>
                                        <td>
                                            <ngc-input #id1 [width]="30" formControlName="dayChangeDep"
                                                pattern="^[0-9]*$" maxlength="1" required></ngc-input>
                                        </td>
                                        <td>
                                            <ngc-timeinput [width]="70" formControlName="arrTime" dataType="string"
                                                (ngModelChange)="getRHO(index)" required></ngc-timeinput>
                                            <!--<ngc-datetimeinput [width]="70" formControlName="arrTime" [showTimeButton]="true" [showCalendarButton]="false" required></ngc-datetimeinput>-->
                                            <!-- <ngc-input [width]="60" formControlName="arrTime" required></ngc-input> -->
                                        </td>
                                        <td>
                                            <ngc-input [width]="30" formControlName="dayChangeArr" pattern="^[0-9]*$"
                                                maxlength="1" required></ngc-input>
                                        </td>
                                        <td>
                                            <ngc-checkbox formControlName="domesticLeg" [disabled]="true">
                                            </ngc-checkbox>
                                        </td>

                                        <td entityAttribute="Flight.BuBdOffice" [skipEntityAttribute]="['required']">
                                            <ngc-dropdownlist formControlName="bubdOffice" accessEnableOn="r"
                                                sourceId="Flight$BuBdOffice" [width]="150"
                                                entityAttribute="Flight.BuBdOffice"
                                                [skipEntityAttribute]="['required']">
                                            </ngc-dropdownlist>
                                        </td>

                                        <td entityAttribute="Flight.WarehouseLevel">
                                            <ngc-dropdownlist formControlName="warehouseLevel" accessEnableOn="r"
                                                sourceId="Flight$WarehouseLevel" [width]="130"
                                                entityAttribute="Flight.WarehouseLevel">
                                            </ngc-dropdownlist>
                                        </td>

                                        <td entityAttribute="Flight.RHO" [skipEntityAttribute]="['required']">
                                            <ngc-lov sourceType='query' [width]="150" upperCase="true" noCache="true"
                                                sourceId="SERVICE_PROVIDER_TYPE_LOV" [sourceParameters]="rhoParam"
                                                title='RHO' dataField="param1" displayField="desc" accessEnableOn="r"
                                                formControlName="rho" entityAttribute="Flight.RHO"
                                                [skipEntityAttribute]="['required']">
                                                <ngc-data-column text="g.customerCode" dataField="code" [width]="100">
                                                </ngc-data-column>
                                                <ngc-data-column text="g.customerName" dataField="desc" [width]="150">
                                                </ngc-data-column>
                                            </ngc-lov>
                                        </td>

                                        <td class="text-center">
                                            <ngc-link (linkClick)="deleteLeg(index)"
                                                [disabled]="form.controls.schFlightLegs.length - 1 !== index"
                                                iconType="delete">
                                                <ngc-i18n value="g.delete"></ngc-i18n>
                                            </ngc-link>
                                        </td>
                                    </tr>
                                </tbody>
                            </ngc-table>
                        </ngc-column>
                    </ngc-row>
                    <ngc-row>
                        <ngc-column>
                            <ngc-button (click)="addLeg()" value="g.addRow"></ngc-button>
                        </ngc-column>
                    </ngc-row>
                </ngc-container>
                <!-- </ngc-container> -->
            </ngc-column>
        </ngc-row>

        <ngc-row *ngIf="form.controls.schFlightSegments.length">
            <ngc-column>
                <ngc-container>
                    <ngc-row>
                        <ngc-column>
                            <ngc-label label="flight.segmentTitle"></ngc-label>
                        </ngc-column>
                    </ngc-row>
                    <!-- <ngc-container type="header" *ngIf="form.controls.schFlightSegments.length" title="flight.segment"> -->
                    <ngc-row>
                        <ngc-column>
                            <ngc-table>
                                <thead>
                                    <tr>
                                        <th>
                                            <ngc-label label="flight.sNo"></ngc-label>
                                        </th>
                                        <th>
                                            <ngc-label label="flight.boardPoint"></ngc-label>
                                        </th>
                                        <th>
                                            <ngc-label label="flight.offPoint"></ngc-label>
                                        </th>
                                        <th>
                                            <ngc-label label="flight.freightNA"></ngc-label>
                                        </th>
                                        <th>
                                            <ngc-label label="flight.technicalStop"></ngc-label>
                                        </th>
                                        <!-- <th>
                                            <ngc-label label="flight.noCargo"></ngc-label>
                                        </th> -->
                                        <th>
                                            <ngc-label label="flight.noMail"></ngc-label>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody ngc-form-array formArrayName="schFlightSegments">
                                    <tr ngc-form-group
                                        *ngFor="let item of form.controls.schFlightSegments.controls; let index=index"
                                        [formGroupName]="index">
                                        <td>
                                            <ngc-display value="1" [i18n]="true" formControlName="codSegOrder">
                                            </ngc-display>
                                        </td>
                                        <td>
                                            <ngc-display value="flight.airportCode" [i18n]="true"
                                                formControlName="brdPt">
                                            </ngc-display>
                                        </td>
                                        <td>
                                            <ngc-display value="flight.fra" [i18n]="true" formControlName="offPt">
                                            </ngc-display>
                                        </td>
                                        <td>
                                            <ngc-checkbox formControlName="freightNA"></ngc-checkbox>
                                        </td>
                                        <td>
                                            <ngc-checkbox formControlName="techStop"></ngc-checkbox>
                                        </td>
                                        <!-- <td>
                                            <ngc-checkbox formControlName="noCargo"></ngc-checkbox>
                                        </td> -->
                                        <td>
                                            <ngc-checkbox formControlName="noMail"></ngc-checkbox>
                                        </td>
                                    </tr>
                                </tbody>
                            </ngc-table>
                        </ngc-column>
                    </ngc-row>
                </ngc-container>
            </ngc-column>
        </ngc-row>
        <ngc-row>
            <ngc-column>
                <hr />
            </ngc-column>
        </ngc-row>
        <ngc-row *ngIf="showJointFlight">
            <ngc-column>
                <ngc-container>
                    <ngc-row>
                        <ngc-column>
                            <ngc-label label="flight.jointFlightTitle"></ngc-label>
                        </ngc-column>
                    </ngc-row>
                    <!-- <ngc-container type="header" *ngIf="showJointFlight" title="flight.jointFlight">
          <ngc-label label="flight.jointFlight"></ngc-label> -->
                    <ngc-row>
                        <ngc-column>
                            <ngc-table>
                                <thead>
                                    <tr>
                                        <th>
                                            <ngc-label label="g.flight"></ngc-label>
                                        </th>
                                        <th>
                                            <ngc-label label="g.name"></ngc-label>
                                        </th>
                                        <th>
                                            <ngc-label label=""></ngc-label>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody ngc-form-array formArrayName="schFlightJointList">
                                    <tr ngc-form-group
                                        *ngFor="let item of form.controls.schFlightJointList.controls; let index=index"
                                        [formGroupName]="index">
                                        <td>
                                            <!-- JOINT_FLIGHT_SCHEDULE -->
                                            <ngc-lov formControlName="jointFlightKey" upperCase="true"
                                                sourceId="JOINT_FLIGHT_SCHEDULE" [noCache]="true" displayMember="code"
                                                [width]="80" title="flight.jointFlightTitle" dataField="code"
                                                (select)="onChangeOfJointFLight($event,item)" required>
                                                <ngc-data-column text="g.flight" dataField="code" [width]="100">
                                                </ngc-data-column>
                                                <ngc-data-column text="g.name" dataField="desc" [width]="150">
                                                </ngc-data-column>
                                            </ngc-lov>
                                            <!-- <ngc-input [width]="150" formControlName="jointFlightKey"></ngc-input> -->
                                        </td>
                                        <td>
                                            <ngc-display formControlName="jointFlightName"></ngc-display>
                                        </td>
                                        <td class="text-center">
                                            <ngc-link (linkClick)="deleteJointFlight(index)"
                                                [disabled]="form.controls.schFlightJointList.length - 1 !== index"
                                                iconType="delete">
                                                <ngc-i18n value="g.delete"></ngc-i18n>
                                            </ngc-link>
                                        </td>
                                    </tr>
                                </tbody>
                            </ngc-table>
                        </ngc-column>
                        <ngc-column column="5"></ngc-column>
                    </ngc-row>
                    <ngc-row>
                        <ngc-column>
                            <ngc-button (click)="addJointFlight()" value="g.addRow"></ngc-button>
                        </ngc-column>
                    </ngc-row>
                </ngc-container>
                <hr />
            </ngc-column>
        </ngc-row>

        <ngc-row>
            <ngc-column>
                <ngc-container>
                    <ngc-row>
                        <ngc-column>
                            <ngc-label label="flight.factTitle"></ngc-label>
                        </ngc-column>
                    </ngc-row>
                    <ngc-row>
                        <ngc-column>
                            <ngc-table>
                                <thead>
                                    <tr>
                                        <th>
                                            <ngc-label label="flight.fact"></ngc-label>
                                        </th>
                                        <th>
                                            <ngc-label label=""></ngc-label>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody ngc-form-array formArrayName="factList">
                                    <tr ngc-form-group
                                        *ngFor="let item of form.controls.factList.controls; let index=index"
                                        [formGroupName]="index">
                                        <td>
                                            <ngc-input [width]="900" upperCase="true" formControlName="fact"
                                                [maxlength]="65"></ngc-input>
                                        </td>
                                        <td class="text-center">
                                            <ngc-link (linkClick)="deleteFact(index)" iconType="delete">
                                                <ngc-i18n value="g.delete"></ngc-i18n>
                                            </ngc-link>
                                        </td>
                                    </tr>
                                </tbody>
                            </ngc-table>
                        </ngc-column>
                    </ngc-row>
                    <ngc-row>
                        <ngc-column>
                            <ngc-button (click)="addFact(index)" value="g.addRow"></ngc-button>
                        </ngc-column>
                    </ngc-row>
                </ngc-container>
            </ngc-column>
        </ngc-row>
    </ngc-container>
</form>