<form [formGroup]="uldInventoryDetailsform">
  <!-- Title Bar -->
  <ngc-titlebar (cancel)="onCancel($event)" title='uld.uldinventorydetails' (clear)="onClear($event)">
  </ngc-titlebar>
  <ngc-container type="sectiontop">
    <ngc-row>
      <ngc-column>
        <ngc-label label='uld.carrier'></ngc-label>
        <!--LOV to select Carrier Code-->
        <div>
          <ngc-lov formControlName="carrierCode" sourceId='CARRIER' title='uld.carrier.type'
            dataField='code' width='70px' upperCase='true' (select)="onSelectCarrier($event)" displayMember="code"
             [dropDownWidth]='60'>
            <ngc-data-column text="uld.carrier" dataField="code" [width]="100"></ngc-data-column>
            <ngc-data-column text="uld.description" dataField="desc" [width]="150"></ngc-data-column>
          </ngc-lov>
        </div>
      </ngc-column>
      <ngc-column>
        <ngc-label label="exp.carrier.group"></ngc-label>
        <div>
          <ngc-lov formControlName="carrierGroup" sourceId="CARRIER_GROUP" title='g.airline' displayMember="code"
            dataField='code' [width]="80" uppercase='true'>
            <ngc-data-column text="g.carrier" dataField="code" [width]="50"></ngc-data-column>
            <ngc-data-column text="g.description" dataField="desc" [width]="100"></ngc-data-column>
          </ngc-lov>
        </div>
      </ngc-column>
      <!-- LOV end-->
      <ngc-column>
        <ngc-label label='imp.uld.grp'></ngc-label>
        <!--Lov to select UldGroup-->
        <div>
          <ngc-lov accessEnableOn="r" formControlName="uldGroup" sourceId='ULDGROUP' title='imp.uld.grp'
            dataField='code' width='70px' upperCase='true' (select)="onSelectUldGroup($event)" displayMember="code"
             [dropDownWidth]='60'>
            <ngc-data-column text="imp.uld.grp" dataField="code" [width]="100"></ngc-data-column>
            <ngc-data-column text="uld.uld.description" dataField="desc" [width]="150"></ngc-data-column>
          </ngc-lov>
        </div>
      </ngc-column>
      <ngc-column>
        <ngc-label label='uld.uldtype'></ngc-label>
        <!--Lov to select UldType-->
        <div>
          <ngc-lov accessEnableOn="r" formControlName="uldType" sourceId='ULDTYPE' title='uld.uld.type' dataField='code'
            width='70px' upperCase='true' (select)="onSelectUldType($event)" displayMember="code"  [dropDownWidth]='60'>
            <ngc-data-column text="uld.uld.type" dataField="code" [width]="100"></ngc-data-column>
            <ngc-data-column text="uld.uld.description" dataField="desc" [width]="150"></ngc-data-column>
          </ngc-lov>
        </div>
        <!--LOV end-->
      </ngc-column>
      <ngc-column>
        <ngc-label label='loadshipment.label.contour.code'></ngc-label>
        <div>
          <ngc-lov [noList]="true" formControlName="heightCode"
                (ngModelChange)="addContourCode($event, index,item.get('flagCRUD').value)"
                sourceId='LOV_CONTOURCODE' title='uld.heightcode' [width]="60" dataField='code'>
               <ngc-data-column text="uld.heightcode" dataField="code" [width]="80"></ngc-data-column>
          </ngc-lov>         
        </div>
      </ngc-column>
      <!-- dropDown list to select the Uld Location,Condition type,OwnerShip, AWBLoaded, MovementType, Warehouse Destination and Warehouse Location-->
      <ngc-column>
        <ngc-label label='uld.location'></ngc-label>
        <div>
          <ngc-dropdownlist accessEnableOn="r" sourceId="ULD$INV_LOC" [width]="130" [dropDownWidth]="130"
            formControlName="location">
          </ngc-dropdownlist>
        </div>
      </ngc-column>
      <ngc-column>
        <ngc-label label='uld.ownership'></ngc-label>
        <div>
          <ngc-dropdownlist accessEnableOn="r" sourceId="ULD$INV_OWNERSHIP" [width]="130" [dropDownWidth]="130"
            formControlName="ownership" [all]='false' [noBlank]="false"></ngc-dropdownlist>
        </div>
      </ngc-column>
      <ngc-column>
        <ngc-label label='uld.awbloaded'></ngc-label>
        <div>
          <ngc-dropdownlist accessEnableOn="r" sourceId="General$YesNoFlag" [width]="130" [dropDownWidth]="130"
            formControlName="awbLoaded"></ngc-dropdownlist>
        </div>
      </ngc-column>

      <ngc-column>
        <ngc-label value='uld.conditiontype'></ngc-label>
        <div>
          <ngc-dropdownlist accessEnableOn="r" sourceId="ULD$INV_CONDITION_TYPE" [width]="130" [dropDownWidth]="130"
            formControlName="conditionType" [all]='false' [noBlank]="false"></ngc-dropdownlist>
        </div>
      </ngc-column>
      <ngc-column>
        <ngc-label label='uld.contentcode'></ngc-label>
        <!--Lov to select UldType-->
        <div>
          <ngc-lov accessEnableOn="r" formControlName="contentCode" sourceId='CONTENTCODE' title='uld.content.code' dataField='code'
            width='70px' upperCase='true' (select)="onSelectContentCode($event)" displayMember="code"  [dropDownWidth]='60'>
            <ngc-data-column text="uld.content.code" dataField="code" [width]="100"></ngc-data-column>
            <ngc-data-column text="uld.content.description" dataField="desc" [width]="150"></ngc-data-column>
          </ngc-lov>
        </div>
        <!--LOV end-->
      </ngc-column>
      <ngc-column>
        <ngc-label label='uld.movement.type'></ngc-label>
        <div>
          <ngc-dropdownlist [width]="240" [multiSelect]="true" accessEnableOn="r" [autoSelect]="true"
            sourceId="MOVEMENTTYPEDROPDOWN" [dropDownWidth]="220" sourceType='query' formControlName="selectmovement">
          </ngc-dropdownlist>
        </div>
      </ngc-column>

    </ngc-row>
  </ngc-container>
  <ngc-container type="section">
    <ngc-row>
      <ngc-column>
        <ngc-label label='uld.destinationWhLocation'></ngc-label>
        <div>
          <ngc-locations-list [displayOnlyLocation]="true" [width]="120" formControlName="destinationWhLocation"
            (select)="onLocationChange($event , index)">
          </ngc-locations-list>
        </div>
      </ngc-column>
      <ngc-column>
        <ngc-label label='uld.warehouselocation'></ngc-label>
        <ngc-locations-list [displayOnlyLocation]="true" [width]="120" [sectorId]="sectorId"
          formControlName="warehouseActualLocation">
        </ngc-locations-list>
      </ngc-column>
      <ngc-column column="8">
        <div>
          <ngc-container type="squarethin" title='uld.status'>
            <ngc-row>
              <ngc-column column="2">
                <ngc-checkbox formControlName="unConfirmed" accessEnableOn="r">
                  <ngc-label label="uld.unconfirmed"></ngc-label>
                </ngc-checkbox>
              </ngc-column>
              <ngc-column column="2">
                <ngc-checkbox formControlName="unReserved">
                  <ngc-label label="uld.unreserved"></ngc-label>
                </ngc-checkbox>
              </ngc-column>
              <ngc-column column="2">
                <ngc-checkbox formControlName="ppkLoaded">
                  <ngc-label label="uld.exportprepack"></ngc-label>
                </ngc-checkbox>
              </ngc-column>
              <ngc-column column="2">
                <ngc-checkbox formControlName="mixLoaded">
                  <ngc-label label="uld.mixprepack"></ngc-label>
                </ngc-checkbox>
              </ngc-column>
              <ngc-column column="2">
                <ngc-checkbox formControlName="missing">
                  <ngc-label label="uld.missing"></ngc-label>
                </ngc-checkbox>
              </ngc-column>
              <ngc-column column="2">
                <ngc-checkbox formControlName="onHand">
                  <ngc-label label="uld.onhand"></ngc-label>
                </ngc-checkbox>
              </ngc-column>
            </ngc-row>
          </ngc-container>
        </div>
      </ngc-column>
      <ngc-column [column]="1">
        <ngc-label label=''></ngc-label>
        <div>
          <ngc-button #searchButton  accessEnableOn="r" (click)="getUldList()" value="g.search" iconType="search">
          </ngc-button>
        </div>
      </ngc-column>
      <ngc-column [column]="1">
        <ngc-label label=''></ngc-label>
        <div>
          <ngc-button [disabled]="!showTable" accessEnableOn="r" (click)='exportToExcel()' style="float:right;"
            value="export.excel">
          </ngc-button>
        </div>
      </ngc-column>
    </ngc-row>
  </ngc-container>
  <ngc-container>
    <ngc-row>
      <ngc-column *ngIf="uldInventoryDetailsform.controls.carrierName.value">
        <ngc-label label='uld.carrier'></ngc-label>
        <div>
          <ngc-display class='text-uppercase' formControlName="carrierName"></ngc-display>
        </div>
      </ngc-column>
      <ngc-column *ngIf="uldInventoryDetailsform.controls.uldName.value">
        <ngc-label label='uld.ulddesp'></ngc-label>
        <div>
          <ngc-display class='text-uppercase' formControlName="uldName"></ngc-display>
        </div>
      </ngc-column>
      <ngc-column *ngIf="uldInventoryDetailsform.controls.totalUld.value" align="center">
        <ngc-label label='uld.display/totaluld'></ngc-label>
        <div>
          <ngc-display class='text-uppercase' formControlName="uldCount"></ngc-display>
          {{uldInventoryDetailsform.controls.totalUld?'/':''}}
          <ngc-display class='text-uppercase' formControlName="totalUld"></ngc-display>
        </div>
      </ngc-column>
      <ngc-column *ngIf="uldInventoryDetailsform.controls.uldCount.value" align="center">
        <ngc-label label='uld.cargoULD'></ngc-label>
        <div>
          <ngc-display class='text-uppercase' formControlName="cargoULDCount"></ngc-display>
          {{uldInventoryDetailsform.controls.uldCount?'/':''}}
          <ngc-display class='text-uppercase' formControlName="uldCount"></ngc-display>
        </div>
      </ngc-column>
      <ngc-column *ngIf="uldInventoryDetailsform.controls.uldCount.value" align="center">
        <ngc-label label='uld.apronULD'></ngc-label>
        <div>
          <ngc-display class='text-uppercase' formControlName="apronULDCount"></ngc-display>
          {{uldInventoryDetailsform.controls.uldCount?'/':''}}
          <ngc-display class='text-uppercase' formControlName="uldCount"></ngc-display>
        </div>
      </ngc-column>
      <ngc-column *ngIf="uldInventoryDetailsform.controls.uldCount.value" align="center">
        <ngc-label label='uld.agentULD'></ngc-label>
        <div>
          <ngc-display class='text-uppercase' formControlName="agentULDCount"></ngc-display>
          {{uldInventoryDetailsform.controls.uldCount?'/':''}}
          <ngc-display class='text-uppercase' formControlName="uldCount"></ngc-display>
        </div>
      </ngc-column>
      <ngc-column *ngIf="uldInventoryDetailsform.controls.uldCount.value" align="center">
        <ngc-label label='uld.emptyULD'></ngc-label>
        <div>
          <ngc-display class='text-uppercase' formControlName="emptyULDCount"></ngc-display>
          {{uldInventoryDetailsform.controls.uldCount?'/':''}}
          <ngc-display class='text-uppercase' formControlName="uldCount"></ngc-display>
        </div>
      </ngc-column>
      <ngc-column column="4"></ngc-column>
    </ngc-row>
  </ngc-container>
  <ngc-container *ngIf="showTable" type="tab">
    <ngc-row>
      <ngc-column>
        <!--ngc table to diaplay ULD Inventory List Details-->
        <ngc-datatable formArrayName="uldInventoryList" (linkClick)="onLinkClick($event)" [pageable]="true"
          [enablePageSizeHeight]="false" [showToolbar]="true" [showPrint]="false" [showXLS]="false" [showPDF]="false"
          [showCSV]="false">
          <ngc-data-column text="uld.s.n" on dataField="serialNumber" [width]="70" align="left">
          </ngc-data-column>
          <ngc-data-column type="link" text="uld.uldnumber" dataField="uldNumber" [width]="130" align="left">
          </ngc-data-column>
          <ngc-data-column text="uld.carrier" dataField="carrier" [width]="80" align="left"></ngc-data-column>
          <ngc-data-column text="uld.destination" dataField="destination" [width]="80" align="left"></ngc-data-column>
          <ngc-data-column text="uld.grossWeight" dataField="grossWeight" [width]="80" align="left"></ngc-data-column>
          <ngc-data-column text="uld.mhsWeight" dataField="mhsWeight" [width]="80" align="left"></ngc-data-column>
          <ngc-data-column text="uld.destinationWhLocation" dataField="destinationWhLocation" [width]="80" align="left">
          </ngc-data-column>
          <ngc-data-column text="uld.warehouseActualLocation" dataField="warehouseActualLocation" [width]="130" align="left">
          </ngc-data-column>         
          <ngc-data-column text="uld.elapseddays" dataField="elapsedDays" [width]="80" align="left">
          </ngc-data-column>
          <ngc-data-column text="uld.storagedate" dataField="storageDate" [width]="130" type="displayDate" align="left">
          </ngc-data-column>
          <ngc-data-column text="uld.awbloaded" dataField="awbLoaded" [width]="80" align="left">
          </ngc-data-column>
          <ngc-data-column text="uld.conditiontype" dataField="conditionType" [width]="130" align="left">
          </ngc-data-column>
          <ngc-data-column text="uld.eic" dataField="eic" [width]="70" align="left">
          </ngc-data-column>
          <ngc-data-column text="uld.status" dataField="status" [width]="100" align="left">
          </ngc-data-column>
          <ngc-data-column text="uld.remarks" dataField="remarks" [width]="70" align="left">
          </ngc-data-column>
          <ngc-data-column text="uld.contentcode" dataField="contentCode" [width]="130" align="left">
          </ngc-data-column>
          <ngc-data-column text="uld.movementtype" dataField="movementType" [width]="140" align="left">
          </ngc-data-column>
          <ngc-data-column text="uld.movement.dwelltime" dataField="movementDwellTime" [width]="170" align="left">
          </ngc-data-column>
          <ngc-data-column text="uld.unconfirmed" dataField="unConfirmed" [width]="170" align="left">
          </ngc-data-column>
          <ngc-data-column text="uld.reserved" dataField="reserved" [width]="130" align="left">
          </ngc-data-column>
          <ngc-data-column text="uld.agent" dataField="agent" [width]="100" align="left"></ngc-data-column>
          <ngc-data-column text="uld.agent.dwelltime" dataField="agentDwellTime" [width]="150" align="left">
          </ngc-data-column>
        </ngc-datatable>
      </ngc-column>
    </ngc-row>
  </ngc-container>
  <ngc-report #reportWindow title="export.excel" reportId='ULD_Inventory_Details' [reportParameters]='reportParameters'>
  </ngc-report>
</form>
<!-- This the uld Enquire window -->
<ngc-window #uldEnquireWindow title="uldbt" [width]="1300" [height]="600" (close)="uldEnquireResposne($event)">
  <app-uldenquire [uldEnquireObject]="uldEnquireObject" (responseObject)="uldEnquireResposne($event)"
    *ngIf="showWindow && uldEnquireObject && uldEnquireObject.parameter">
  </app-uldenquire>
</ngc-window>