<ngc-titlebar title='admin.title.maintain.rcar.number' (clear)="onClear($event)" (cancel)="onCancel($event)">
</ngc-titlebar>
<form [formGroup]="rcarNumberForm">
  <ngc-container type="tab">
    <ngc-row></ngc-row>
    <ngc-row></ngc-row>
    <ngc-row>
      <ngc-column column="2">
        <ngc-label label="rcar.customerCode"></ngc-label>
        <div>
          <ngc-lov accessEnableOn="r" [noCache]="true" formControlName="customerCode" (select)='OnSelect($event)' sourceId="COMPANY_DEREGISTER"
            title="g.customer.list" dataField="code" [width]="150">
            <ngc-data-column text="g.customerCode" dataField="code" [width]="50"></ngc-data-column>
            <ngc-data-column text="g.customerName" dataField="desc" [width]="50"></ngc-data-column>
          </ngc-lov>
        </div>
      </ngc-column>

      <ngc-column column="2">
        <ngc-label label="g.customerName"></ngc-label>
        <div>
          <ngc-lov accessEnableOn="r" [noCache]="true" dataField='desc' displayMember="desc" formControlName='customerName' [width]='150'
            upperCase='true' sourceId='COMPANY_DEREGISTER_NAME' title='g.customerCode' (select)='onCompanyNameLOVSelect($event)'
            [dropDownWidth]='60'>
            <ngc-data-column text='g.customerCode' dataField='code' [width]='50'></ngc-data-column>
            <ngc-data-column text='g.customerName' dataField='desc' [width]='50'></ngc-data-column>
          </ngc-lov>
          <!--<ngc-input width="700px" formControlName="customerShortName"></ngc-input>-->
        </div>
      </ngc-column>

      <ngc-column column="2">
        <ngc-label label="agent.iataAgentcode"></ngc-label>
        <div>
          <ngc-lov accessEnableOn="r" dataField='code' valueMember='code' formControlName='iataAgentCode' [width]='150'
            upperCase='true' sourceId='IATACODE' title='g.iatacode' [dropDownWidth]='50'>
            <ngc-data-column text='g.iatacode' dataField='code' [width]='70'></ngc-data-column>
          </ngc-lov>
        </div>
      </ngc-column>

      <ngc-column column="2">
        <ngc-label label="admin.maintain.rcar.group.code"></ngc-label>
        <div>

          <ngc-lov accessEnableOn="r" dataField='code' displayMember="desc" formControlName='groupCodeId' [width]='150' upperCase='true'
            sourceId='RCAR_GROUP_CODE' (select)='onSelectRcarCode($event)' title='customer.code' [dropDownWidth]='60'>
            <ngc-data-column text='admin.maintain.rcar.rcar.groupcode' dataField='code' [width]='50'></ngc-data-column>
            <ngc-data-column text='admin.maintain.rcar.rcar.group.description' dataField='desc' [width]='50'></ngc-data-column>
          </ngc-lov>

        </div>
      </ngc-column>
      <ngc-column column="1.5">
        <ngc-label label="rcar.startDate"></ngc-label>
        <div>
          <ngc-datetimeinput accessEnableOn="r" [width]="70" formControlName="startDate" [showCalendarButton]="true">
          </ngc-datetimeinput>
        </div>
      </ngc-column>
      <ngc-column column="1.5">
        <ngc-label label="rcar.endDate"></ngc-label>
        <div>
          <ngc-datetimeinput accessEnableOn="r" [width]="70" formControlName="endDate" [showCalendarButton]="true">
          </ngc-datetimeinput>
        </div>
      </ngc-column>
      <ngc-column column="1">
        <div>
          <ngc-label label=""></ngc-label>
        </div>
        <ngc-button accessEnableOn="r" value="g.search" (click)="onSearch()" iconType="search"></ngc-button>
      </ngc-column>
    </ngc-row>
    <ngc-row></ngc-row>
    <ngc-row></ngc-row>
    <ngc-row>
      <ngc-column column="11"></ngc-column>
      <ngc-column column="1">
        <ngc-button value="admin.add.rcar.number" (click)="onAdd()" iconType="add"></ngc-button>
      </ngc-column>
    </ngc-row>
  </ngc-container>
  <ngc-container *ngIf="showButtons" type="tab">
    <ngc-row>
      <ngc-column>
        <ngc-datatable (linkClick)="onLinkClick($event)" [pageable]="true" [pagerMode]="'advanced'" formArrayName="searchList">
          <ngc-data-column text='customer.code' dataField="customerCode" [width]="270" upperCase="true" cellsAlign="left" align="left"></ngc-data-column>
          <ngc-data-column text='customer.name' dataField="customerName" [width]="500" type="link" upperCase="true" cellsAlign="left"
            align="left"></ngc-data-column>
          <ngc-data-column text='agent.iataAgentcode' dataField="iataAgentCode" [width]="300" upperCase="true"
            cellsAlign="left" align="left"></ngc-data-column>
          <ngc-data-column text='admin.maintain.rcar.rcar.groupcode' dataField="groupCode" upperCase="true" [width]="240" align="left" cellsAlign="left"></ngc-data-column>
          <ngc-data-column text='rcar.rcarNumber' dataField="rcarNumber" upperCase="true" [width]="230" cellsAlign="left" align="left"></ngc-data-column>
          <ngc-data-column text='g.effective.date' dataField="startDate" [width]="250" type="displayDate" cellsAlign="left" align="left"></ngc-data-column>
          <ngc-data-column text='g.endDate' dataField="endDate" [width]="200" type="displayDate" cellsAlign="left" align="left"></ngc-data-column>
          <ngc-data-column text='g.last.updated.by' dataField="lastUpdatedBy" [width]="300" upperCase="true" cellsAlign="left" align="left"></ngc-data-column>
          <ngc-data-column text='g.last.updated.on' dataField="lastUpdatedOn" [width]="300" type="displayDate" upperCase="true" cellsAlign="left"
            align="left"></ngc-data-column>
          <ngc-data-column text='g.edit' dataField="EDIT" [width]="270" iconType='edit' type="link" cellsAlign="center" align="left">
          </ngc-data-column>
        </ngc-datatable>
      </ngc-column>
    </ngc-row>
  </ngc-container>

  <ngc-window #updateInsertionWindow [width]="700" [height]="300" title="admin.update.rcar.number" [showCloseButton]="true">
    <ngc-container type="tab">
      <ngc-row>
        <ngc-column column="2">
          <ngc-label label="rcar.customerCode"></ngc-label>
          <div>
            <ngc-display formControlName="customerUpdateCode"></ngc-display>
          </div>
        </ngc-column>
        <ngc-column column="1"></ngc-column>
        <ngc-column column="6">
          <ngc-label label="rcar.customerName" [width]="500"></ngc-label>
          <div>
            <ngc-display formControlName="customerUpdateName"></ngc-display>
          </div>
        </ngc-column>
      </ngc-row>
    </ngc-container>
    <ngc-container type="tab">
      <ngc-row>
        <ngc-column column="2">
          <ngc-label label="admin.maintain.rcar.group.code"></ngc-label>
          <div>
            <ngc-display formControlName="rcarUpdateStatus"></ngc-display>
          </div>
        </ngc-column>
        <ngc-column column="3">
          <ngc-label label="rcar.rcarNumber"></ngc-label>
          <div>
            <ngc-display formControlName="rcarUpdateNumber" [onlyDate]="true"></ngc-display>
          </div>
        </ngc-column>

        <ngc-column column="2">
          <ngc-label label="rcar.startDate"></ngc-label>
          <div>
            <ngc-display formControlName="startUpdateDate"></ngc-display>
          </div>
        </ngc-column>
        <ngc-column column="1"></ngc-column>
        <ngc-column column="2">
          <ngc-label label="rcar.endDate"></ngc-label>
          <div>
            <ngc-datetimeinput [width]="120" formControlName="endUpdateDate" [showCalendarButton]="true">
            </ngc-datetimeinput>
          </div>
        </ngc-column>
        <ngc-column column="2"></ngc-column>
      </ngc-row>
    </ngc-container>
    <ngc-container type="tab">
      <ngc-row>
        <ngc-column column="10"></ngc-column>
        <ngc-column column="2">
          <ngc-button (click)="update()" value="g.save"></ngc-button>
        </ngc-column>
      </ngc-row>
    </ngc-container>
  </ngc-window>
</form>
<ngc-container type="tab">
  <ngc-row>
    <ngc-column column="10"></ngc-column>
    <ngc-column column="2">
      <ngc-button *ngIf="showButtons" value="g.export.to.excel" (click)="exportToExcel()" accessEnableOn="r">
      </ngc-button>
    </ngc-column>
  </ngc-row>
</ngc-container>
<form [formGroup]="addRcarNumberForm">
  <ngc-window #insertionWindow [width]="950" [height]="300" title="admin.add.new.rcar.number" [showCloseButton]="true">
    <ngc-container type="tab">
      <ngc-row>
        <ngc-column column="2">
          <ngc-label label="rcar.customerCode"></ngc-label>
          <div>
            <ngc-lov [noCache]="true" formControlName="customerCode" (select)='OnSelectAdd($event)'
              sourceId="COMPANY_DEREGISTER" title="Customer
                List" dataField="code" [width]="100" required>
              <ngc-data-column text="g.customerCode" dataField="code" [width]="50"></ngc-data-column>
              <ngc-data-column text="g.customer.full.name" dataField="desc" [width]="80"></ngc-data-column>
            </ngc-lov>
          </div>
        </ngc-column>
        <ngc-column column="7">
          <ngc-label label="rcar.customerName"></ngc-label>
          <div>
            <ngc-input [width]="730" formControlName="customerName"></ngc-input>
          </div>
        </ngc-column>
      </ngc-row>
      <ngc-row>
        <ngc-column>
          <ngc-label label="admin.maintain.rcar.group.code"></ngc-label>
          <div>
            <!--<ngc-dropdownlist [width]="170" formControlName="rcarStatus" sourceId="Admin$Admin_Rcar"></ngc-dropdownlist>-->
            <ngc-lov accessEnableOn="r" dataField='code' displayMember="desc" formControlName='groupCode' [width]='150'
              upperCase='true' sourceId='RCAR_GROUP_CODE' (select)='onSelectRcarCode($event)' title='customer.code'
              [dropDownWidth]='60' required>
              <ngc-data-column text='admin.maintain.rcar.rcar.group' dataField='code' [width]='50'></ngc-data-column>
              <ngc-data-column text='admin.maintain.rcar.rcar.group.description' dataField='desc' [width]='50'>
              </ngc-data-column>
            </ngc-lov>
          </div>
        </ngc-column>
        <ngc-column>
          <ngc-label label="rcar.rcarNumber"></ngc-label>
          <div>
            <ngc-input [width]="195" formControlName="rcarNumber" [maxlength]="15" required></ngc-input>
          </div>
        </ngc-column>
        <ngc-column>
          <ngc-label label="rcar.startDate"></ngc-label>
          <div>
            <ngc-datetimeinput [width]="180" formControlName="startDate" [showCalendarButton]="true" required>
            </ngc-datetimeinput>
          </div>
        </ngc-column>
        <ngc-column>
          <ngc-label label="rcar.endDate"></ngc-label>
          <div>
            <ngc-datetimeinput [width]="170" formControlName="endDate" [showCalendarButton]="true"></ngc-datetimeinput>
          </div>
        </ngc-column>
      </ngc-row>
      <ngc-row></ngc-row>
      <ngc-row></ngc-row>
      <ngc-row>
        <ngc-column column="10"></ngc-column>
        <ngc-column column="2">
          <ngc-button (click)="save()" value="g.save"></ngc-button>
        </ngc-column>
      </ngc-row>
    </ngc-container>
    <ngc-report #reportWindow title="g.report" format='xls' reportId='Maintain_RCAR_customer'
       [reportParameters]='reportParameters'>
    </ngc-report>
  </ngc-window>
</form>