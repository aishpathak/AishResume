<ngc-titlebar title='Outhouse Acceptance' (clear)="onClear($event)" (cancel)="onBack($event)" (save)="onSave($event)"></ngc-titlebar>
<form [formGroup]="outhouseAcceptanceForm">
  <ngc-container type="tab">
    <ngc-row>
      <ngc-column column="2">
        <ngc-label label="outhouse.carrier"></ngc-label>
        <div>
          <ngc-lov formControlName="carrierCode" required sourceId="SATS_CARRIERCODE" title="flight.carrier" displayMember="code" dataField="code"
            [width]="150" [maxlength]="2">
            <ngc-data-column text="Carrier Code" dataField="code" [width]="30"></ngc-data-column>
          </ngc-lov>
        </div>
      </ngc-column>
      <ngc-column column="2">
        <ngc-label label="outhouse.uld"></ngc-label>
        <div>
          <ngc-alphanuminput formControlName='storeLocation' upperCase='true' [maxlength]="11" [width]="140"></ngc-alphanuminput>
        </div>
      </ngc-column>
      <ngc-column column="2">
        <ngc-label label="outhouse.warehouselocation"></ngc-label>
        <div>
          <ngc-alphanuminput formControlName='warehouseLocation' upperCase='true' [maxlength]="11" [width]="140"></ngc-alphanuminput>
        </div>
      </ngc-column>
      <ngc-column column="2">
        <ngc-label label=""></ngc-label>
        <div>
          <ngc-button value="Search" (click)="onSearch($event,index)" iconType="search"></ngc-button>
        </div>
      </ngc-column>
    </ngc-row>
  </ngc-container>
  <ngc-container *ngIf="displayTabs" type="tab">
    <ngc-row>
      <ngc-column>
        <ngc-tabs [width]="800" [height]="200">
          <ngc-tab-card title="Mail Bag Number">
            <ngc-container>
              <ngc-row>
                <ngc-column column="3">
                  <ngc-label label="outhouse.bagnumber"></ngc-label>
                  <div>
                    <ngc-input formControlName="mailBagNumber" upperCase="true" [width]="300" [maxlength]="29" required></ngc-input>
                  </div>
                </ngc-column>
                <ngc-column column="2">
                  <ngc-label label=""></ngc-label>
                  <div>
                    <ngc-button value="Add Mail Bag" (click)="onAdd($event,index)" iconType="add"></ngc-button>
                  </div>
                </ngc-column>
              </ngc-row>
            </ngc-container>
          </ngc-tab-card>
          <ngc-tab-card title="Mail Bag Details">
            <ngc-container>
              <ngc-row>
                <ngc-column column="2">
                  <ngc-label label="outhouse.originoe"></ngc-label>
                  <ngc-container>
                    <ngc-row>
                      <ngc-column column="3">
                        <ngc-input formControlName="originOe1" upperCase="true" [width]="50" required></ngc-input>
                      </ngc-column>
                      <ngc-column column="4">
                        <ngc-lov formControlName="originOe2" (select)="getCountryCodeOrigin($event)" required sourceId="COUNTRY_AND_CITY" title="Origin"
                          dataField="code" [width]="47" [maxlength]="3">
                          <ngc-data-column text="Airport Code" dataField="code" [width]="30"></ngc-data-column>
                        </ngc-lov>
                      </ngc-column>
                      <ngc-column column="1"></ngc-column>
                      <ngc-column column="2">
                        <ngc-input formControlName="originOe3" required upperCase="true" [width]="50"></ngc-input>
                      </ngc-column>
                    </ngc-row>
                  </ngc-container>
                </ngc-column>
                <ngc-column column="2">
                  <ngc-label label="outhouse.destinationoe"></ngc-label>
                  <div>
                    <ngc-container>
                      <ngc-row>
                        <ngc-column column="3">
                          <div>
                            <ngc-input formControlName="destinationOe1" required upperCase="true" [width]="50"></ngc-input>
                          </div>
                        </ngc-column>
                        <ngc-column column="4">
                          <div>
                            <ngc-lov formControlName="destinationOe2" required (select)="getCountryCodeDestination($event)" sourceId="COUNTRY_AND_CITY"
                              title="Destination" dataField="code" [width]="47" [maxlength]="3">
                              <ngc-data-column text="Airport Code" dataField="code" [width]="30"></ngc-data-column>
                            </ngc-lov>
                          </div>
                        </ngc-column>
                        <ngc-column column="1"></ngc-column>
                        <ngc-column column="2">
                          <div>
                            <ngc-input formControlName="destinationOe3" required upperCase="true" [width]="50"></ngc-input>
                          </div>
                        </ngc-column>
                      </ngc-row>
                    </ngc-container>
                  </div>
                </ngc-column>
                <ngc-column column="8">
                  <ngc-container>
                    <ngc-row>
                      <ngc-column>
                        <div>
                          <ngc-label label="outhouse.category"></ngc-label>
                        </div>
                        <ngc-dropdownlist sourceId='Mail$MailCategory' required [width]="80" formControlName="category"></ngc-dropdownlist>
                      </ngc-column>
                      <ngc-column>
                        <ngc-label label="outhouse.mailtype"></ngc-label>
                        <div>
                          <ngc-dropdownlist sourceId='MAIL_SUBTYPE' required [width]="80" sourceType='query' formControlName="mailType"></ngc-dropdownlist>
                        </div>
                      </ngc-column>
                      <ngc-column>
                        <ngc-label label="outhouse.year"></ngc-label>
                        <div>
                          <ngc-dropdownlist sourceId='MAIL_YEARS' required [width]="80" sourceType='query' formControlName="year"></ngc-dropdownlist>
                        </div>
                      </ngc-column>
                      <ngc-column>
                        <ngc-label label="outhouse.dsn"></ngc-label>
                        <div>
                          <ngc-maskedinput formControlName="dsn" (ngModelChange)="appendDsn()" upperCase="true" [width]="80" mask="####" required></ngc-maskedinput>
                        </div>
                      </ngc-column>
                      <ngc-column>
                        <ngc-label label="outhouse.rsn"></ngc-label>
                        <div>
                          <ngc-maskedinput formControlName="rsn" (ngModelChange)="appendRsn()" upperCase="true" [width]="80" mask="###" required></ngc-maskedinput>
                        </div>
                      </ngc-column>
                      <ngc-column>
                        <ngc-label label="outhouse.lastbag"></ngc-label>
                        <div>
                          <ngc-dropdownlist sourceId='Mail$MailLastBag' required (select)="onLastBag($event)" [width]="80" formControlName="lastBag"></ngc-dropdownlist>
                        </div>
                      </ngc-column>
                      <ngc-column>
                        <ngc-label label="outhouse.registermail"></ngc-label>
                        <div>
                          <ngc-dropdownlist sourceId='Mail$MailRegistered' required (select)="onRegisteredBag($event)" [width]="80" formControlName="registerMail"></ngc-dropdownlist>
                        </div>
                      </ngc-column>
                      <ngc-column>
                        <ngc-label label="outhouse.weight"></ngc-label>
                        <div>
                          <ngc-weightinput required formControlName="weight" required></ngc-weightinput>
                        </div>
                      </ngc-column>
                    </ngc-row>
                  </ngc-container>
                </ngc-column>
              </ngc-row>
              <ngc-row>
                <ngc-column column="11"></ngc-column>
                <ngc-column column="1">
                  <ngc-button value="Add Mail Bag" (click)="onMailbagAdd($event)" iconType="add"></ngc-button>
                </ngc-column>
              </ngc-row>
            </ngc-container>
          </ngc-tab-card>
        </ngc-tabs>
      </ngc-column>
    </ngc-row>
  </ngc-container>
  <ngc-container *ngIf="show" type="tab">
    <ngc-row>
      <ngc-column>
        <ngc-table>
          <thead align="left">
            <tr>
              <th [width]="28">
                <ngc-icon type="yesno"></ngc-icon>
              </th>
              <th [width]="240">
                <ngc-label value="outhouse.bagnumber"></ngc-label>
              </th>
              <th [width]="80">
                <ngc-label value="outhouse.dispatch"></ngc-label>
              </th>
              <th [width]="80">
                <ngc-label value="outhouse.receptaclenumber"></ngc-label>
              </th>
              <th [width]="80">
                <ngc-label value="outhouse.origin"></ngc-label>
              </th>
              <th [width]="80">
                <ngc-label value="outhouse.destination"></ngc-label>
              </th>
              <th [width]="80">
                <ngc-label value="Next Destination"></ngc-label>
              </th>
              <th [width]="70">
                <ngc-label value="outhouse.pieces"></ngc-label>
              </th>
              <th [width]="70">
                <ngc-label value="outhouse.weight"></ngc-label>
              </th>
              <th [width]="80">
                <ngc-label value="outhouse.registered"></ngc-label>
              </th>
              <th [width]="70">
                <ngc-label value="outhouse.damaged"></ngc-label>
              </th>
              <th [width]="140">
                <ngc-label value="outhouse.paflight"></ngc-label>
              </th>
            </tr>
          </thead>
          <tbody align="center" formArrayName="mailOuthouseAcceptance">
            <tr *ngFor="let item of outhouseAcceptanceForm.controls.mailOuthouseAcceptance.controls; let index=index" [formGroupName]="index">
              <td>
                <ngc-checkbox formControlName="select" cellsAlign="center" [width]="28"></ngc-checkbox>
              </td>
              <td>
                <ngc-display formControlName="mailBagNumber" required upperCase="true" [width]="240"></ngc-display>
              </td>
              <td>
                <ngc-display formControlName="dispatchNumber" upperCase="true" [width]="80"></ngc-display>
              </td>
              <td>
                <ngc-display formControlName="receptacleNumber" required [width]="80"></ngc-display>
              </td>
              <td>
                <ngc-display formControlName="origin" required upperCase="true" [width]="80"></ngc-display>
              </td>
              <td>
                <ngc-display formControlName="destination" required upperCase="true" [width]="80"></ngc-display>
              </td>
              <td>
                <ngc-input formControlName="nextDestination" upperCase="true" [width]="80"></ngc-input>
              </td>
              <td>
                <ngc-piecesdisplay formControlName="pieces" required upperCase="true" [width]="70"></ngc-piecesdisplay>
              </td>
              <td>
                <ngc-weightdisplay formControlName="weight" required upperCase="true" [width]="70"></ngc-weightdisplay>
              </td>
              <td>
                <ngc-display formControlName="registeredIndicator" required upperCase="true" [width]="80"></ngc-display>
              </td>
              <td>
                <ngc-display formControlName="damaged" required upperCase="true" [width]="70"></ngc-display>
              </td>
              <td>
                <ngc-display formControlName="paFlightKey" required upperCase="true" [width]="140"></ngc-display>
              </td>
            </tr>
          </tbody>
        </ngc-table>
      </ngc-column>
    </ngc-row>
    <ngc-row>
      <ngc-column column="12" align="right">
        <ngc-button value="Capture Damage" (click)="captureDamage($event)"></ngc-button>
        <ngc-button value="Delete" (click)="onDelete($event)" iconType="delete"></ngc-button>
      </ngc-column>
    </ngc-row>
    <ngc-row>
    </ngc-row>
    <ngc-row>
      <ngc-column column="12" align="right"></ngc-column>
      <ngc-button value="Delete" (click)="onDelete($event)" iconType="delete"></ngc-button>
    </ngc-row>
  </ngc-container>

</form>