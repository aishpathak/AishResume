<!-- <p>
  icms-booking-publish works!
</p> -->

<ngc-titlebar *ngIf="popupDisplay" title="ICMS Booking Publish Detail" (clear)="onClear()" (cancel)="onCancel()">
</ngc-titlebar>
<form [formGroup]="icmsForm">
  <ngc-container *ngIf="popupDisplay" type='section' type="tab">
    <ngc-row>
      <ngc-column>
        <ngc-label label="AWB Number"></ngc-label>
        <div>
          <ngc-awbinput accessEnableOn="r" [autoFocus]="true" [width]="110" formControlName="shipmentNumber"
            upperCase="true" required>
          </ngc-awbinput>
        </div>
      </ngc-column>
      <ngc-column align='left' column=8>
        <br>
        <ngc-button value='g.search' accessEnableOn="r" (click)="searchBookingList()"></ngc-button>
      </ngc-column>
    </ngc-row>
  </ngc-container>
  <!--first table*******************************************************************************-->
  <ngc-container type="tab">
    <ngc-row>
      <ngc-column>
        <ngc-table width="900">
          <thead>
            <tr>
              <th align='Center'>
                <ngc-label label="SVC"></ngc-label>
              </th>
              <th align='Center'>
                <ngc-label label="Origin"></ngc-label>
              </th>
              <th align='Center'>
                <ngc-label label="Destination"></ngc-label>
              </th>
              <th align='Center'>
                <ngc-label label="AWB Pieces"></ngc-label>
              </th>
              <th align='Center'>
                <ngc-label label="AWB Weight"></ngc-label>
              </th>
              <th align='Center'>
                <ngc-label label="K/L"></ngc-label>
              </th>
              <th align='Center'>
                <ngc-label label="Nature of Goods"></ngc-label>
              </th>
              <th align='Center'>
                <ngc-label label="SHC"></ngc-label>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td align='Center'>
                <ngc-checkbox formControlName="svc" [disabled]="true"></ngc-checkbox>
              </td>
              <td align='Center'>
                <ngc-display formControlName="origin">
                </ngc-display>
              </td>
              <td align='Center'>
                <ngc-display formControlName="destination">
                </ngc-display>
              </td>
              <td align='Center'>
                <ngc-display formControlName="pieces">
                </ngc-display>
              </td>
              <td align='Center'>
                <ngc-display formControlName="weight">
                </ngc-display>
              </td>
              <td align='Center'>
                <ngc-display formControlName="weightUnitCode">
                </ngc-display>
              </td>
              <td align='Center'>
                <ngc-display formControlName="natureOfGoodsDescription">
                </ngc-display>
              </td>
              <td align='Center'>
                <ngc-display formControlName="shcs">
                </ngc-display>
              </td>
            </tr>
          </tbody>

        </ngc-table>
      </ngc-column>
    </ngc-row>
  </ngc-container>

  <!-- Second table ******************************************************************************-->
  <div class="wrapper">
    <ngc-container type='square'>
      <ngc-row>
        <ngc-column>
          <ngc-label label="ICMS Flight Booking"></ngc-label>
          <ngc-table width="1000" style="height:400px; overflow-y: scroll; display: flex;">
            <ngc-label label="ICMS Flight Booking"></ngc-label>
            <tr>
              <th align="Center">
                <ngc-label label="Brd"></ngc-label>
              </th>
              <th align="Center">
                <ngc-label label="Off"></ngc-label>
              </th>
              <th align="Center">
                <ngc-label label="Flight"></ngc-label>
              </th>
              <th align="Center">
                <ngc-label label="Pair"></ngc-label>
              </th>
              <th align="Center">
                <ngc-label label="Flight Date"></ngc-label>
              </th>
              <th align="Center">
                <ngc-label label="Pcs"></ngc-label>
              </th>
              <th align="Center">
                <ngc-label label="Weight"></ngc-label>
              </th>
              <th>
                <ngc-label label="Vol"></ngc-label>
              </th>
              <th align="Center">
                <ngc-label label="Vol Code"></ngc-label>
              </th>
              <th align="Center">
                <ngc-label label="Sts"></ngc-label>
              </th>
              <th align="Center">
                <ngc-label label="Cosys+ Processing Details"></ngc-label>
              </th>
            </tr>
            <tbody formArrayName="bookingFlightDetails">
              <ng-container *ngFor="let item of icmsForm.controls.bookingFlightDetails.controls; let i=index"
                [formGroupName]="i">
                <tr>
                  <td align="Center">
                    <ngc-display align="center" formControlName="segmentOrigin">
                    </ngc-display>
                  </td>
                  <td align="Center">
                    <ngc-display formControlName="segmentDestination">
                    </ngc-display>
                  </td>
                  <td align="Center">
                    <ngc-display formControlName="flightNumber">
                    </ngc-display>
                  </td>
                  <td align="Center">
                    <ngc-display formControlName="pair">
                    </ngc-display>
                  </td>
                  <td align="Center">
                    <ngc-display width="50" formControlName="flightDate">
                    </ngc-display>
                  </td>
                  <td align="Center">
                    <ngc-display formControlName="pieces">
                    </ngc-display>
                  </td>
                  <td align="Center">
                    <ngc-display formControlName="weight">
                    </ngc-display>
                  </td>
                  <td align="Center">
                    <ngc-display formControlName="volume">
                    </ngc-display>
                  </td>
                  <td align="Center">
                    <ngc-display formControlName="volumeUnit">
                    </ngc-display>
                  </td>
                  <td align="Center">
                    <ngc-display formControlName="flightBookingStatus">
                    </ngc-display>
                  </td>
                  <td align="Center">
                    <ngc-display formControlName="errorMessage"></ngc-display>
                  </td>
                </tr>
              </ng-container>
            </tbody>
          </ngc-table>

        </ngc-column>
        <ngc-column>
          <ngc-row>
            <ngc-column>
              <tr>
                <ngc-column [column]="2">
                  <ngc-label label="Dimension"></ngc-label>
                </ngc-column>
              </tr>
              <tr>
                <ngc-column>
                  <ngc-label label="Measurement Unit Code: "></ngc-label>
                </ngc-column>
                <ngc-column>
                  <ngc-display formControlName="dimensionUnit">
                  </ngc-display>
                </ngc-column>
              </tr>
            </ngc-column>
          </ngc-row>
          <ngc-row>
            <ngc-column>
              <ngc-table width="400" style="height:400px; overflow-y: scroll; display: flex;">
                <tr>
                  <th align="Center">
                    <ngc-label label="Pieces"></ngc-label>
                  </th>
                  <th align="Center">
                    <ngc-label label="Length"></ngc-label>
                  </th>
                  <th align="Center">
                    <ngc-label label="Width"></ngc-label>
                  </th>
                  <th align="Center">
                    <ngc-label label="Height"></ngc-label>
                  </th>
                  <th align="Center">
                    <ngc-label label="Volume"></ngc-label>
                  </th>
                  <th align="Center">
                    <ngc-label label="Weight"></ngc-label>
                  </th>
                </tr>
                <tbody formArrayName="bookingCommodityDetails">
                  <tr *ngFor="let item of icmsForm.controls.bookingCommodityDetails.controls; let j = index"
                    [formGroupName]="j">
                    <td align="Center">
                      <ngc-display formControlName="numberOfPieces">
                      </ngc-display>
                    </td>
                    <td align="Center">
                      <ngc-display formControlName="lengthPerPiece">
                      </ngc-display>
                    </td>
                    <td align="Center">
                      <ngc-display formControlName="widthPerPiece">
                      </ngc-display>
                    </td>
                    <td align="Center">
                      <ngc-display formControlName="heightPerpiece">
                      </ngc-display>
                    </td>
                    <td align="Center">
                      <ngc-display formControlName="volume">
                      </ngc-display>
                    </td>
                    <td align="Center">
                      <ngc-display formControlName="weight">
                      </ngc-display>
                    </td>
                  </tr>
                </tbody>
              </ngc-table>
            </ngc-column>
          </ngc-row>

        </ngc-column>
      </ngc-row>
      <ngc-row>
        <ngc-column>
          <ngc-label label="COSYS+ Booking Details"></ngc-label>
          <ngc-table width="1000" style="height:240px; overflow-y: scroll; display: flex;">
            <tr row="2">
              <th align="Center" row="2">
                <ngc-label align="Center" label="Sfx"></ngc-label>
              </th>
              <th align="Center">
                <ngc-label label="Brd"></ngc-label>
              </th>
              <th align="Center">
                <ngc-label label="Off"></ngc-label>
              </th>
              <th align="Center">
                <ngc-label label="Pcs"></ngc-label>
              </th>
              <th align="Center">
                <ngc-label label="Weight"></ngc-label>
              </th>
              <th align="Center">
                <ngc-label align="Center" label="Inbound Flight"></ngc-label>
              </th>
              <th align="Center">
                <ngc-label label="Inbound Flight Date"></ngc-label>
              </th>
              <th align="Center">
                <ngc-label label="Sts"></ngc-label>
              </th>
              <th align="Center">
                <ngc-label label="Outbound Flight"></ngc-label>
              </th>
              <th align="Center">
                <ngc-label label="Outbound Flight Date"></ngc-label>
              </th>
              <th align="Center">
                <ngc-label label="Sts"></ngc-label>
              </th>
            </tr>
            <tbody formArrayName="cosysBookingDetails">
              <tr *ngFor="let item of icmsForm.controls.cosysBookingDetails.controls; let k = index"
                [formGroupName]="k">
                <td align="Center">
                  <ngc-display formControlName="partSuffix">
                  </ngc-display>
                </td>
                <td align="Center">
                  <ngc-display formControlName="origin">
                  </ngc-display>
                </td>
                <td align="Center">
                  <ngc-display formControlName="destination">
                  </ngc-display>
                </td>
                <td align="Center">
                  <ngc-display formControlName="pieces">
                  </ngc-display>
                </td>
                <td align="Center">
                  <ngc-display formControlName="weight">
                  </ngc-display>
                </td>
                <td align="Center">
                  <ngc-display formControlName="flightNumber">
                  </ngc-display>
                </td>
                <td align="Center">
                  <ngc-display formControlName="flightDate">
                  </ngc-display>
                </td>
                <td align="Center">
                  <ngc-display formControlName="bookingStatus">
                  </ngc-display>
                </td>
                <td align="Center">
                  <ngc-display formControlName="outgoingFlightNumber">
                  </ngc-display>
                </td>
                <td align="Center">
                  <ngc-display formControlName="outgoingFlightDate">
                  </ngc-display>
                </td>
                <td align="Center">
                  <ngc-display formControlName="outgoingBookingStatus">
                  </ngc-display>
                </td>
              </tr>
            </tbody>
          </ngc-table>
        </ngc-column>
        <ngc-column>
          <ngc-label label="Booking Remark"></ngc-label>
          <div>
            <ngc-textarea width="600" height="50" formControlName="bookingRemarks" [disabled]="true">
            </ngc-textarea>
          </div>
          <ngc-label label="g.handling.information.remarks"></ngc-label>
          <div>
            <ngc-textarea width="600" height="50" formControlName="handlingInformationRemarks" [disabled]="true">
            </ngc-textarea>
          </div>
          <ngc-label label="flight.flight.remarks"></ngc-label>
          <ngc-container style="height:300px; overflow-y: scroll; display: flex;" *ngIf="isShowRemark;else content"
            formArrayName="bookingFlightDetails">
            <ngc-row *ngFor="let item of icmsForm.controls.bookingFlightDetails.controls; let i=index"
              [formGroupName]="i">
              <ngc-column
                *ngIf="(icmsForm.get(['bookingFlightDetails',i,'segmentOrigin']).value=='SIN' || icmsForm.get(['bookingFlightDetails',i,'segmentDestination']).value=='SIN') && icmsForm.get(['bookingFlightDetails',i,'remarks']).value!=null">
                <ngc-display formControlName="flightInfo"></ngc-display>
                <div>
                  <ngc-textarea width="600" height="50" formControlName="remarks" [disabled]="true">
                  </ngc-textarea>
                </div>
              </ngc-column>
            </ngc-row>
          </ngc-container>
          <ng-template #content>
            <div>
              <ngc-textarea width="600" height="50" [disabled]="true">
              </ngc-textarea>
            </div>
          </ng-template>
        </ngc-column>
      </ngc-row>

    </ngc-container>
  </div>
</form>