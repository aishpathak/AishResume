<ngc-titlebar title="chargepostingconfiguration.sapmaterialcode" (save)="saveChargePostingConfiguration($event)"
  (cancel)="onCancel($event)" [disableSave]="hasReadPermission"></ngc-titlebar>
<form [formGroup]="chargePostingConfigurationForm">
  <ngc-container type="section">
    <ngc-row>
      <ngc-column [column]="2">
        <ngc-label label="import.ChargeCode"></ngc-label>
        <div>
          <ngc-display formControlName="chargeCodeName"></ngc-display>
        </div>
      </ngc-column>
      <ngc-column>
        <ngc-label label="bil.chargeCodeDescription"></ngc-label>
        <div>
          <ngc-display formControlName="chargeCodeDescription"></ngc-display>
        </div>
      </ngc-column>
    </ngc-row>
  </ngc-container>
  <ngc-container type="tab" title="chargepostingconfiguration.mapchargmaterialcode">
    <ngc-row>
      <ngc-column>
        <ngc-edittable formArrayName="ChargePostingConfiguration" [pageable]="false">
          <ngc-data-column text="chargepostingconfiguration.order" dataField="order" [width]="10"></ngc-data-column>
          <ngc-data-column text="export.handlingArea" dataField="handlingArea" [width]="30">
            <ng-template let-name="name" let-group="group">
              <ng-container [formGroupName]="group">
                <ng-container>
                  <ngc-lov [width]='50' formControlName="handlingArea" sourceId="TERMINAL_CODE"
                    title="billing.handling.area" dataField='code' displayMember="code" [validOnly]='true'>
                    <ngc-data-column text="g.description" dataField="desc" [width]="150"></ngc-data-column>
                    <ngc-data-column text="g.code" dataField="code" [width]="100"></ngc-data-column>
                  </ngc-lov>
                </ng-container>
              </ng-container>
            </ng-template>
          </ngc-data-column>
          <ngc-data-column text="chargepostingconfiguration.shcgroup" dataField="shcHandlingGroup" [width]="30">
            <ng-template let-name="name" let-group="group">
              <ng-container [formGroupName]="group">
                <ng-container>
                  <ngc-lov [width]='50' formControlName="shcHandlingGroup" sourceId="SHC_GROUP"
                    title="billing.shc.group" dataField='code' displayMember="code" [validOnly]='true'>
                    <ngc-data-column text="g.description" dataField="desc" [width]="150"></ngc-data-column>
                    <ngc-data-column text="g.code" dataField="code" [width]="100"></ngc-data-column>
                  </ngc-lov>
                </ng-container>
              </ng-container>
            </ng-template>
          </ngc-data-column>
          <ngc-data-column text="chargepostingconfiguration.processtype" dataField="processType" [width]="45">
            <ng-template let-name="name" let-group="group">
              <ng-container [formGroupName]="group">
                <ng-container>
                  <ngc-lov [width]='120' formControlName="processType" sourceId="PROCESS_TYPE"
                    title="billing.process.type.caps" dataField='code' displayMember="desc" [validOnly]='true'>
                    <ngc-data-column text="g.description" dataField="desc" [width]="150"></ngc-data-column>
                    <ngc-data-column text="g.code" dataField="code" [width]="100"></ngc-data-column>
                  </ngc-lov>
                </ng-container>
              </ng-container>
            </ng-template>
          </ngc-data-column>
          <ngc-data-column text="chargepostingconfiguration.subGroupId" dataField="processType" [width]="45">
            <ng-template let-name="name" let-group="group">
              <ng-container [formGroupName]="group">
                <ng-container>
                  <ngc-lov [width]='120' formControlName="subGroupId" sourceId="BILL_SUBGROUPS"
                    title="billing.bill_subgroup" dataField='code' [validOnly]='true' displayField='param1'
                    [sourceParameters]="subGroupSource" sourceType='query'>
                    <ngc-data-column text="billing.id" dataField="code" [width]="50"></ngc-data-column>
                    <ngc-data-column text="g.chargeCode" dataField="desc" [width]="200"></ngc-data-column>
                    <ngc-data-column text="billing.factor.description" dataField="param1" [width]="250">
                    </ngc-data-column>
                  </ngc-lov>
                </ng-container>
              </ng-container>
            </ng-template>
          </ngc-data-column>
          <ngc-data-column text="chargepostingconfiguration.materialCode" dataField="finSysChargeCode" [width]="50">
            <ng-template let-name="name" let-group="group">
              <ng-container [formGroupName]="group">
                <ng-container>
                  <ngc-lov [width]='180' formControlName="finSysChargeCode" sourceId="FINANCESYSTEMCHARGECODE_LIST"
                    title="billing.materialcode.list" dataField='code' displayMember="code"
                    (select)="assignMaterialDescription($event,group)" [validOnly]='true'>
                    <ngc-data-column text="g.description" dataField="desc" [width]="150"></ngc-data-column>
                    <ngc-data-column text="g.code" dataField="code" [width]="100"></ngc-data-column>
                  </ngc-lov>
                </ng-container>
              </ng-container>
            </ng-template>
          </ngc-data-column>
          <ngc-data-column text="bil.materialDescription" dataField="finSysDescription" [width]="70"></ngc-data-column>
          <ngc-data-column text="bil.salesOrganization" dataField="salesOrganization" [width]="20"></ngc-data-column>
          <ngc-data-column text="bil.distributionChannel" dataField="distributionChannel" [width]="20">
          </ngc-data-column>
          <ngc-data-column text="bil.division" dataField="division" [width]="20"></ngc-data-column>
          <ngc-data-column text="chargepostingconfiguration.aportion" dataField="apportionPercentage" [width]="20">
            <ng-template let-name="name" let-group="group">
              <ng-container [formGroupName]="group">
                <ng-container>
                  <ngc-numberinput formControlName="apportionPercentage" [width]="40" digits="3" decimalDigits="0">
                  </ngc-numberinput>
                </ng-container>
              </ng-container>
            </ng-template>
          </ngc-data-column>
          <ngc-data-column text=" " dataField="apportionPercentage" [width]="8">
            <ng-template let-name="name" let-group="group">
              <ng-container [formGroupName]="group">
                <ng-container>
                  <ngc-link iconType="delete" (linkClick)="onDeleteCombo(group)" [width]="10" [disabled]="hasReadPermission">
                  </ngc-link>
                </ng-container>
              </ng-container>
            </ng-template>
          </ngc-data-column>
          <ngc-data-column text=" " dataField="apportionPercentage" [width]="10">
            <ng-template let-name="name" let-group="group">
              <ng-container [formGroupName]="group"
                *ngIf="chargePostingConfigurationForm.get([ 'ChargePostingConfiguration',group])!=null && !chargePostingConfigurationForm.get([ 'ChargePostingConfiguration',group]).isSoftDeleted">
                <ng-container>
                  <ngc-link iconType="up" (linkClick)="onUpClick($event, group)" *ngIf="group>0"></ngc-link>
                  <span>
                    <ngc-link iconType="down" (linkClick)="onDownClick($event, group)"
                      *ngIf="chargePostingConfigurationForm.get([ 'ChargePostingConfiguration']).length-1>group">
                    </ngc-link>
                  </span>
                </ng-container>
              </ng-container>
            </ng-template>
          </ngc-data-column>
        </ngc-edittable>
      </ngc-column>
    </ngc-row>
    <ngc-row>
      <ngc-column>
        <ngc-i18n value="billing.combo.handling.area.shc.group.process.type"></ngc-i18n>
      </ngc-column>
      <ngc-column>
        <ngc-i18n value="billing.matching.all.possible.values"></ngc-i18n>
      </ngc-column>
      <ngc-column align="right">
        <ngc-button value="g._add" (click)="addRowForNewCombo()" [disabled]="hasReadPermission"></ngc-button>
      </ngc-column>
    </ngc-row>
  </ngc-container>
</form>