<ngc-titlebar title='cus.list.print.constraint.codes.report' (clear)="onClear()" (cancel)='onCancel($event)'
  (print)="onreportcreation()">
</ngc-titlebar>
<form [formGroup]="printConstraintCodeForm">
  <ngc-container type="tab">
    <ngc-row>

      <ngc-column column='2'>
        <ngc-label label="flight.flightType">
        </ngc-label>
        &nbsp;
        <ngc-dropdownlist accessEnableOn="r" [autoSelect]="false" (select)="openFields()" [disabled]="onSearchFlag"
          [width]="80" formControlName='flightType' sourceId="Customs$FlightTypeDropdown" required></ngc-dropdownlist>
      </ngc-column>
      &nbsp;

      <ngc-column column='2'>
        <ngc-label label="fromDate"></ngc-label>
        &nbsp;
        <ngc-datetimeinput accessEnableOn="r" width='110px' formControlName="from_Date" required>
        </ngc-datetimeinput>
      </ngc-column>

      <ngc-column column='2.5'>
        <ngc-label label="toDate"></ngc-label>
        &nbsp;
        <ngc-datetimeinput accessEnableOn="r" width='110px' formControlName="to_Date" required>
        </ngc-datetimeinput>
      </ngc-column>

      <ngc-column column='2'>
        <ngc-label label="cc.severe.than">
        </ngc-label>
        &nbsp;
        <ngc-lov accessEnableOn="r" formControlName='ccSevereThan' width='40px' upperCase='true'
          sourceId='CONSTRAINT_CODE' title='constraint.code' dataField='parameter1'
          (ngModelChange)="onSelectFunction($event)" displayMember="parameter1" [dropDownWidth]='60'
          [disabled]='ctmCodeSelected'>
          <ngc-data-column text='constraint.code' dataField='code' [width]='100'></ngc-data-column>
          <ngc-data-column text='g.description' dataField='desc' [width]='150'></ngc-data-column>
          <ngc-data-column text='g.priority' dataField='parameter1' [width]='150'></ngc-data-column>
        </ngc-lov>
      </ngc-column>
    </ngc-row>

    <ngc-row>
      <ngc-column>
        <ngc-label value=''></ngc-label>
      </ngc-column>
    </ngc-row>


    <ngc-row>

      <ngc-column column='4'>
        <ngc-label label="cus.ctm.code">
        </ngc-label>
        &nbsp;
        <ngc-lov accessEnableOn="r" formControlName='cc_a' width='40px' upperCase='true' sourceId='CONSTRAINT_CODE'
          title='constraint.code' dataField='code' (select)='onSelect($event)' displayMember="code" [dropDownWidth]='60'
          [disabled]='ccSevereSelected'>
          <ngc-data-column text='constraint.code' dataField='code' [width]='100'></ngc-data-column>
          <ngc-data-column text='g.description' dataField='desc' [width]='150'></ngc-data-column>
        </ngc-lov>
        &nbsp;

        <ngc-lov accessEnableOn="r" formControlName='cc_b' width='40px' upperCase='true' sourceId='CONSTRAINT_CODE'
          title='constraint.code' dataField='code' (select)='onSelect($event)' displayMember="code" [dropDownWidth]='60'
          [disabled]='ccSevereSelected'>
          <ngc-data-column text='constraint.code' dataField='code' [width]='100'></ngc-data-column>
          <ngc-data-column text='g.description' dataField='desc' [width]='150'></ngc-data-column>
        </ngc-lov>
        &nbsp;

        <ngc-lov accessEnableOn="r" formControlName='cc_c' width='40px' upperCase='true' sourceId='CONSTRAINT_CODE'
          title='constraint.code' dataField='code' (select)='onSelect($event)' displayMember="code" [dropDownWidth]='60'
          [disabled]='ccSevereSelected'>
          <ngc-data-column text='constraint.code' dataField='code' [width]='100'></ngc-data-column>
          <ngc-data-column text='g.description' dataField='desc' [width]='150'></ngc-data-column>
        </ngc-lov>
        &nbsp;

        <ngc-lov accessEnableOn="r" formControlName='cc_d' width='40px' upperCase='true' sourceId='CONSTRAINT_CODE'
          title='constraint.code' dataField='code' (select)='onSelect($event)' displayMember="code" [dropDownWidth]='60'
          [disabled]='ccSevereSelected'>
          <ngc-data-column text='constraint.code' dataField='code' [width]='100'></ngc-data-column>
          <ngc-data-column text='g.description' dataField='desc' [width]='150'></ngc-data-column>
        </ngc-lov>
        &nbsp;

        <ngc-lov accessEnableOn="r" formControlName='cc_e' width='40px' upperCase='true' sourceId='CONSTRAINT_CODE'
          title='constraint.code' dataField='code' (select)='onSelect($event)' displayMember="code" [dropDownWidth]='60'
          [disabled]='ccSevereSelected'>
          <ngc-data-column text='constraint.code' dataField='code' [width]='100'></ngc-data-column>
          <ngc-data-column text='g.description' dataField='desc' [width]='150'></ngc-data-column>
        </ngc-lov>
      </ngc-column>
      &nbsp;

      <ngc-column column='2.5' [hidden]="showItfs">
        <ngc-label value='awb.carrier'></ngc-label>
        &nbsp;
        <ngc-lov accessEnableOn="r" formControlName='carrierCode' width='40px' upperCase='true' sourceId='CARRIER'
          title='g.carrier.type' dataField='code' (select)='onSelect($event)' displayMember="code" [dropDownWidth]='60'>
          <ngc-data-column text='g.carrier' dataField='code' [width]='100'></ngc-data-column>
          <ngc-data-column text='g.description' dataField='desc' [width]='150'></ngc-data-column>
        </ngc-lov>
      </ngc-column>

      <ngc-column column='2' [hidden]="showItfs">
        <ngc-label value='flight'></ngc-label>
        &nbsp;
        <ngc-flightkeyinput [disabled]="onSearchFlag" accessEnableOn="r" [width]="100" formControlName="flight_Key"
          upperCase="true">
        </ngc-flightkeyinput>
      </ngc-column>

      <ngc-column column='2' [hidden]="showItfs">
        <ngc-label label='g.awbNumber'></ngc-label>
        &nbsp;
        <ngc-awbinput accessEnableOn="r" formControlName="awb_Number" [disabled]=showAsPopup>
        </ngc-awbinput>
      </ngc-column>

      <ngc-column column='2.5' *ngIf='flightTypeButtonClicked' [hidden]="showExportImport">
        <ngc-label label='itfs.flight.no'></ngc-label>
        &nbsp;
        <ngc-input accessEnableOn="r" formControlName="itfsNo" [disabled]=showAsPopup>
        </ngc-input>
      </ngc-column>

      <ngc-column column='2' *ngIf='flightTypeButtonClicked' [hidden]="showExportImport">
        <ngc-label label="itfs.flight.date"></ngc-label>
        &nbsp;
        <ngc-datetimeinput accessEnableOn="r" width='110px' formControlName="itfsDate">
        </ngc-datetimeinput>
      </ngc-column>

      <ngc-column align='left' column='1.5'>
        <ngc-label label=""></ngc-label>
        <ngc-button value='g.search' accessEnableOn="r" (click)="onSearch()"></ngc-button>
      </ngc-column>

    </ngc-row>

    <ngc-row>
      <ngc-column>
        <ngc-label value=''></ngc-label>
      </ngc-column>
    </ngc-row>
  </ngc-container>

  <ngc-container *ngIf='searchButtonClicked' type="tab" [hidden]="ifItfs">
    <ngc-row>
      <ngc-column>
        <ngc-edittable formArrayName="retrievePrintConstraintCode" (itemSelect)="onClick($event)" [showToolbar]="false"
          [pageable]="true">

          <ngc-data-column text="g.sNo" align="left" [width]="20" cellsAlign="left" dataField=""
            [cellsRenderer]="cellsRendererSno">
          </ngc-data-column>

          <ngc-data-column text="flight" dataField="flightKey" align="left" [width]="45" cellsAlign="left">
          </ngc-data-column>

          <ngc-data-column text="date" dataField="flightDate" align="left" [width]="45" cellsAlign="left"
            type="displayDate">
          </ngc-data-column>

          <ngc-data-column text="g.awbNumber" dataField="awbNumber" align="left" cellsAlign="left" [width]="60">
            <ng-template let-data let-name="name" let-group="group">
              <ng-container [formGroupName]="group">
                <ng-container>
                  <ngc-link iconType="link" (linkClick)="openShipmentInformation(group)">
                    <ngc-awbdisplay formControlName="awbNumber"></ngc-awbdisplay>
                  </ngc-link>
                </ng-container>
              </ng-container>
            </ng-template>
          </ngc-data-column>

          <ngc-data-column text="g.hawb.number" dataField="hawbNumber" [width]="100">
            <ng-template let-data let-name="name" let-group="group">
              <ng-container [formGroupName]="group">
                <ng-container
                  *ngIf="printConstraintCodeForm.get(['retrievePrintConstraintCode',group, 'hawbNumber']).value != printConstraintCodeForm.get(['retrievePrintConstraintCode',group, 'defaultHouseNumber']).value ">
                  <ngc-link type="link" (linkClick)="openHouseInformation(group)" formControlName="hawbNumber">
                  </ngc-link>
                </ng-container>

                <ng-container
                  *ngIf="printConstraintCodeForm.get(['retrievePrintConstraintCode',group, 'hawbNumber']).value == printConstraintCodeForm.get(['retrievePrintConstraintCode',group, 'defaultHouseNumber']).value ">
                  <ngc-display formControlName="hawbNumber"></ngc-display>
                </ng-container>
              </ng-container>
            </ng-template>
          </ngc-data-column>

          <ngc-data-column text="g.origin" dataField="origin" align="left" [width]="45" cellsAlign="left">
          </ngc-data-column>

          <ngc-data-column text="g.destination" dataField="finalDestination" align="left" [width]="45"
            cellsAlign="left">
          </ngc-data-column>

          <ngc-data-column text="exp.constraint.code" dataField="cc" align="left" [width]="40" cellsAlign="left">
          </ngc-data-column>

          <ngc-data-column text="import.AwbPiecsWeight" dataField="awbPcsWgt" [width]="45" align="left"
            cellsAlign="left">
          </ngc-data-column>

          <ngc-data-column text="g.man.pcs.wts" dataField="manifestPcsWgt" align="left" [width]="45" cellsAlign="left">
          </ngc-data-column>

          <ngc-data-column text="message.log.received.date.time" dataField="recvDateTime" [width]="60" align="left"
            cellsAlign="left" type="displayDateTime">
          </ngc-data-column>

          <ngc-data-column text="cc.history" dataField="" [width]="30">
            <ng-template let-data let-name="name" let-group="group">
              <ng-container [formGroupName]="group">
                <ngc-link accessEnableOn="r" type="link" (linkClick)="openHistory(group)" iconType="open-link"
                  align="center" cellsAlign="center">
                </ngc-link>
              </ng-container>
            </ng-template>
          </ngc-data-column>

        </ngc-edittable>
      </ngc-column>
    </ngc-row>
  </ngc-container>

  <ngc-container *ngIf='searchButtonClicked' type="tab" [hidden]="!ifItfs">
    <ngc-row>
      <ngc-column>
        <ngc-edittable formArrayName="retrievePrintConstraintCode" (itemSelect)="onClick($event)" [showToolbar]="false"
          [pageable]="true">

          <ngc-data-column text="g.sNo" align="left" [width]="20" cellsAlign="left" dataField=""
            [cellsRenderer]="cellsRendererSno">
          </ngc-data-column>

          <ngc-data-column text="itfs.flight.no" dataField="customsFlightNumber" align="left" [width]="70"
            cellsAlign="left">
          </ngc-data-column>

          <ngc-data-column text="itfs.flight.date" dataField="customsFlightDate" align="left" [width]="70"
            type="displayDate" cellsAlign="left">
          </ngc-data-column>

          <ngc-data-column text="flight.std" dataField="dateSTD" align="left" [width]="40" cellsAlign="left"
            type="displayTime">
          </ngc-data-column>

          <ngc-data-column text="g.awbNumber" dataField="awbNumber" align="left" cellsAlign="left" [width]="70">
            <ng-template let-data let-name="name" let-group="group">
              <ng-container [formGroupName]="group">
                <ng-container>
                  <ngc-awbdisplay formControlName="awbNumber"></ngc-awbdisplay>
                </ng-container>
              </ng-container>
            </ng-template>
          </ngc-data-column>

          <ngc-data-column text="g.hawb.number" dataField="hawbNumber" align="left" [width]="90" cellsAlign="left">
          </ngc-data-column>

          <ngc-data-column text="buplist.org/dest" dataField="orgDest" align="left" [width]="55" cellsAlign="left">
          </ngc-data-column>

          <ngc-data-column text="exp.constraint.code" dataField="cc" align="left" [width]="40" cellsAlign="left">
          </ngc-data-column>

          <ngc-data-column text="import.AwbPiecsWeight" dataField="awbPcsWgt" [width]="45" align="left"
            cellsAlign="left">
          </ngc-data-column>

          <ngc-data-column text="message.log.received.date.time" dataField="recvDateTime" [width]="70" align="left"
            cellsAlign="left" type="displayDateTime">
          </ngc-data-column>

          <ngc-data-column text="cc.history" dataField="" [width]="30">
            <ng-template let-data let-name="name" let-group="group">
              <ng-container [formGroupName]="group">
                <ngc-link accessEnableOn="r" type="link" (linkClick)="openHistory(group)" iconType="open-link"
                  align="center" cellsAlign="center">
                </ngc-link>
              </ng-container>
            </ng-template>
          </ngc-data-column>

        </ngc-edittable>
      </ngc-column>
    </ngc-row>
  </ngc-container>


  <ngc-window #historyFormWindow [width]="1250" [height]="515" title="constraint.code.history" [showCloseButton]="true"
    (close)="closeAddHouseWindow()">
    <ngc-container *ngIf="windowOpenFlag">

      <ngc-row>
        <ngc-column [column]="3">
          <ngc-label label='flight.flightType'></ngc-label>
          &nbsp;&nbsp;
          &nbsp;&nbsp;
          &nbsp;&nbsp;
          <ngc-display formControlName="flightType"></ngc-display>
        </ngc-column>
        <ngc-column [column]="4">
          <ngc-label label='flight.virtual.flight.number'></ngc-label>
          &nbsp;
          &nbsp;
          &nbsp;
          <ngc-display formControlName="flightKey"></ngc-display>
        </ngc-column>
        <ngc-column [column]="4">
          <ngc-label label='flight.virtual.flight.date'></ngc-label>
          &nbsp;
          &nbsp;
          &nbsp;
          <ngc-display [onlyDate]="true" formControlName="flightDate"></ngc-display>
        </ngc-column>
      </ngc-row>

      <ngc-row>
        <ngc-column>
          <ngc-label value=''></ngc-label>
        </ngc-column>
      </ngc-row>

      <ngc-row>
        <ngc-column [column]="3">
          <ngc-label label='g.awbNumber'></ngc-label>
          &nbsp;
          &nbsp;
          &nbsp;
          <ngc-awbdisplay formControlName="awbNumber"></ngc-awbdisplay>
        </ngc-column>
        <ngc-column [column]="2">
          <ngc-label label='etd.atd'></ngc-label>
          &nbsp;
          &nbsp;
          &nbsp;
          <ngc-display [onlyTime]="true" formControlName="datAtd"></ngc-display>
        </ngc-column>
        <ngc-column [column]="2">
          <ngc-label label='eta.ata'></ngc-label>
          &nbsp;
          &nbsp;
          &nbsp;
          <ngc-display [onlyTime]="true" formControlName="datAta"></ngc-display>
        </ngc-column>
        <ngc-column [column]="2">
          <ngc-label label='flight.std'></ngc-label>
          &nbsp;
          &nbsp;
          &nbsp;
          <ngc-display [onlyTime]="true" formControlName="dateSTD"></ngc-display>
        </ngc-column>
      </ngc-row>

      <ngc-row>
        <ngc-column>
          <ngc-label value=''></ngc-label>
        </ngc-column>
      </ngc-row>

      <ngc-row>

        <ngc-column [column]="3">
          <ngc-label label='itfs.flight.no'></ngc-label>
          &nbsp;
          &nbsp;
          &nbsp;
          <ngc-display formControlName="customsFlightNumber"></ngc-display>
        </ngc-column>
        <ngc-column [column]="3">
          <ngc-label label='itfs.flight.date'></ngc-label>
          &nbsp;
          &nbsp;
          &nbsp;
          <ngc-display [onlyDate]="true" formControlName="customsFlightDate"></ngc-display>
        </ngc-column>

      </ngc-row>

      <ngc-row>
        <ngc-column>
          <ngc-label value=''></ngc-label>
        </ngc-column>
      </ngc-row>

      <ngc-row>
        <ngc-column column="12">
          <ngc-edittable formArrayName="retrieveConstraintCodeHistoryList" [pageable]="false" width="600">

            <ngc-data-column text="g.sNo" align="left" [width]="20" cellsAlign="left" dataField=""
              [cellsRenderer]="cellsRendererSno">
            </ngc-data-column>

            <ngc-data-column text="g.hawb.number" dataField="hawbNumber" align="left" [width]="60" cellsAlign="left">
            </ngc-data-column>

            <ngc-data-column text="g.type" dataField="customsType" align="left" [width]="60" cellsAlign="left">
            </ngc-data-column>

            <ngc-data-column text="exp.constraint.code" dataField="cc" align="left" [width]="60" cellsAlign="left">
            </ngc-data-column>

            <ngc-data-column text="message.log.received.date.time" dataField="recvDateTime" align="left" [width]="60"
              cellsAlign="left" type="displayDateTime">
            </ngc-data-column>

            <ngc-data-column text="g.remark" dataField="" align="left" [width]="100" cellsAlign="left">
            </ngc-data-column>

          </ngc-edittable>
        </ngc-column>
      </ngc-row>

    </ngc-container>
  </ngc-window>

  <ngc-window #houseInformationWindow [height]="screenHeight" [width]="screenWidth"
    title="title.maintain.house.manifest.information" [showCloseButton]="true" (close)="closeHouseInformationWindow()">

    <app-maintain-hawb-information [parentData]="forwardedDataToHouse" (searchInParent)="onSearch()">
    </app-maintain-hawb-information>
  </ngc-window>

  <ngc-window #awbInformationWindow [height]="screenHeight" [width]="screenWidth" title="Maintain ACCS AWB Information"
    [showCloseButton]="true" (close)="closeHouseInformationWindow()">

    <app-maintain-accs [parentData]="forwardedDataToShipment" (searchInParent)="onSearch()">
    </app-maintain-accs>
  </ngc-window>

  <ngc-report format='pdf' #reportWindow title="listprintconstraintcodereport"
     reportId='List_Print_Constraint_Code_Report' [reportParameters]='reportParameters'>
  </ngc-report>

  <ngc-report format='pdf' #reportWindow1 title="listprintconstraintcodereport"
     reportId='List_Print_Constraint_Code_ITFS_Report' [reportParameters]='reportParameters'>
  </ngc-report>

</form>