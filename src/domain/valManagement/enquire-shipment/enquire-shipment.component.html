<!-- Title -->
<ngc-titlebar title="val.EnquireShipmentList" (cancel)="onBack($event)" (clear)="clear()"></ngc-titlebar>

<!-- Form tag Begin for Capturing Request data -->
<form [formGroup]="EnquireShipmentForm">
  <ngc-container type="tab">
    <ngc-row>
      <ngc-column>
      </ngc-column>
    </ngc-row>
    <ngc-row>
      <ngc-column column="2">
        <ngc-label label="g.flight"></ngc-label>
      </ngc-column>
      <ngc-column column="2">
        <ngc-label label="g.date"></ngc-label>
      </ngc-column>
      <ngc-column column="2">
        <ngc-label label="val.checkin.from"></ngc-label>
      </ngc-column>
      <ngc-column column="2">
        <ngc-label label="val.checkin.to"></ngc-label>
      </ngc-column>
      <ngc-column column="2">
        <ngc-label label="val.checkout.from"></ngc-label>
      </ngc-column>
    </ngc-row>
    <ngc-row>
      <ngc-column column="2">
        <ngc-flightkeyinput accessEnableOn="r" formControlName="flightKey" [width]="120"></ngc-flightkeyinput>
      </ngc-column>
      <ngc-column column="2">
        <ngc-dateinput accessEnableOn="r" [width]="170" formControlName="checkInFlightDate"></ngc-dateinput>
      </ngc-column>
      <ngc-column column="2">
        <ngc-datetimeinput accessEnableOn="r" formControlName="checkInDateTimeFrom" [showTimeButton]="true"
          [showCalendarButton]="true">
        </ngc-datetimeinput>
      </ngc-column>
      <ngc-column column="2">
        <ngc-datetimeinput accessEnableOn="r" formControlName="checkInDateTimeTo"
          [min]='EnquireShipmentForm.controls.checkInDateTimeFrom.value' [showTimeButton]="true"
          [showCalendarButton]="true"></ngc-datetimeinput>
      </ngc-column>
      <ngc-column column="2">
        <ngc-datetimeinput accessEnableOn="r" formControlName="checkOutDateTimeFrom" [showTimeButton]="true"
          [showCalendarButton]="true">
        </ngc-datetimeinput>
      </ngc-column>
    </ngc-row>
    <ngc-row>
      <ngc-column column="2">
        <ngc-label label="val.checkout.to"></ngc-label>
      </ngc-column>
      <ngc-column column="2">
        <ngc-label label="val.checkout"></ngc-label>
      </ngc-column>
      <ngc-column column="2">
        <ngc-label label="g.awbNumber"></ngc-label>
      </ngc-column>
      <ngc-column column="2" feature="Val.HAWB">
        <ngc-label label="g.hawb.number"></ngc-label>
      </ngc-column>
      <ngc-column column="2">
        <ngc-label label="val.cat.a.bag"></ngc-label>
      </ngc-column>
      <ngc-column column="2">
        <ngc-label label=""></ngc-label>
      </ngc-column>
    </ngc-row>
    <ngc-row>
      <ngc-column column="2">
        <ngc-datetimeinput accessEnableOn="r" formControlName="checkOutDateTimeTo"
          [min]='EnquireShipmentForm.controls.checkOutDateTimeFrom.value' [showTimeButton]="true"
          [showCalendarButton]="true"></ngc-datetimeinput>
      </ngc-column>
      <ngc-column column="2">
        <ngc-dropdownlist accessEnableOn="r" [width]="170" formControlName="checkOutFlag"
          sourceId='Val_Mgmt$Val_CheckoutFlag'>
        </ngc-dropdownlist>
      </ngc-column>
      <ngc-column column="2">
        <ngc-awbinput accessEnableOn="r" formControlName="shipmentNumber" [width]="150"></ngc-awbinput>
      </ngc-column>
      <ngc-column column="2" feature="Val.HAWB">
        <ngc-input accessEnableOn="r" [width]="150" formControlName="hawbNumber"> </ngc-input>
      </ngc-column>
      <ngc-column column="2">
        <ngc-input [width]="150" formControlName="cataBagNumber" accessEnableOn="r" maxlength="30"></ngc-input>
      </ngc-column>
      <ngc-column column="2">
        <ngc-button accessEnableOn="r" (click)="onSearch()" iconType="search" value="g.search"></ngc-button>
      </ngc-column>
    </ngc-row>
  </ngc-container>
</form>

<!-- Form tag Begin for Result that show in list -->
<form [formGroup]="EnquireShipment">
  <ngc-container *ngIf="isTableFlg" type="tab">
    <ngc-row>
      <ngc-column>
        <ngc-edittable formArrayName="IncomingRequestArray" [pageable]="true">
          <ngc-data-column text="val.s.no" dataField="serialNo" [width]="50" cellsAlign="center" align="center">
          </ngc-data-column>
          <ngc-data-column text="awb.awbnumber" dataField="awb" [width]="100" cellsAlign="right">
          </ngc-data-column>
          <ngc-data-column feature="Val.HAWB" text="g.hawbNumber" dataField="hawbNumber" [width]="100"
            cellsAlign="right">
          </ngc-data-column>
          <ngc-data-column text="val.cat.a.bag" dataField="cat" [width]="100" cellsAlign="right"></ngc-data-column>
          <ngc-data-column text="val.storing.location" dataField="storingLocation" [width]="110" cellsAlign="right">
          </ngc-data-column>
          <ngc-data-column text="g.flight" dataField="flightNo" [width]="60"></ngc-data-column>
          <ngc-data-column text="g.date" type="displayDate" dataField="flightDate" [width]="80"></ngc-data-column>
          <ngc-data-column text="val.std.sta" dataField="std" [width]="80"></ngc-data-column>
          <ngc-data-column text="g.origin" dataField="originAirport" [width]="60"></ngc-data-column>
          <ngc-data-column text="val.dest" dataField="destinationAirport" [width]="70"></ngc-data-column>
          <ngc-data-column text="g.pieces" type="displayPieces" dataField="pieces" [width]="60" cellsAlign="right">
          </ngc-data-column>
          <ngc-data-column text="val.wgt.k" type="displayWeight" dataField="weight" [width]="60" cellsAlign="right">
          </ngc-data-column>
          <ngc-data-column text="val.nog" dataField="natureOfGoods" [width]="100" cellsAlign="right"></ngc-data-column>
          <ngc-data-column text="val.checkin" name="checkInInfo" align="center">
            <ngc-data-column text="val.user" dataField="checkInUser" [width]="50"></ngc-data-column>
            <ngc-data-column text="val.date.time" dataField="checkInDateTime" type="displayDateTime" [width]="130">
            </ngc-data-column>
          </ngc-data-column>
          <ngc-data-column text="val.checkout1" name="checkOutInfo" align="center">
            <ngc-data-column text="val.user" dataField="userId" [width]="50"></ngc-data-column>
            <ngc-data-column text="val.date.time" dataField="checkOutDateTime" type="displayDateTime" [width]="120">
            </ngc-data-column>
            <ngc-data-column text="g.status" dataField="status" [width]="180" cellsAlign="center"></ngc-data-column>
            <ngc-data-column text="g.details" dataField="Details" [width]="50" align="middle">
              <ng-template let-name="name" let-group="group">
                <ng-container [formGroupName]="group">
                   <ngc-link type="link" iconType="edit" (click)="onOpenWindow(group)"
                    *ngIf="this.EnquireShipment.getRawValue().IncomingRequestArray[group].checkOutDateTime !== null">
                  </ngc-link>
                </ng-container>
              </ng-template>
            </ngc-data-column>
          </ngc-data-column>

          <ngc-data-column text="g.edit" dataField="Edit" [width]="50" align="middle">
            <ng-template let-name="name" let-group="group">
                         <ng-container [formGroupName]="group">
                 <ngc-link (click)="onLinkClick(group)" type="link" iconType="edit">
                </ngc-link>
              </ng-container>
                          </ng-template>
          </ngc-data-column>
        </ngc-edittable>
      </ngc-column>
    </ngc-row>
  </ngc-container>
</form>
<form [formGroup]="CheckOutForm">
  <ngc-window [width]="1200" height='400' #displayCheckoutData title="val.checkout.data" [showCloseButton]="true">
    <ngc-container type="tab">
      <ngc-row>

        <ngc-column [column]="7">
          <ngc-label label="val.awb" *ngIf="!aflag"></ngc-label>
          <ngc-label label="val.cat.a.bag1" *ngIf="aflag"></ngc-label>
          <ngc-label label=""></ngc-label>
          <ngc-label value={{awbNumber}} *ngIf="!aflag"></ngc-label>
          <ngc-label value={{catabag}} *ngIf="aflag"></ngc-label>

        </ngc-column>
      </ngc-row>
      <ngc-row>
        <ngc-column>
          <ngc-display formControlName="importExportFlag" color="blue" emphasis='md'></ngc-display>
        </ngc-column>

      </ngc-row>
      <ngc-row>
        <ngc-column>
          <ngc-table>
            <thead>
              <tr>
                <th>
                  <ngc-label label="val.bag.sro.pieces" [width]="40"></ngc-label>

                </th>

                <th>
                  <ngc-label label="val.bag.sro.weight"></ngc-label>

                </th>

                <th *ngIf="this.CheckOutForm.get('importExportFlag').value == 'Export'">

                  <ngc-label label="val.accepted.by"></ngc-label>

                </th>
                <th *ngIf="this.CheckOutForm.get('importExportFlag').value == 'Import'">
                  <ngc-label label="val.issuedto"></ngc-label>

                </th>

                <th>
                  <ngc-label label="val.receivernricno"></ngc-label>

                </th>
                <th>
                  <ngc-label label="val.receivername"></ngc-label>

                </th>
                <th>
                  <ngc-label label="g.remarks"></ngc-label>

                </th>
                <th>
                  <ngc-label label="DO Number"></ngc-label>

                </th>
                <th>
                  <ngc-label label="DO Date"></ngc-label>

                </th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>
                  <ngc-display formControlName="sroPiecesOut" align="middle"></ngc-display>

                </td>

                <td>
                  <ngc-weightdisplay formControlName="sroWeightOut" align="center"></ngc-weightdisplay>
                </td>

                <td *ngIf="this.CheckOutForm.get('importExportFlag').value == 'Export'">
                  <ngc-display formControlName="acceptedBy" align="center"></ngc-display>

                </td>
                <td *ngIf="this.CheckOutForm.get('importExportFlag').value == 'Import'">
                  <ngc-display formControlName="acceptedBy" align="center"></ngc-display>

                </td>
                <td>
                  <ngc-display formControlName="senderIdentity" align="center"></ngc-display>

                </td>
                <td>
                  <ngc-display formControlName="senderName" align="center"></ngc-display>

                </td>

                <td>
                  <ngc-display formControlName="remarkOut"></ngc-display>

                </td>
                <td>
                  <ngc-display formControlName="deliveryOrderNo"></ngc-display>

                </td>
                <td>
                  <ngc-display formControlName="deliveryDate"></ngc-display>

                </td>


              </tr>
            </tbody>
          </ngc-table>
        </ngc-column>
      </ngc-row>



    </ngc-container>



  </ngc-window>
</form>