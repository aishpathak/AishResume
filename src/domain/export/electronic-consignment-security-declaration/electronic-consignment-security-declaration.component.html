<form [formGroup]="form">
  <ngc-titlebar title="export.ecsd.title" (save)="onSave($event)"></ngc-titlebar>
  <ngc-container type='tab'>
    <ngc-row>
      <ngc-column column='1.5'>
        <ngc-label label='awb.awbnumber'></ngc-label>
        <div>
          <ngc-awbinput accessEnableOn="r" formControlName="awbNumber" required></ngc-awbinput>
        </div>

      </ngc-column>
      <ngc-column column='1'>
        <ngc-label></ngc-label>
        <div>
          <ngc-button accessEnableOn="r" label='g.search' (click)='onSearch()'></ngc-button>
        </div>

      </ngc-column>
    </ngc-row>
  </ngc-container>

  <ngc-container type='tab' *ngIf="isSearch">
    <ngc-row>
      <ngc-column column='6'>
        <ngc-table>
          <thead>
            <tr>
              <th>
                <ngc-label align="center" label="export.ecsd.regulated.entity.category"></ngc-label>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>
                <ngc-display formControlName="rcarNumber"></ngc-display>
              </td>
            </tr>
          </tbody>

        </ngc-table>
      </ngc-column>
      <ngc-column column='1'></ngc-column>

      <ngc-column column='5'>
        <ngc-table>
          <thead>
            <tr>
              <th>
                <ngc-label align="center" label='export.ecsd.unique.consignment.identifier'></ngc-label>
              </th>
            </tr>

          </thead>
          <tbody>
            <tr>
              <td>
                <ngc-display formControlName="awb"></ngc-display>
              </td>
            </tr>
          </tbody>
        </ngc-table>
      </ngc-column>
    </ngc-row>

    <ngc-row>
      <ngc-column>
        <ngc-table>
          <thead>
            <tr>
              <th>
                <ngc-label label='export.ecsd.contents.consignment' align="center"></ngc-label>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>
                <ngc-checkbox formControlName="contentsOfConsignmentFlag"></ngc-checkbox>
                <ngc-label label='export.ecsd.consolidation'></ngc-label>
                <div>
                  <ngc-input [width]="1260" formControlName="contentsOfConsignment" [maxlength]="20"></ngc-input>
                </div>


              </td>
            </tr>
          </tbody>

        </ngc-table>
      </ngc-column>
    </ngc-row>

    <ngc-row>
      <ngc-column column='4'>
        <ngc-table>
          <thead>
            <tr>
              <th>
                <ngc-label label='g.origin' align="center"></ngc-label>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>
                <ngc-display formControlName="origin"></ngc-display>
              </td>
            </tr>
          </tbody>

        </ngc-table>
      </ngc-column>

      <ngc-column column='4'>
        <ngc-table>
          <thead>
            <tr>
              <th>
                <ngc-label label='g.destination' align="center"></ngc-label>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>
                <ngc-display formControlName="destination"></ngc-display>
              </td>
            </tr>
          </tbody>

        </ngc-table>


      </ngc-column>

      <ngc-column column='4'>
        <ngc-table>
          <thead>
            <tr>
              <th>
                <ngc-label label='export.ecsd.transfer.transit.points' align="center"></ngc-label>
              </th>
            </tr>

          </thead>
          <tbody>
            <tr>
              <td>
                <ngc-display formControlName="transferTransitPoints"></ngc-display>
              </td>
            </tr>
          </tbody>
        </ngc-table>
      </ngc-column>
    </ngc-row>

    <ngc-row>
      <ngc-column column='3'>
        <ngc-table>
          <thead>
            <tr>
              <th>
                <ngc-label label='export.ecsd.security.status' align="center"></ngc-label>
              </th>
            </tr>

          </thead>
          <tbody>
            <tr>
              <td>
                <ngc-dropdownlist formControlName="securityStatus" sourceId='Security$security_status' (select)='selectSecurity($event)'></ngc-dropdownlist>
              </td>
            </tr>
          </tbody>
        </ngc-table>
      </ngc-column>
      <ngc-column>
        <ngc-table>
          <thead>
            <tr>
              <th>
                <ngc-label label='export.ecsd.received.from' align="center"></ngc-label>
              </th>
              <th>
                <ngc-label label='export.ecsd.screening.method' align="center"></ngc-label>
              </th>
              <th>
                <ngc-label label='export.ecsd.grounds.for.exemption' align="center"></ngc-label>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>
                <ngc-dropdownlist [width]='200' formControlName="ecsdCsrcIdentifier" sourceId='Received_From$Received'
                  [disabled]="disableFlag"></ngc-dropdownlist>
              </td>
              <td>
                <ngc-dropdownlist formControlName="screeningMethod" [width]='260' [disabled]="screenMethod"
                  [multiSelect]="true" sourceId='exemption$groundexemption' displayMember="code" (select)="checkForAOM($event)"></ngc-dropdownlist>
              </td>
              <td>
                <ngc-dropdownlist [width]='260' [disabled]="exemption" sourceId='screenexemption$screenexemp'
                  displayMember="code" formControlName="groundsForExemption"></ngc-dropdownlist>
              </td>
            </tr>
          </tbody>
        </ngc-table>
      </ngc-column>
    </ngc-row>

    <ngc-row>
      <ngc-column column="12">
        <ngc-table>
          <thead>
            <tr>
              <th>
                <ngc-label label='export.ecsd.other.screening.methods' align="center"></ngc-label>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>
                <ngc-input formControlName="otherScreeningMethod" [width]="1260" [maxlength]="35"></ngc-input>
              </td>
            </tr>
          </tbody>

        </ngc-table>
      </ngc-column>
    </ngc-row>

    <ngc-row>
      <ngc-column column='6'>
        <ngc-table>
          <thead>
            <tr>
              <th colspan="2">
                <ngc-label label='export.ecsd.security.status.issued.by' align="center"></ngc-label>
              </th>

            </tr>
          </thead>
          <tbody>
            <tr>

              <td>
                <ngc-label label='export.ecsd.name.employeeid'></ngc-label>
              </td>

              <td>
                <ngc-input [width]="200" formControlName="securityStatusIssuedBy" [maxlength]='35'></ngc-input>
              </td>
            </tr>
          </tbody>

        </ngc-table>
      </ngc-column>
      <ngc-column column='1'></ngc-column>

      <ngc-column column='5'>
        <ngc-table>
          <thead>
            <tr>
              <th colspan='2'>
                <ngc-label label='export.ecsd.security.status.issued.on' align="center"></ngc-label>
              </th>

            </tr>

          </thead>
          <tbody>
            <tr>
              <td>

                <ngc-label label='g.date.and.time'></ngc-label>
              </td>
              <td>
                <ngc-datetimeinput [width]="200" [showTimeButton]="true" [showCalendarButton]="true" formControlName="securityStatusIssuedOn"></ngc-datetimeinput>
              </td>



            </tr>
          </tbody>
        </ngc-table>
      </ngc-column>
    </ngc-row>

    <ngc-row>
      <ngc-column align="right">
        <div>
          <ngc-button label='g.addRow' (click)="addRegulatedEntity()"></ngc-button>
          <ngc-button label='g.delete' (click)="onConfirmRegulated($event)"></ngc-button>
        </div>
      </ngc-column>
    </ngc-row>

    <ngc-row>
      <ngc-column>
        <ngc-table>
          <thead>
            <tr>
              <th colspan="5">
                <ngc-label label='export.ecsd.regulated.entity.category.label'
                  align="center"></ngc-label>
              </th>
            </tr>
            <tr>
              <th>

              </th>
              <th>
                <ngc-label label='export.ecsd.country.code' align="center"></ngc-label>
              </th>
              <th>
                <ngc-label label='export.ecsd.operator.status' align="center"></ngc-label>
              </th>
              <th>
                <ngc-label label='export.ecsd.rcar.number' align="center"></ngc-label>
              </th>
              <th>
                <ngc-label label='export.ecsd.expiry.date' align="center"></ngc-label>
              </th>
            </tr>
          </thead>
          <tbody formArrayName="regulatedList">
            <tr *ngFor="let item of form.controls.regulatedList.controls let index=index" [formGroupName]="index">
              <td>
                <ngc-checkbox formControlName="checkBox"></ngc-checkbox>
              </td>
              <td>
                <ngc-dropdownlist [width]="100" formControlName="countryCode" sourceId="COUNTRYDROPDOWN" sourceType="query"
                  displayMember="code"></ngc-dropdownlist>
              </td>
              <td>
                <ngc-input formControlName="regulatedEntity1" [width]="80" [maxlength]='2'></ngc-input>
              </td>
              <td>
                <ngc-input formControlName="regulatedEntity2" [width]="80" [maxlength]='8'></ngc-input>
              </td>
              <td>
                <ngc-input formControlName="regulatedEntity3" [width]="80" [maxlength]='4'></ngc-input>
              </td>
            </tr>
          </tbody>
        </ngc-table>
      </ngc-column>
    </ngc-row>
    <ngc-row>
      <ngc-column align="right">
        <div>
          <ngc-button label='g.addRow' (click)="addSecurityInfo()"></ngc-button>
          <ngc-button label='g.delete' (click)="onConfirmAdditional($event)"></ngc-button>
        </div>
      </ngc-column>
    </ngc-row>
    <ngc-row>
      <ngc-column column="12">
        <ngc-table>
          <thead>
            <tr>
              <th>

              </th>
              <th>
                <ngc-label label='export.ecsd.additional.security.info' align="center"></ngc-label>
              </th>
            </tr>
          </thead>
          <tbody formArrayName="additionalArray">
            <tr *ngFor="let item of form.controls.additionalArray.controls let index=index" [formGroupName]="index">
              <td>
                <ngc-checkbox formControlName="check"></ngc-checkbox>
              </td>
              <td>
                <ngc-input formControlName="ecsdSupplementaryInformation" [width]="1230" [maxlength]='35'></ngc-input>
              </td>
            </tr>
          </tbody>

        </ngc-table>
      </ngc-column>
    </ngc-row>
  </ngc-container>

</form>