<ngc-titlebar title='export.dls.plus.title' [disableSave]="finalizeFlagDisabled" (print)="printDLS()" (save)="globalSave(false)"
  (onClear)="clear(event)" (cancel)="onCancel()">
</ngc-titlebar>
<form [formGroup]="form">

  <ngc-container type='section'>
    <ngc-row>
      <ngc-column column="9">
        <ngc-container>
          <ngc-row>
            <ngc-column column="1">
              <ngc-label label='flight.Flight'></ngc-label>
              <div>
                <ngc-flightkeyinput accessEnableOn="r" [width]="90" formControlName="flightKey" upperCase="true"
                  required (modelChange)="onSearchChange()">
                </ngc-flightkeyinput>
              </div>
            </ngc-column>
            <ngc-column column="1.5">
              <ngc-label label='flight.date'></ngc-label>
              <div>
                <ngc-datetimeinput accessEnableOn="r" required width='100px' formControlName="flightOriginDate"
                  (modelChange)="onSearchChange()">
                </ngc-datetimeinput>
              </div>
            </ngc-column>
            <ngc-column column="1">
              <br>
              <div>
                <ngc-button accessEnableOn="r" value='g.search' (click)="searchDLS('search')"></ngc-button>
              </div>
            </ngc-column>
            <ngc-column column="2.5">
              <ngc-label label=' '></ngc-label>
              <div>
                <strong *ngIf="searchResponse && searchResponse.finalize" style="color:red;"> DLS Has Been Finalized -
                  <ngc-display formControlName="finalizeDate"></ngc-display>
                </strong>
              </div>
            </ngc-column>
            <ngc-column align="right" column="3">
              <br>
              <div *ngIf="showPage">
                <ngc-button value='Send_DLS' [disabled]="sendDlsFlagDisabled" accessSectionId="SENDDLS"
                  (click)="sendDLS()">
                </ngc-button>
                <ngc-button value='NFM' *ngIf='nfmFlag' (click)="NFM()"></ngc-button>
                <ngc-button value='Finalize_DLS' [disabled]="finalizeFlagDisabled" accessSectionId="Finalize_DLS"
                  (click)="finalizeDLS()"></ngc-button>
              </div>
            </ngc-column>
            <ngc-column column="1.5" *ngIf="showPage">
              <ngc-label label='export.dls.finalize.status'></ngc-label>
              <div>
                <ngc-display formControlName="dlsStatus"></ngc-display>
              </div>
            </ngc-column>
            <ngc-column column="1.5" *ngIf="showPage">
              <ngc-label label='export.dls.version'></ngc-label>
              <div>
                <ngc-display formControlName="dlsVersion"></ngc-display>
              </div>
            </ngc-column>
          </ngc-row>
          <ngc-row>
            <ngc-column>
              <ngc-label label=" "></ngc-label>
            </ngc-column>
          </ngc-row>
          <ngc-row *ngIf="showPage">
            <ngc-column>
              <div>
                <ngc-label label="flight.Flight"></ngc-label>
              </div>
              <ngc-display formControlName="flightKey"></ngc-display>
            </ngc-column>
            <ngc-column>
              <div>
                <ngc-label label="flight.date"></ngc-label>
              </div>
              <ngc-display [onlyDate]="true" formControlName="flightOriginDate"></ngc-display>
            </ngc-column>
            <ngc-column>
              <div>
                <ngc-label label="flight.std"></ngc-label>
              </div>
              <ngc-display formControlName="std"></ngc-display>
            </ngc-column>
            <ngc-column>
              <div>
                <ngc-label label="flight.etd"></ngc-label>
              </div>
              <ngc-display formControlName="etd"></ngc-display>
            </ngc-column>
            <ngc-column>
              <div>
                <ngc-label label="flight.segment"></ngc-label>
              </div>
              <ngc-display formControlName="routingInfo" color="blue" emphasis="md"></ngc-display>
            </ngc-column>
            <ngc-column>
              <div>
                <ngc-label label="aByCReg"></ngc-label>
              </div>
              <ngc-display formControlName="aircraftRegistration"></ngc-display>
            </ngc-column>
            <ngc-column>
              <ngc-label label='export.notoc.result.flightpaxcao'></ngc-label>
              <div>
                <ngc-display formControlName="flightType"></ngc-display>
              </div>
            </ngc-column>
            <ngc-column>
              <ngc-label label='wrkLst.Aircraft'></ngc-label>
              <div>
                <ngc-display formControlName="aircraftType"></ngc-display>
              </div>
            </ngc-column>
            <ngc-column>
              <div>
                <ngc-label label="dLS_Prec_Time"></ngc-label>
              </div>
              <ngc-display formControlName="dlsprecisionTime"></ngc-display>
            </ngc-column>
            <ngc-column class='text-center'>
              <div>
                <ngc-label label="g.weightCode"></ngc-label>
              </div>
              <ngc-dropdownlist formControlName="weightCode" sourceId='Dls_Export$Weight_Code_DLS' [width]="100"
                required>
              </ngc-dropdownlist>
            </ngc-column>
          </ngc-row>
        </ngc-container>
      </ngc-column>
      <ngc-column column="3" *ngIf="showPage">
        <ngc-datatable formArrayName="airlineLoadingInstructions" [pageable]="false" [enablePageSizeHeight]="false">
          <ngc-data-column text=" " dataField="loadingInstruction" cellsAlign="center"></ngc-data-column>
          <ngc-data-column text="g.pallet" dataField="totalPallet" cellsAlign="center"></ngc-data-column>
          <ngc-data-column text="g.container" dataField="totlContainer" cellsAlign="center"></ngc-data-column>
          <ngc-data-column text="g.bt" dataField="totalBt" cellsAlign="center"></ngc-data-column>
        </ngc-datatable>
      </ngc-column>
    </ngc-row>
  </ngc-container>
  <ngc-container type="tab" *ngIf="showPage">
    <ngc-row>
      <ngc-column column="2" align="left">
        <div>
          <ngc-label label="flight.segment"></ngc-label>
        </div>
        <ngc-dropdownlist sourceId="FLIGHTSEGMENT" [width]='70' [autoSelect]="true" [noBlank]="true"
          formControlName='flightSegmentId' [noCache]="true" [sourceParameters]="sourceIdSegmentDropdown"
          sourceType="query">
        </ngc-dropdownlist>
      </ngc-column>
      <ngc-column column="1" align="right">
        <div>
          <ngc-label label=""></ngc-label>
        </div>
        <ngc-button value='NOTOCULD/TrolleyInfo' (click)="notocUldMtBtPopUp()"></ngc-button>
      </ngc-column>
      <ngc-column column="5" align="right">
        <div>
          <ngc-label label=""></ngc-label>
        </div>
      </ngc-column>
      <ngc-column column="2" align="right">
        <div>
          <ngc-label label="Man_Completed_By"></ngc-label>
        </div>
        <ngc-display formControlName="manifestCompletedBy"></ngc-display>
      </ngc-column>
      <ngc-column column="2" align="right">
        <div>
          <ngc-label label="Man_Completed_At"></ngc-label>
        </div>
        <ngc-display formControlName="manifestCompletedAt"></ngc-display>
      </ngc-column>
    </ngc-row>
  </ngc-container>

  <ngc-container formGroupName="dls" *ngIf="showPage">
    <ngc-row>
      <ngc-column>
        <ngc-tabs (select)="onTabSelect($event)">
          <ngc-tab-card title="g.uld"  [indicatorIconType]="uldErrorFlag" indicatorIconColor="red">
            <ngc-container>
              <ngc-row>
                <ngc-column>
                  <ngc-table>
                    <thead>
                      <tr>
                        <th>
                          <ngc-label label=""></ngc-label>
                        </th>
                        <th>
                          <ngc-label label=""></ngc-label>
                        </th>
                        <th width='200'>
                          <ngc-label label="uld"></ngc-label>
                        </th>
                        <th>
                          <ngc-label label="con"></ngc-label>
                        </th>
                        <th>
                          <ngc-label label="hgt"></ngc-label>
                        </th>
                        <th>
                          <ngc-label label="uld.phc"></ngc-label>
                        </th>
                        <th>
                          <ngc-label label="ECC"></ngc-label>
                        </th>
                        <th>
                          <ngc-label label="TT_TTT"></ngc-label>
                        </th>
                        <th>
                          <ngc-label label="gross_Wgt"></ngc-label>
                        </th>
                        <th>
                          <ngc-label label="man_Wgt"></ngc-label>
                        </th>
                        <th>
                          <ngc-label label="auto_Wgt"></ngc-label>
                        </th>
                        <th>
                          <ngc-label label="wgt_Diff"></ngc-label>
                        </th>
                        <th>
                          <ngc-label label="dryIce_Wgt"></ngc-label>
                        </th>
                        <th>
                          <ngc-label label="tare_Wgt"></ngc-label>
                        </th>
                        <th>
                          <ngc-label label="net_wgt"></ngc-label>
                        </th>
                        <th>
                          <ngc-label label="export.notoc.osl.shc"></ngc-label>
                        </th>
                        <th colspan="2">
                          <ngc-label label="accessory"></ngc-label>
                        </th>
                       <!-- <th>
                          <ngc-label label=""></ngc-label>
                        </th> -->
                        <th>
                          <ngc-label label="pgy"></ngc-label>
                        </th>
                        <th>
                          <ngc-label label="sb"></ngc-label>
                        </th>
                        <th>
                          <ngc-label label="rob"></ngc-label>
                        </th>
                        <th>
                          <ngc-label label="Use_as_trolley"></ngc-label>
                        </th>
                        <th>
                          <ngc-label label="dls.remarks"></ngc-label>
                        </th>
                        <th>
                          <ngc-label label="Release_by"></ngc-label>
                        </th>
                        <th>
                          <ngc-label label="Release_time"></ngc-label>
                        </th>
                        <th>
                          <ngc-label label="uld.priority"></ngc-label>
                        </th>
                      </tr>
                    </thead>
                    <tbody formArrayName="uldTrolleyList">
                      <ng-container>
                        <tr *ngFor="let item of form.controls.dls.controls.uldTrolleyList.controls; let index=index"
                          [formGroupName]="index">
                          <td>
                            <ngc-display align="center" cellsAlign="center" value={{index+1}}></ngc-display>
                          </td>
                          <td>
                            <ngc-checkbox formControlName="select"></ngc-checkbox>
                          </td>
                          <td height='200'>
                            <ngc-container>
                              <ngc-row>
                                <ngc-column>
                                  <ngc-input [width]='110' [disabled]="true" *ngIf="item.get('flagCRUD').value !== 'C'"
                                    formControlName="uldTrolleyNumber"></ngc-input>
                                  <ngc-uldinput [width]='110' *ngIf="item.get('flagCRUD').value === 'C'"
                                    (ngModelChange)="getUldTrolleyNumber($event, index,item.get('flagCRUD').value, false)"
                                    formControlName="uldTrolleyNumber" required upperCase='true'></ngc-uldinput>
                                  <ng-container *ngIf="item.get('isValueChanged').value">
                                    <ng-container *ngIf="item.get('showTimer').value">
                                      <ngc-icon type="refresh" value="Y" trueColor="inherit"
                                        *ngIf="item.get('flagCRUD').value === 'C'">
                                      </ngc-icon>
                                    </ng-container>
                                    <ng-container *ngIf="!item.get('showTimer').value">
                                      <ngc-icon *ngIf="item.get('showIcon').value" type="yesno" value="Y">
                                      </ngc-icon>
                                      <ngc-icon *ngIf="!item.get('showIcon').value" type="yesno" value="N">
                                      </ngc-icon>
                                    </ng-container>
                                  </ng-container>
                                </ngc-column>
                              </ngc-row>
                            </ngc-container>
                          </td>
                          <td>
                            <ngc-lov [noList]="true" formControlName="contentCode" placeHolder="placeholder.contentcode"
                              sourceId='LOV_WH_CONTENTCODE' title='uld.contentcode' [width]="40" dataField='code'>
                              <ngc-data-column text="uld.contentcode" dataField="code" [width]="80"></ngc-data-column>
                            </ngc-lov>
                            <!-- <ngc-dropdownlist formControlName="contentCode" sourceType="query" sourceId='WH_CONTENTCODE' [width]="40" required></ngc-dropdownlist> -->
                          </td>
                          <td>
                            <ngc-lov [noList]="true" formControlName="heightCode"
                              (ngModelChange)="addContouCodeWeight($event, index,item.get('flagCRUD').value)"
                              placeHolder="placeholder.heightcode" sourceId='LOV_CONTOURCODE' title='uld.heightcode' [width]="60"
                              dataField='code'>
                              <ngc-data-column text="uld.heightcode" dataField="code" [width]="80"></ngc-data-column>
                            </ngc-lov>
                            <!-- <ngc-dropdownlist sourceId="CONTOURCODE" [width]='60' (ngModelChange)="addContouCodeWeight($event, index)" sourceType="query"
                              formControlName='heightCode' required></ngc-dropdownlist> -->
                          </td>
                          <td>
                            <ngc-checkbox formControlName="usedForPerishableContainer" accessSectionId="PHC_CHECK_BOX">
                            </ngc-checkbox>
                          </td>
                          <td>
                            <ngc-lov [noList]="true" formControlName="usedForExpressCourierContainer"
                              sourceId='LOV_ECC_HANDLINGAREA' title='ECC' [width]="60" dataField='code'>
                              <ngc-data-column text="ECC" dataField="code" [width]="80"></ngc-data-column>
                            </ngc-lov>

                            <!-- <ngc-dropdownlist sourceType="query" sourceId='ECC_HANDLINGAREA' formControlName="usedForExpressCourierContainer" [width]="60"></ngc-dropdownlist> -->
                          </td>
                          <td>
                            <ngc-dropdownlist sourceId='Dls_Export$Transfer_types'
                              (ngModelChange)="onTransferType($event, index,item.get('flagCRUD').value)"
                              formControlName="transferType" [width]="30">
                            </ngc-dropdownlist>
                          </td>
                          <td>
                            <ngc-numberinput negativeSymbol=" " formControlName="actualWeight" [digits]="7"
                              decimalDigits="0" [width]="50"></ngc-numberinput>
                          </td>
                          <td>
                            <ngc-weightdisplay align="center" cellsAlign="center" formControlName="manifestWeight">
                            </ngc-weightdisplay>
                          </td>
                          <td>
                            <ngc-display align="center" cellsAlign="center" formControlName="icsGrossWeight">
                            </ngc-display>
                          </td>
                          <td>
                            <ngc-weightdisplay align="center" cellsAlign="center" formControlName="weightDifference">
                            </ngc-weightdisplay>
                          </td>
                          <td>
                            <ngc-numberinput negativeSymbol=" " formControlName="dryIceWeight" [digits]="7"
                              decimalDigits="0" [width]='50'></ngc-numberinput>
                          </td>
                          <td>
                            <ngc-numberinput negativeSymbol=" " formControlName="tareWeight" [digits]="7"
                              decimalDigits="0" [width]='50'></ngc-numberinput>
                          </td>
                          <td>
                            <ngc-input [disabled]="true" formControlName="netWeight" [width]='50'></ngc-input>
                          </td>
                          <td>
                            <ngc-shcinput upperCase="true" [width]="50" [maxItems]="9" formArrayName="shcs"
                              dataField="specialHandlingCode"></ngc-shcinput>
                          </td>
                          <td formArrayName="accessoryList">
                        <tr *ngFor="let accessory of item.controls.accessoryList.controls; let accessoryIndex=index"
                          [formGroupName]="accessoryIndex">
                          <td>
                            <ngc-dropdownlist displayMember="parameter1" formControlName="accessoryTypeId"
                              sourceId='ACCESSORY_TYPE' sourceType="query" [width]="50" [autoSelect]="true" required
                              (select)="onAccessoryChange($event, index, accessoryIndex)">
                            </ngc-dropdownlist>
                          </td>
                          <!-- <td>
                                <ngc-input upperCase="true" formControlName="accessoryPartId" [width]="30"></ngc-input>
                              </td> -->
                          <td>
                            <ngc-input upperCase="true" formControlName="quantity" [width]="30"></ngc-input>
                          </td>
                          <td align="center">
                            <ngc-link (linkClick)="deleteAccesory(index,accessoryIndex)" hide-value="true">
                              <ngc-icon type="delete" value="true" true-color="grey"></ngc-icon>
                            </ngc-link>
                          </td>
                        </tr>

                        </td>
                        <td>
						<strong style="font-size:1vw">
                            </strong>
                          <ngc-link (linkClick)="addAccessory(index,accessoryIndex)" hide-value="true">
                            <ngc-icon type="add" value="true" true-color="grey"></ngc-icon>
                          </ngc-link>
                        </td>
                        <td>
						<strong style="font-size:1vw">
                              <ngc-display align="center" cellsAlign="center" formControlName="noOfPiggyback">
                              </ngc-display>
                            </strong>
                            <ngc-display align="center" cellsAlign="center" value=" ">
                            </ngc-display>
                          <ngc-link *ngIf="item.get('palletTypeFlag').value == 'P'" [disabled]="finalizeFlagDisabled"
                            (click)="addULDForPiggyBack(index)" hide-value="true">
                            <ngc-icon type="add" value="true" true-color="grey"></ngc-icon>
                          </ngc-link>

                          <!-- <ngc-display align="center" cellsAlign="center" formControlName="pgy"></ngc-display> -->
                        </td>
                        <td>
                          <ngc-checkbox formControlName="usedAsStandBy"></ngc-checkbox>
                        </td>
                        <td>
                          <ngc-checkbox formControlName="usedForTransitUse"></ngc-checkbox>
                        </td>
                        <td>
                          <ngc-checkbox formControlName="usedAsTrolley"></ngc-checkbox>
                        </td>
                        <td>
                          <ngc-input [width]='150' maxlength="60" formControlName="remarks" upperCase='true'>
                          </ngc-input>
                        </td>
                        <td>
                          <ngc-display align="center" cellsAlign="center" formControlName="handedOverBy"></ngc-display>
                        </td>
                        <td>
                          <ngc-display align="center" cellsAlign="center" formControlName="completedAt"></ngc-display>
                        </td>
                        <td>
                          <ngc-numberinput negativeSymbol=" " formControlName="priorityOfLoading" [digits]="7"
                            decimalDigits="0" [width]='60'></ngc-numberinput>
                        </td>
                        </tr>
                      </ng-container>
                    </tbody>
                  </ngc-table>
                </ngc-column>
              </ngc-row>
              <ngc-row>
                <ngc-column align="center">
                  <ng-container *ngIf="this.searchResponse.dls.uldTrolleyList">
                    <ngc-button value='Add_ULD_TAB' [disabled]="finalizeFlagDisabled" (click)="addULD(false)">
                    </ngc-button>
                  </ng-container>
                  <ngc-button value='g.delete' [disabled]="finalizeFlagDisabled" (click)="deleteUld()"></ngc-button>
                  <ngc-button value='Fetch_Weight' [disabled]="finalizeFlagDisabled" (click)="fetchWeight()">
                  </ngc-button>
                </ngc-column>
              </ngc-row>
            </ngc-container>
          </ngc-tab-card>
          <ngc-tab-card title="g.bulk" [indicatorIconType]="bulkErrorFlag" indicatorIconColor="red">
            <ngc-container>
              <ngc-row>
                <ngc-column>
                  <ngc-table>
                    <thead>
                      <tr>
                        <th>
                          <ngc-label label=""></ngc-label>
                        </th>
                        <th>
                          <ngc-label label=""></ngc-label>
                        </th>
                        <th>
                          <ngc-label label="g.bulk"></ngc-label>
                        </th>
                        <th>
                          <ngc-label label="con"></ngc-label>
                        </th>
                        <th>
                          <ngc-label label="uld.phc"></ngc-label>
                        </th>
                        <th>
                          <ngc-label label="ECC"></ngc-label>
                        </th>
                        <th>
                          <ngc-label label="man_Wgt_Bulk"></ngc-label>
                        </th>
                        <th>
                          <ngc-label label="net_Wgt_Bulk"></ngc-label>
                        </th>
                        <th>
                          <ngc-label label="wgt_Diff_Bulk"></ngc-label>
                        </th>
                        <th>
                          <ngc-label label="export.notoc.osl.shc"></ngc-label>
                        </th>
                        <th>
                          <ngc-label label="dls.remarks"></ngc-label>
                        </th>
                        <th>
                          <ngc-label label="Release_by"></ngc-label>
                        </th>
                        <th>
                          <ngc-label label="Release_time"></ngc-label>
                        </th>
                        <th>
                          <ngc-label label="uld.priority"></ngc-label>
                        </th>
                      </tr>
                    </thead>
                    <tbody formArrayName="trolleyList">
                      <ng-container>
                        <tr *ngFor="let item of form.controls.dls.controls.trolleyList.controls; let index=index"
                          [formGroupName]="index">

                          <td>
                            <ngc-display align="center" cellsAlign="center" value={{index+1}}></ngc-display>
                          </td>
                          <td>
                            <ngc-checkbox formControlName="select"></ngc-checkbox>
                          </td>
                          <td>
                            <ngc-input [width]='110' [disabled]="true" *ngIf="item.get('flagCRUD').value !== 'C'"
                              formControlName="uldTrolleyNumber"></ngc-input>
                            <ngc-alphanuminput [width]='110' *ngIf="item.get('flagCRUD').value === 'C'"
                              formControlName="uldTrolleyNumber" required upperCase='true'
                              (ngModelChange)="getUldTrolleyNumber($event, index,item.get('flagCRUD').value, true)">
                            </ngc-alphanuminput>
                            <ng-container *ngIf="item.get('isValueChanged').value">
                              <ng-container *ngIf="item.get('showTimer').value">
                                <ngc-icon type="refresh" value="Y" trueColor="inherit"
                                  *ngIf="item.get('flagCRUD').value === 'C'">
                                </ngc-icon>
                              </ng-container>
                              <ng-container *ngIf="!item.get('showTimer').value">
                                <ngc-icon *ngIf="item.get('showIcon').value" type="yesno" value="Y">
                                </ngc-icon>
                                <ngc-icon *ngIf="!item.get('showIcon').value" type="yesno" value="N">
                                </ngc-icon>
                              </ng-container>
                            </ng-container>
                          </td>
                          <td>
                            <ngc-lov [noList]="true" formControlName="contentCode" placeHolder="placeholder.contentcode"
                              sourceId='LOV_WH_CONTENTCODE' title='uld.contentcode' [width]="40" dataField='code'>
                              <ngc-data-column text="uld.contentcode" dataField="code" [width]="80"></ngc-data-column>
                            </ngc-lov>
                            <!-- <ngc-dropdownlist formControlName="contentCode" sourceType="query" sourceId='WH_CONTENTCODE' [width]="50" required></ngc-dropdownlist> -->
                          </td>
                          <td>
                            <ngc-checkbox formControlName="usedForPerishableContainer" accessSectionId="PHC_CHECK_BOX">
                            </ngc-checkbox>
                          </td>
                          <td>
                            <ngc-lov [noList]="true" formControlName="usedForExpressCourierContainer"
                              sourceId='LOV_ECC_HANDLINGAREA' title='ECC' [width]="60" dataField='code'>
                              <ngc-data-column text="ECC" dataField="code" [width]="80"></ngc-data-column>
                            </ngc-lov>
                            <!-- <ngc-dropdownlist sourceType="query" sourceId='ECC_HANDLINGAREA' formControlName="usedForExpressCourierContainer" [width]="80"></ngc-dropdownlist> -->
                          </td>
                          <td>
                            <ngc-weightdisplay align="center" cellsAlign="center" formControlName="manifestWeight">
                            </ngc-weightdisplay>
                          </td>
                          <td>
                            <ngc-numberinput negativeSymbol=" " formControlName="actualWeight" [digits]="7"
                              decimalDigits="0" [width]='60'></ngc-numberinput>
                          </td>
                          <td>
                            <ngc-weightdisplay align="center" cellsAlign="center" formControlName="weightDifference">
                            </ngc-weightdisplay>
                          </td>
                          <td>
                            <ngc-shcinput upperCase="true" [width]="50" [maxItems]="9" formArrayName="shcs"
                              dataField="specialHandlingCode"></ngc-shcinput>
                          </td>
                          <td>
                            <ngc-input [width]='340' formControlName="remarks" maxlength="60" upperCase='true'>
                            </ngc-input>
                          </td>
                          <td>
                            <ngc-display align="center" cellsAlign="center" formControlName="handedOverBy">
                            </ngc-display>
                          </td>
                          <td>
                            <ngc-display align="center" cellsAlign="center" formControlName="completedAt"></ngc-display>
                          </td>
                          <td>
                            <ngc-numberinput negativeSymbol=" " formControlName="priorityOfLoading" [digits]="7"
                              decimalDigits="0" [width]='60'></ngc-numberinput>
                          </td>
                        </tr>
                      </ng-container>
                    </tbody>
                  </ngc-table>
                </ngc-column>
              </ngc-row>
              <ngc-row>
                <ngc-column align="center">
                  <ngc-button value='Add_Trolley' [disabled]="finalizeFlagDisabled" (click)="addTrolley()"></ngc-button>
                  <ngc-button value='g.delete' [disabled]="finalizeFlagDisabled" (click)="deleteTrolley()"></ngc-button>
                </ngc-column>
              </ngc-row>
            </ngc-container>
          </ngc-tab-card>
          <ngc-tab-card title="OSI" [indicatorIconType]="osiErrorFlag" indicatorIconColor="red">
            <ngc-container type="heading">
              <ngc-row>
                <ngc-column align="right">
                  <ngc-button value='addOsi' [disabled]="finalizeFlagDisabled" (click)="addOsi()"></ngc-button>
                </ngc-column>
              </ngc-row>
              <ngc-row>
                <ngc-column>
                  <ngc-table>
                    <thead>
                      <tr>
                        <th>
                          <ngc-label label="g.sNo"></ngc-label>
                        </th>
                        <th>
                          <ngc-label label="export.details"></ngc-label>
                        </th>
                        <th>
                          <ngc-label label="RampCheckInd"></ngc-label>
                        </th>
                        <th>
                          <ngc-label label="g.createdBy"></ngc-label>
                        </th>
                        <th>
                          <ngc-label label="g.created.date"></ngc-label>
                        </th>
                        <th>
                          <ngc-label label="g.action"></ngc-label>
                        </th>
                      </tr>
                    </thead>
                    <tbody formArrayName="osiDisplayList">
                      <tr *ngFor="let item of form.controls.dls.controls.osiDisplayList.controls; let osiIndex=index"
                        [formGroupName]="osiIndex">
                        <td>
                          <!-- <ngc-display formControlName="transactionSequenceNo" [width]="50" *ngIf="!form.get(['dls','osiDisplayList',osiIndex,'manual']).value"></ngc-display> -->
                          <ngc-input maxlength="3" formControlName="transactionSequenceNo" [width]="50"
                            *ngIf="form.get(['dls','osiDisplayList',osiIndex,'manual']).value"></ngc-input>
                        </td>
                        <td>
                          <!-- <ngc-display formControlName="detail" [width]="50" *ngIf="!form.get(['dls','osiDisplayList',osiIndex,'manual']).value"></ngc-display> -->
                          <ngc-input upperCase="true" *ngIf="form.get(['dls','osiDisplayList',osiIndex,'manual']).value"
                            formControlName="detail" maxlength="61" [width]="600" required></ngc-input>
                        </td>
                        <td>
                          <ngc-checkbox formControlName="rampIndicate" [width]="20"></ngc-checkbox>
                        </td>
                        <td>
                          <ngc-display upperCase="true" formControlName="createdBy" [width]="60" required></ngc-display>
                        </td>
                        <td>
                          <ngc-display upperCase="true" [onlyDate]="true" formControlName="createdOn" [width]="60"
                            required>
                          </ngc-display>
                        </td>
                        <td>
                          <ngc-link *ngIf="form.get(['dls','osiDisplayList',osiIndex,'manual']).value"
                            (linkClick)="deleteOSI(osiIndex)" hide-value="true">
                            <ngc-icon type="delete" value="true" true-color="grey"></ngc-icon>
                          </ngc-link>
                        </td>
                      </tr>
                    </tbody>
                  </ngc-table>
                </ngc-column>
              </ngc-row>
              <ngc-row>
                <ngc-column align="left">
                  <ngc-label label="g.system"></ngc-label>
                </ngc-column>
              </ngc-row>
              <ngc-row>
                <ngc-column>
                  <ngc-table>
                    <tbody formArrayName="osiList">
                      <tr *ngFor="let item of form.controls.dls.controls.osiList.controls; let osiListIndex=index"
                        [formGroupName]="osiListIndex">
                        <td>
                          <ngc-display formControlName="transactionSequenceNo" [width]="50"
                            *ngIf="!form.get(['dls','osiList',osiListIndex,'manual']).value"></ngc-display>
                          <!-- <ngc-input formControlName="transactionSequenceNo" [width]="50" *ngIf="form.get(['dls','systemOsiList',osiIndex,'manual']).value"></ngc-input> -->
                        </td>
                        <td>
                          <ngc-display formControlName="detail" [width]="600"
                            *ngIf="!form.get(['dls','osiList',osiListIndex,'manual']).value"></ngc-display>
                          <!-- <ngc-input upperCase="true" *ngIf="form.get(['dls','osiList',systemOsiList,'manual']).value" formControlName="detail" maxlength="65"
                              [width]="600" required></ngc-input> -->
                        </td>
                        <td>
                          <ngc-checkbox formControlName="rampIndicate" [width]="20"></ngc-checkbox>
                        </td>
                        <td>
                          <ngc-display upperCase="true" formControlName="createdBy" [width]="60" required></ngc-display>
                        </td>
                        <td>
                          <ngc-display upperCase="true" [onlyDate]="true" formControlName="createdOn" [width]="60"
                            required>
                          </ngc-display>
                        </td>
                        <td>

                        </td>
                      </tr>
                    </tbody>
                  </ngc-table>
                </ngc-column>
              </ngc-row>
            </ngc-container>
          </ngc-tab-card>
        </ngc-tabs>
      </ngc-column>
    </ngc-row>
   
  </ngc-container>
  <ngc-container *ngIf="showPage">
    <ngc-row>
      <ngc-column>
        <ngc-table>
          <thead>
            <tr>
              <th>
                <ngc-label label="g.sNo"></ngc-label>
              </th>
              <th>
                <ngc-label label="export.offload.info"></ngc-label>
              </th>
            </tr>
          </thead>
          <tbody formArrayName="offloadUldList">
            <ng-container>
              <tr *ngFor="let item of form.controls.offloadUldList.controls; let offloadUldindex=index"
                [formGroupName]="offloadUldindex">
                <td>
                  <ngc-display align="center" cellsAlign="center" value={{offloadUldindex+1}}></ngc-display>
                </td>
                <td>
                  <ngc-display formControlName="offloadDetail"></ngc-display>
                </td>
              </tr>
            </ng-container>
          </tbody>
        </ngc-table>
      </ngc-column>
    </ngc-row>
  </ngc-container>

  <ngc-footer *ngIf="showPage">
    <ngc-container type="tab">
      <ngc-row>
        <ngc-column align="left">
          <ngc-button accessEnableOn="r" value='0Assign_Uld_Trolley' (click)="assignULDTrolleytoFlight()"></ngc-button>
          <ngc-button accessEnableOn="r" value='1EDI_Message' (click)="ediMessage()"></ngc-button>
          <ngc-button accessEnableOn="r" value='2NOTOC' (click)="notoc()"></ngc-button>
          <ngc-button accessEnableOn="r" value='3DLS_Variance' (click)="dlsShortcut()"></ngc-button>
          <ngc-button accessEnableOn="r" label="4ECC-Flight Planner List" (click)='onClickFlightPlanner()'>
          </ngc-button>
          <ngc-button accessEnableOn="r" value='5ULD Weight Statement' (click)="uldWeightStatement($event,index)">
          </ngc-button>
        </ngc-column>
      </ngc-row>
    </ngc-container>
  </ngc-footer>

  <ngc-window #insertionULDWindow [title]="uldTitle" [showCloseButton]="false" [width]="500" height='400'
    (close)="onCloseWindow($event)">
    <ngc-container formGroupName="insertDLS" type="tab">
      <ngc-row>
        <ngc-column>
          <ngc-container type="tab">
            <ngc-row>
              <ngc-column>
                <ngc-label label="export.update.dls.piggy.back"></ngc-label>
              </ngc-column>
              <ngc-column>
                <ngc-label label="export.update.dls.base.uld"></ngc-label>
              </ngc-column>
              <ngc-column>
                <ngc-display upperCase="true" formControlName="baseUld">
                </ngc-display>
              </ngc-column>
            </ngc-row>
            <ngc-row>
              <ngc-column>
                <ngc-table>
                  <thead>
                    <tr>
                      <th>
                        <ngc-label label="g.sNo"></ngc-label>
                      </th>
                      <th>
                        <ngc-label label="export.uld.piggy.back.uld"></ngc-label>
                      </th>
                      <th>
                        <ngc-label label="g.action"></ngc-label>
                      </th>
                  </thead>
                  <tbody formArrayName="piggyBackUldList">
                    <tr *ngFor="let piggyBack of form.get('insertDLS.piggyBackUldList').controls; let piggyIndex=index"
                      [formGroupName]="piggyIndex">
                      <!-- <td *ngIf="form.get(['insertDLS','piggyBackUldList',piggyIndex,'flagCRUD']).value === 'R' || form.get(['insertDLS','piggyBackUldList',piggyIndex,'flagCRUD']).value === 'U'">
                        <ngc-display formControlName="uldNumber"></ngc-display>
                      </td> -->
                      <td>
                        <ngc-display align="center" cellsAlign="center" value={{piggyIndex+1}}></ngc-display>
                      </td>
                      <td>
                        <!-- <ngc-input [disabled]="true" *ngIf="piggyBack.get('select').value" formControlName="uldNumber"></ngc-input> -->
                        <ngc-input upperCase="true" formControlName="uldNumber"
                          (ngModelChange)="addUldPalletWeight($event,piggyIndex)" required></ngc-input>
                      </td>
                      <td align="center">
                        <ngc-link (linkClick)="deletePiggyback(piggyIndex)" hide-value="true">
                          <ngc-icon type="delete" value="true" true-color="grey"></ngc-icon>
                        </ngc-link>
                      </td>
                    </tr>
                  </tbody>
                </ngc-table>
              </ngc-column>
            </ngc-row>
          </ngc-container>
        </ngc-column>
      </ngc-row>
    </ngc-container>
    <ngc-window-footer>
      <ngc-container type="tab">
        <ngc-row>
          <ngc-column align="center">
            <ngc-column align="center">
              <ngc-button value='g.add.more' (click)="addPiggyBack()"></ngc-button>
            </ngc-column>
            <ngc-button value="g.ok" (click)="closePopup() "></ngc-button>
          </ngc-column>
        </ngc-row>
      </ngc-container>
    </ngc-window-footer>
  </ngc-window>

  <ngc-window #notocUldMtBt [title]="notocTitle" [showCloseButton]="true" [width]="500" height='300'
    (close)="onCloseWindow($event)">
    <ngc-container type="tab">
      <ngc-row>
        <ngc-column>
          <ngc-table>
            <thead>
              <tr>
                <th>
                  <ngc-label label="uld.uld.trolley"></ngc-label>
                </th>
                <th>
                  <ngc-label label="g.shc"></ngc-label>
                </th>
              </tr>
            </thead>
            <tbody formArrayName="notocMtBt">
              <ng-container>
                <tr *ngFor="let item of form.controls.notocMtBt.controls; let index=index" [formGroupName]="index">
                  <td>
                    <ngc-display align="center" cellsAlign="center" formControlName="trolleyNo"></ngc-display>
                  </td>
                  <td>
                    <ngc-display align="center" cellsAlign="center" formControlName="notocShc"></ngc-display>
                  </td>
                </tr>
              </ng-container>
            </tbody>
          </ngc-table>
        </ngc-column>
      </ngc-row>
    </ngc-container>
  </ngc-window>
  <ngc-report #reportWindow1 dataSource='transactional'  title="g.report"  reportId='printdls'
     [reportParameters]='reportParameters'></ngc-report>
  <ngc-report format='xls' dataSource='transactional'  #reportWindow2 title="g.report"  reportId='ULD_WeightStatement'
     [reportParameters]='reportParameters'></ngc-report>
</form>