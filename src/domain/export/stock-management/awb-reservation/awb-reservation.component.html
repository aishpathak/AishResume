<ngc-titlebar type="header" title="export.awb.reservation.title" (save)="onSave()">
</ngc-titlebar>
<form [formGroup]="awbReservationGroup">
  <ngc-container type="sectiontop">
    <ngc-row>
      <ngc-column>
        <ngc-label label=' '></ngc-label>
      </ngc-column>
    </ngc-row>
    <ngc-row>
      <ngc-column column="6">
        <ngc-container>
          <ngc-row>
            <ngc-column>
              <ngc-label label='export.awb.reservation.shipper.information'></ngc-label>
            </ngc-column>
          </ngc-row>
          <ngc-row>
            <ngc-column column="8" [grid36]="true">
              <ngc-label label="flight.carrier"></ngc-label>
              <div>
                <ngc-lov required formControlName="carrierCode" sourceId='CARRIER' title='g.airline'
                  displayMember="code" dataField='code' [width]="90" uppercase='true'
                  (select)="onCarrierCodeSelect($event)">
                  <ngc-data-column text="g.carrier" dataField="code" [width]="100"></ngc-data-column>
                  <ngc-data-column text="g.description" dataField="desc" [width]="150"></ngc-data-column>
                </ngc-lov>
              </div>
            </ngc-column>
            <ngc-column column="8" [grid36]="true">
              <ngc-label label="export.awb.reservation.stock.type"></ngc-label>
              <div>
                <ngc-dropdownlist required formControlName="stockId" sourceId="AWB_RESERVATION_STOCK_ID"
                  [sourceParameters]="carrierCodeSourceParameter" sourceType='query' [noCache]="true" width="100"
                  (select)="onSelectStockId($event)"></ngc-dropdownlist>
              </div>
            </ngc-column>
            <ngc-column column="8" [grid36]="true">
              <ngc-label label="g.svc"></ngc-label>
              <div>
                <ngc-checkbox [width]='40' formControlName="svc"></ngc-checkbox>
              </div>
            </ngc-column>
            <ngc-column column="8" [grid36]="true">
              <ngc-label label="awb.awbnumber"></ngc-label>
              <div>
                <ngc-display formControlName="awbNumber"></ngc-display>
              </div>
            </ngc-column>
          </ngc-row>
          <ngc-row>
            <ngc-column column="8" [grid36]="true">
              <ngc-label label="export.shipper.code"></ngc-label>
              <div>
                <ngc-lov formControlName="code" sourceId="SHIPPER" title="g.customer.list" dataField="code" [width]="90"
                  (select)="onShipperCodeSelection($event)">
                  <ngc-data-column text="customer.code" dataField="code" [width]="50"></ngc-data-column>
                  <ngc-data-column text="g.customer.full.name" dataField="desc" [width]="80"></ngc-data-column>
                </ngc-lov>
              </div>
            </ngc-column>
            <ngc-column column="6" [grid36]="true">
              <ngc-label label="export.shipper.name"></ngc-label>
              <div>
                <ngc-input [width]="450" formControlName="shipperName" required></ngc-input>
                <ngc-input [width]="450" formControlName="shipperId" [hidden]="true"></ngc-input>
              </div>
            </ngc-column>
          </ngc-row>
        </ngc-container>
      </ngc-column>
      <ngc-column column="6">
        <ngc-container>
          <ngc-row>
            <ngc-column>
              <ngc-label label='export.awb.reservation.shipper.requested.info'></ngc-label>
            </ngc-column>
          </ngc-row>
          <ngc-row>
            <ngc-column column="6" [grid36]="true">
              <ngc-label label="awb.origin"></ngc-label>
              <div>
                <ngc-display formControlName="origin"></ngc-display>
              </div>
            </ngc-column>
            <ngc-column column="8" [grid36]="true">
              <ngc-label label="awb.destination"></ngc-label>
              <div>
                <ngc-lov formControlName="destination" upperCase="true" [width]="90" [dropDownWidth]="60" sourceId="APT"
                  title="flight.airport" displayMember="code" dataField="code" required>
                  <ngc-data-column text="flight.airportCode" dataField="code" [width]="100">
                  </ngc-data-column>
                  <ngc-data-column text="flight.airportName" dataField="desc" [width]="150">
                  </ngc-data-column>
                </ngc-lov>
              </div>
            </ngc-column>
            <ngc-column column="8" [grid36]="true">
              <ngc-label label="flight.Flight"></ngc-label>
              <div>
                <ngc-flightkeyinput upperCase="true" formControlName="flightKey" [width]="100"></ngc-flightkeyinput>
              </div>
            </ngc-column>
            <ngc-column column="6" [grid36]="true">
              <ngc-label value="flight.date"></ngc-label>
              <div>
                <ngc-datetimeinput formControlName="flightDate" [showCalendarButton]="true" [showTimeButton]="false"
                  [width]="100"></ngc-datetimeinput>
              </div>
            </ngc-column>
          </ngc-row>
          <ngc-row>
            <ngc-column column="3">
              <ngc-label label="g.terminal"></ngc-label>
              <div>
                <ngc-dropdownlist required formControlName="terminalId" sourceId='AWB_RESERVATION_TERMINAL_ID'
                  [width]="150" sourceType='query' (select)="onTerminalSelect($event)"
                  [sourceParameters]="terminalSourceParameter"></ngc-dropdownlist>
              </div>
            </ngc-column>
            <ngc-column column="3">
              <ngc-label label="g.core"></ngc-label>
              <div>
                <ngc-dropdownlist required formControlName="core" sourceId="AWB_RESERVATION_CORE" [width]="150"
                  sourceType='query' [sourceParameters]="awbSourceParameter" (select)="onSelectCore($event)">
                </ngc-dropdownlist>
              </div>
            </ngc-column>
          </ngc-row>
        </ngc-container>
      </ngc-column>
    </ngc-row>
  </ngc-container>
</form>
<form [formGroup]="searchReservedFormGroup">
  <ngc-container type="sectiontop">
    <ngc-row>
      <ngc-column>
        <ngc-label label="export.awb.reservation.booked.list"></ngc-label>
      </ngc-column>
    </ngc-row>
    <ngc-row>
      <ngc-column column="2">
        <ngc-label label="g.terminal"></ngc-label>
        <div>
          <ngc-dropdownlist accessEnableOn="r" required formControlName="terminalId"
            sourceId='AWB_RESERVATION_TERMINAL_ID' [width]="150" sourceType='query' (select)="onTerminalSelect($event)"
            [sourceParameters]="{'parameter1':null}">
          </ngc-dropdownlist>
        </div>
      </ngc-column>
      <ngc-column column="2">
        <ngc-label label="g.core"></ngc-label>
        <div>
          <ngc-dropdownlist accessEnableOn="r" required formControlName="core" sourceId="AWB_RESERVATION_CORE"
            [width]="150" sourceType='query' [sourceParameters]="awbSourceParameter"></ngc-dropdownlist>
        </div>
      </ngc-column>
      <ngc-column column="2">
        <ngc-label label="awb.destination"></ngc-label>
        <div>
          <ngc-lov accessEnableOn="r" formControlName="destination" upperCase="true" [width]="100" [dropDownWidth]="60"
            sourceId="APT" title="flight.airport" displayMember="code" dataField="code">
            <ngc-data-column text="flight.airportCode" dataField="code" [width]="100">
            </ngc-data-column>
            <ngc-data-column text="flight.airportName" dataField="desc" [width]="150">
            </ngc-data-column>
          </ngc-lov>
        </div>
      </ngc-column>
      <ngc-column align="left">
        <ngc-label label=" "></ngc-label>
        <div>
          <ngc-button accessEnableOn="r" (click)="onSearchAwbReservationDetails()" value="g.search" iconType="search">
          </ngc-button>
        </div>
      </ngc-column>

    </ngc-row>
    <ngc-row>
      <ngc-column *ngIf="searchFlg">
        <ngc-datatable formArrayName="bookedList" [enablePageSizeHeight]="false">
          <ngc-data-column text="g.select" dataField="selectFlg" [width]="55" type="check" cellsAlign="center">
          </ngc-data-column>
          <ngc-data-column text='awb.awbnumber' [width]="75" dataField="awbNumber"></ngc-data-column>
          <ngc-data-column text='g.status' [width]="75" dataField="status"></ngc-data-column>
          <ngc-data-column text='awb.destination' [width]="100" dataField="destination"></ngc-data-column>
          <ngc-data-column text='flight.Flight' [width]="100" dataField="flightKey"></ngc-data-column>
          <ngc-data-column text='flight.std.atd' [width]="100" dataField="std" upperCase='true'></ngc-data-column>
          <ngc-data-column text='flight.segment' [width]="75" dataField="segment"></ngc-data-column>
          <ngc-data-column text='export.shipper.name' [width]="250" dataField="shipperName"></ngc-data-column>
          <ngc-data-column text='export.awb.reservation.staff' [width]="75" dataField="staff"></ngc-data-column>
          <ngc-data-column text='g.date' [width]="75" dataField="date"></ngc-data-column>
        </ngc-datatable>
      </ngc-column>
    </ngc-row>
  </ngc-container>
</form>
<ngc-footer>
  <ngc-row *ngIf="searchFlg">
    <ngc-column>
      <ngc-button accessEnableOn="r" (click)="onNawb()" value="1.reservation" [width]="80"></ngc-button>
      <ngc-button accessEnableOn="r" (click)="onBooking()" value="2.reservation" [width]="100"></ngc-button>
    </ngc-column>
  </ngc-row>
</ngc-footer>