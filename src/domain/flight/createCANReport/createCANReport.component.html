<ngc-titlebar title="flight.canreport.title" (save)="onSave($event)" (clear)="onClear()" (cancel)="onBack($event)">
</ngc-titlebar>
<!--ayush-->
<form [formGroup]='createCANReport'>
  <ngc-container type='tab'>
    <ngc-row>
      <ngc-column>
        <ngc-container>
          <ngc-row>
            <ngc-column>
              <div>
                <ngc-display value="g.to" [i18n]="true" [width]='30'></ngc-display>
              </div>
            </ngc-column>
          </ngc-row>
          <ngc-row>
            <ngc-column column="3.5">
              <div>
                <ngc-label label="flight.receiverdetails"></ngc-label>
              </div>
              <ngc-input formControlName="receiverdetail1"></ngc-input>
            </ngc-column>
            <ngc-column column="3.5">
              <div>
                <ngc-label label=" "></ngc-label>
              </div>
              <ngc-input formControlName="receiverdetail2"></ngc-input>
            </ngc-column>
            <ngc-column column="3.5">
              <div>
                <ngc-label label=" "></ngc-label>
              </div>
              <ngc-input formControlName="receiverdetail3" [width]='150'></ngc-input>
            </ngc-column>
          </ngc-row>

        </ngc-container>
      </ngc-column>
      <ngc-column>
        <ngc-container>
          <ngc-row>
            <ngc-column>
              <div>
                <ngc-display value="g.from" [i18n]="true" [width]='30'></ngc-display>
              </div>
            </ngc-column>
          </ngc-row>
          <ngc-row>
            <ngc-column column="4">
              <ngc-label label="flight.senderdetails" [width]="100"></ngc-label>
              <div>
                <ngc-input formControlName="senderName" required></ngc-input>
              </div>
            </ngc-column>
            <ngc-column column="2.5">
              <ngc-label label="g.date" [width]="100"></ngc-label>
              <div>
                <ngc-dateinput formControlName="currentdate" [disabled]="disableFlag" [width]='100' required>
                </ngc-dateinput>
              </div>
            </ngc-column>
            <ngc-column column="2.5">
              <ngc-label label="flight.cannumber" [width]="100"></ngc-label>
              <div>
                <ngc-input formControlName="canNumber" [disabled]="disableFlag" required [width]='100'></ngc-input>
              </div>
            </ngc-column>
            <ngc-column column="2.5">
              <ngc-label label="flight.exportimport" [width]="100"></ngc-label>
              <div>
                <ngc-input formControlName="exportImport" [disabled]="disableFlag" [width]='100'></ngc-input>
              </div>
            </ngc-column>
          </ngc-row>
        </ngc-container>
      </ngc-column>
    </ngc-row>
  </ngc-container>
  <ngc-container type='section'>
    <ngc-row>
      <ngc-column column="12">
        <div>
          <ngc-label label="g.mail"></ngc-label>
        </div>
        <ngc-taginput formArrayName="email" dataField="emailelement" [width]='200'></ngc-taginput>
      </ngc-column>
      <!-- <ngc-column>
                      <div>
                        <ngc-label label=""></ngc-label>
                      </div>
                      <ngc-button (click)="onaddEmail($event)" value="Add Email" iconType="Add"> </ngc-button>
                    </ngc-column> -->
    </ngc-row>
  </ngc-container>
  <ngc-container type="section">
    <ngc-row>
      <ngc-column [grid72]='true' column="16">
        <ngc-label label="flight.operatorname"></ngc-label>
        <div>
          <ngc-input formControlName="operatorName" [maxlength]='50' required [width]="250"></ngc-input>
        </div>
      </ngc-column>
      <ngc-column [grid72]='true' column="6">
        <ngc-label label="flight.flightno"></ngc-label>
        <div>
          <ngc-input formControlName="flight" [disabled]="disableFlag" [width]="100"></ngc-input>
        </div>
      </ngc-column>
      <!-- <ngc-column [grid72]='true' column="7">
        <ngc-label label="A/C Type"></ngc-label>
        <div>
          <ngc-input formControlName="afttype" required [maxlength]='3' [width]="100"></ngc-input>
        </div>
      </ngc-column> -->
      <ngc-column [grid72]='true' column="6">
        <ngc-label label="flight.actype"></ngc-label>
        <div>
          <ngc-lov formControlName="afttype" [width]="55" title='flight.aircraft.caps' upperCase="true" dataField="code"
            displayMember="code" sourceId="AIR" [maxlength]="3" required>
            <ngc-data-column text="g.code" dataField="code" [width]="100"></ngc-data-column>
            <ngc-data-column text="flight.desc" dataField="desc" [width]="150"></ngc-data-column>
          </ngc-lov>
          <!-- <ngc-input formControlName="destination" required [maxlength]='3' [width]="50"></ngc-input> -->
        </div>
      </ngc-column>
      <ngc-column [grid72]='true' column="6">
        <ngc-label label="flight.acreg"></ngc-label>
        <div>
          <ngc-input formControlName="aftreg" [maxlength]='10' [width]="100"></ngc-input>
        </div>
      </ngc-column>
      <ngc-column [grid72]='true' column="6">
        <ngc-label label="g.origin"></ngc-label>
        <div>
          <ngc-lov formControlName="origin" [width]="55" title='flight.origin.caps' upperCase="true" dataField="code"
            displayMember="code" sourceId="APT" [maxlength]="3" required>
            <ngc-data-column text="g.code" dataField="code" [width]="100"></ngc-data-column>
            <ngc-data-column text="flight.desc" dataField="desc" [width]="150"></ngc-data-column>
          </ngc-lov>
          <!-- <ngc-input formControlName="origin" required [maxlength]='3' [width]="50"></ngc-input> -->
        </div>
      </ngc-column>
      <ngc-column [grid72]='true' column="7">
        <ngc-label label="g.destination"></ngc-label>
        <div>
          <ngc-lov formControlName="destination" [width]="55" title='g.destination' upperCase="true" dataField="code"
            displayMember="code" sourceId="APT" [maxlength]="3" required>
            <ngc-data-column text="g.code" dataField="code" [width]="100"></ngc-data-column>
            <ngc-data-column text="flight.desc" dataField="desc" [width]="150"></ngc-data-column>
          </ngc-lov>
          <!-- <ngc-input formControlName="destination" required [maxlength]='3' [width]="50"></ngc-input> -->
        </div>
      </ngc-column>
      <ngc-column [grid72]='true' column="12">
        <ngc-label label="flight.arrivaldatetime"></ngc-label>
        <div *ngIf="this.createCANReport.get('arrival').value">
          <ngc-datetimeinput formControlName="arrival" [separated]="true" [disableDate]="true"></ngc-datetimeinput>
        </div>
        <div *ngIf="!this.createCANReport.get('arrival').value">
          <ngc-datetimeinput formControlName="arrival" [separated]="true"></ngc-datetimeinput>
        </div>
      </ngc-column>
      <!-- <ngc-column [grid72]='true' column="4">
        <ngc-label label=""></ngc-label>
        <div>
          <ngc-datetimeinput formControlName="arrival" [width]="20" [separated]="true"></ngc-datetimeinput>
        </div>
      </ngc-column> -->
      <ngc-column [grid72]='true' column="11">
        <ngc-label label="flight.departuredatetime"></ngc-label>
        <div *ngIf="this.createCANReport.get('departure').value">
          <ngc-datetimeinput formControlName="departure" [separated]="true" [disableDate]="true"></ngc-datetimeinput>
        </div>
        <div *ngIf="!this.createCANReport.get('departure').value">
          <ngc-datetimeinput formControlName="departure" [separated]="true"></ngc-datetimeinput>
        </div>
      </ngc-column>
      <!-- <ngc-column [grid72]='true' column="4">
        <ngc-label label=""></ngc-label>
        <div>
          <ngc-datetimeinput formControlName="departure" [separated]="true" [width]="20"></ngc-datetimeinput>
        </div>
      </ngc-column> -->
      <!-- <ngc-column [grid72]='true' column="11">
        <ngc-label label="Status"></ngc-label>
        <div>
          <ngc-input formControlName="status" required [width]="100"></ngc-input>
        </div>
      </ngc-column> -->


    </ngc-row>
  </ngc-container>
  <ngc-container type="section">
    <ngc-row>
      <ngc-column>
        <ngc-container>
          <ngc-row>
            <ngc-column>
              <div>
                <ngc-display value="flight.service.provided" [i18n]="true" [width]='30'></ngc-display>
              </div>
            </ngc-column>
            <ngc-column>
              <div>
                <ngc-button (click)="onaddservice($event)" value="flight.add.service" iconType="Add"> </ngc-button>
              </div>
            </ngc-column>
          </ngc-row>
          <ngc-row>
            <ngc-column>
              <ngc-table [width]="450">
                <thead>
                  <tr>
                    <th [width]="10">
                      <ngc-label value="flight.services"></ngc-label>
                    </th>
                    <th [width]="205">
                      <ngc-label value="flight.details"></ngc-label>
                    </th>
                    <th [width]="10">
                      <ngc-label value=""></ngc-label>
                    </th>
                  </tr>
                </thead>
                <tbody formArrayName="serviceprovided">
                  <ng-container *ngFor="let item of createCANReport.controls.serviceprovided.controls; let index=index"
                    [formGroupName]="index">
                    <tr>
                      <td>

                        <ngc-display formControlName="service" *ngIf="item.service !== 'C'">

                        </ngc-display>
                        <ngc-input formControlName="service" *ngIf="item.flagCRUD === 'C'" [maxlength]="25">
                        </ngc-input>
                        <!-- <ngc-input formControlName="service" [maxlength]="25"> 
                      </ngc-input>-->
                      </td>
                      <td>
                        <!-- <ngc-display formControlName="servicedetails" *ngIf="item.get('flagCRUD').value === 'R'">
                      </ngc-display>
                      <ngc-input formControlName="servicedetails" *ngIf="item.get('flagCRUD').value === 'C'"
                        [maxlength]="25"></ngc-input> -->
                        <ngc-input formControlName="servicedetails" [maxlength]="25"></ngc-input>
                      </td>
                      <td>
                        <ngc-link *ngIf=" item.flagCRUD==='C' || item.readFlag===false "
                          (click)="deleteUld($event, index)" type="link" iconType="delete"></ngc-link>

                      </td>
                    </tr>
                  </ng-container>
                </tbody>
              </ngc-table>
            </ngc-column>
          </ngc-row>
        </ngc-container>
      </ngc-column>
      <ngc-column>
        <ngc-container>
          <ngc-row>
            <ngc-column>
              <div>
                <ngc-display value="flight.sender.detail.caps" [i18n]="true" [width]='30'></ngc-display>
              </div>
            </ngc-column>
          </ngc-row>

          <ngc-row>
            <ngc-column column="3.5">
              <ngc-label value="g.name"></ngc-label>
              <div>
                <ngc-input formControlName="userName"></ngc-input>
              </div>
            </ngc-column>
            <ngc-column column="3.5">
              <ngc-label value="flight.staffnumber"></ngc-label>
              <div>
                <ngc-input formControlName="staffNumber"></ngc-input>
              </div>
            </ngc-column>
            <ngc-column column="3.5">
              <ngc-label value="flight.designation"></ngc-label>
              <div>
                <ngc-input formControlName="designation"></ngc-input>
              </div>
            </ngc-column>
          </ngc-row>
          <ngc-row>
            <ngc-column column="3.5">
              <ngc-label value="flight.contactnumber" [width]='100'></ngc-label>
              <div>
                <ngc-input formControlName="userContact"></ngc-input>
              </div>
            </ngc-column>
            <ngc-column column="3.5">
              <ngc-label value="g.email" [width]='100'></ngc-label>
              <div>
                <ngc-input formControlName="userEmail"></ngc-input>
              </div>
            </ngc-column>
          </ngc-row>
        </ngc-container>
      </ngc-column>
    </ngc-row>
  </ngc-container>
  <ngc-container type="tab">
    <ngc-row>
      <ngc-column [grid72]='true' column='66'>

      </ngc-column>
      <ngc-column [grid72]='true ' column="6">
        <div>
          <ngc-button value="flight.mail" (click)="onCANServiceReportgeneration()" iconType="Send" align='right'>
          </ngc-button>
        </div>
      </ngc-column>
    </ngc-row>
  </ngc-container>
  <ngc-report #reportWindow title="g.report"  reportId='CANReport'  [reportParameters]='reportParameters'></ngc-report>
</form>