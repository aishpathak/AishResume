<ngc-titlebar title="title.mailbag.correction"></ngc-titlebar>
<form [formGroup]="mailbagCorrectionForm">
  <ngc-container type="header">
    <ngc-row formGroupName="searchFormGroup">
      <ngc-column [column]="3">
        <ngc-label label="mb.mbname"></ngc-label>
        <div>
          <ngc-input [width]="300" formControlName="mailbagNumber"></ngc-input>
        </div>
      </ngc-column>
      <ngc-column verticalAlign="middle" [column]="2">
        <ngc-button value="expbu.search" (click)="onSearch()"></ngc-button>
      </ngc-column>
    </ngc-row>
  </ngc-container>

  <ngc-container formGroupName="mailbagCorrectionDetailsForm" type="section">
    <ngc-row>
      <ngc-column [column]="2">
        <ngc-label label="mb.incomingflight"></ngc-label>
        <div>
          <ngc-input formControlName="incomingFlightKey"></ngc-input>
        </div>
      </ngc-column>
      <ngc-column [column]="2">
        <ngc-label label="g.date"></ngc-label>
        <div>
          <ngc-datetimeinput formControlName="incomingFlightDate" [onlyDate]="true"></ngc-datetimeinput>
        </div>
      </ngc-column>
      <ngc-column [column]="2">
        <ngc-label label="mb.storelocation"></ngc-label>
        <div>
          <ngc-input formControlName="storeLocation"></ngc-input>
        </div>
      </ngc-column>
      <ngc-column [column]="2">
        <ngc-label label="outhouse.paflight"></ngc-label>
        <div>
          <ngc-display value="airmail.Flight" [i18n]="true"></ngc-display>
        </div>
      </ngc-column>
      <ngc-column [column]="2">
        <ngc-label label="g.date"></ngc-label>
        <div>
          <ngc-display value="12feb2018"></ngc-display>
        </div>
      </ngc-column>
    </ngc-row>
    <ngc-row>
      <ngc-column [column]="2">
        <ngc-label label="mb.outgoingflight"></ngc-label>
        <div>
          <ngc-input formControlName="manifestedFlight"></ngc-input>
        </div>
      </ngc-column>
      <ngc-column [column]="2">
        <ngc-label label="g.date"></ngc-label>
        <div>
          <ngc-datetimeinput formControlName="manifestedFlightDate" [onlyDate]="true"></ngc-datetimeinput>
        </div>
      </ngc-column>
      <ngc-column [column]="2">
        <ngc-label label="mb.muldt"></ngc-label>
        <div>
          <ngc-input formControlName="manifestedUldTrolley"></ngc-input>
        </div>
      </ngc-column>
      <ngc-column>
        <ngc-label label=""></ngc-label>
      </ngc-column>
      <ngc-column>
        <ngc-label label="mb.xrayresult"></ngc-label>
        <div>
          <ngc-dropdownlist [width]="100" [noCache]="true"></ngc-dropdownlist>
        </div>
      </ngc-column>
      <ngc-column [column]="2">
        <ngc-label label=""></ngc-label>
        <div>
          <ngc-checkbox groupName="embargo">
            <ngc-i18n value="mb.emargo"></ngc-i18n>
          </ngc-checkbox>
          <ngc-label label=""></ngc-label>
          <ngc-checkbox groupName="damage">
            <ngc-i18n value="mb.damage"></ngc-i18n>
          </ngc-checkbox>
        </div>
      </ngc-column>
      <ngc-column verticalAlign="middle">
        <ngc-button value="mb.cdamage" (click)="openCaptureDamageDetails()"></ngc-button>
      </ngc-column>
    </ngc-row>
    <ngc-row>
      <ngc-column>
        <ngc-label label="uld.Remark"></ngc-label>
        <div>
          <ngc-input [width]="500" formControlName="dsnRemark"></ngc-input>
        </div>
      </ngc-column>
    </ngc-row>
  </ngc-container>


  <ngc-window #captureDamage title="mb.cdamage" [width]="900" [height]="510" [showCloseButton]="true">
    <ngc-container type="tab" formGroupName="captureDamageForm">
      <ngc-row>
        <ngc-column>
          <ngc-label label="mb.mbname"></ngc-label>
          <div>
            <ngc-display value="646464646"></ngc-display>
          </div>
        </ngc-column>

        <ngc-column>
          <ngc-label label="mb.pdamage"></ngc-label>
          <div>
            <ngc-display value="6"></ngc-display>
          </div>
        </ngc-column>
      </ngc-row>

      <ngc-row>
        <ngc-column>
          <ngc-label label=""></ngc-label>
        </ngc-column>
      </ngc-row>

      <ngc-row>
        <ngc-column>
          <ngc-label label="uld.Remark"></ngc-label>
          <div>
            <ngc-input [width]="500"></ngc-input>
          </div>
        </ngc-column>
      </ngc-row>

      <ngc-row>
        <ngc-column>
          <ngc-label label=""></ngc-label>
        </ngc-column>
      </ngc-row>

      <ngc-row>
        <ngc-column align="right">
          <ngc-button label="mb.adamage" (click)="addDamage()"></ngc-button>
        </ngc-column>
      </ngc-row>

      <ngc-row>
        <ngc-column>
          <ngc-label label=""></ngc-label>
        </ngc-column>
      </ngc-row>

      <ngc-row>
        <ngc-column>
          <ngc-table>
            <thead>
              <tr>
                <th>
                  <ngc-label value="mb.sno"></ngc-label>
                </th>
                <th>
                  <ngc-label value="mb.nod"></ngc-label>
                </th>
                <th>
                  <ngc-label value="mb.pdamage"></ngc-label>
                </th>
                <th>
                  <ngc-label value="mb.severity"></ngc-label>
                </th>
                <th>
                  <ngc-label value="mb.occurence"></ngc-label>
                </th>
                <th>
                  <ngc-label value=""></ngc-label>
                </th>
              </tr>
            </thead>
            <tbody formArrayName="captureDamageDetails">
              <tr *ngFor=" let item of mailbagCorrectionForm.controls.captureDamageForm.controls.captureDamageDetails.controls; let index=index"
                [formGroupName]="index">
                <td>
                  <ngc-display formControlName="sno"></ngc-display>
                </td>
                <td>
                  <ngc-dropdownlist formControlName="natureOfDamage" [width]="100"></ngc-dropdownlist>
                </td>
                <td>
                  <ngc-piecesinput formControlName="piecesDamaged" [width]="100"></ngc-piecesinput>
                </td>
                <td>
                  <ngc-dropdownlist formControlName="severity" [width]="100"></ngc-dropdownlist>
                </td>
                <td>
                  <ngc-dropdownlist formControlName="occurrence" [width]="100"></ngc-dropdownlist>
                </td>
                <td align="center">
                  <ngc-link iconType="delete" (click)="onDelete(index)" formControlName="selectDeleteIcon"></ngc-link>
                </td>
              </tr>
            </tbody>
          </ngc-table>
        </ngc-column>
      </ngc-row>

      <ngc-row>
        <ngc-column>
          <ngc-label label=""></ngc-label>
        </ngc-column>
      </ngc-row>

      <ngc-row>
        <ngc-column [column]="4">
          <ngc-label value="si.emailto"></ngc-label>
          <div>
            <ngc-input [width]="250"></ngc-input>
          </div>
        </ngc-column>
        <ngc-column [column]="1">
          <br>
          <ngc-button value="si.send"></ngc-button>
        </ngc-column>
      </ngc-row>
      <ngc-row>
        <ngc-column>
          <ngc-label label=""></ngc-label>
        </ngc-column>
      </ngc-row>

      <ngc-row>
        <ngc-column>
          <ngc-button label="mb.deletephoto"></ngc-button>
        </ngc-column>
      </ngc-row>

      <ngc-row>
        <ngc-column>
          <ngc-label label=""></ngc-label>
        </ngc-column>
      </ngc-row>

      <ngc-row>
        <ngc-column align="right">
          <ngc-button label="save"></ngc-button>
        </ngc-column>
      </ngc-row>


    </ngc-container>
  </ngc-window>
</form>